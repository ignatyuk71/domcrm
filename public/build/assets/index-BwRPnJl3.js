import{a as we}from"./index-B9ygI19o.js";function go(t){const s=Object.create(null);for(const n of t.split(","))s[n]=1;return n=>n in s}const De={},ns=[],kt=()=>{},ho=()=>!1,tl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),yo=t=>t.startsWith("onUpdate:"),lt=Object.assign,sl=(t,s)=>{const n=t.indexOf(s);n>-1&&t.splice(n,1)},sa=Object.prototype.hasOwnProperty,je=(t,s)=>sa.call(t,s),$e=Array.isArray,ls=t=>rn(t)==="[object Map]",_o=t=>rn(t)==="[object Set]",Ce=t=>typeof t=="function",Xe=t=>typeof t=="string",Bt=t=>typeof t=="symbol",Ve=t=>t!==null&&typeof t=="object",$o=t=>(Ve(t)||Ce(t))&&Ce(t.then)&&Ce(t.catch),ko=Object.prototype.toString,rn=t=>ko.call(t),na=t=>rn(t).slice(8,-1),xo=t=>rn(t)==="[object Object]",nl=t=>Xe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ys=go(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cn=t=>{const s=Object.create(null);return(n=>s[n]||(s[n]=t(n)))},la=/-\w/g,xt=cn(t=>t.replace(la,s=>s.slice(1).toUpperCase())),oa=/\B([A-Z])/g,ms=cn(t=>t.replace(oa,"-$1").toLowerCase()),wo=cn(t=>t.charAt(0).toUpperCase()+t.slice(1)),xn=cn(t=>t?`on${wo(t)}`:""),it=(t,s)=>!Object.is(t,s),wn=(t,...s)=>{for(let n=0;n<t.length;n++)t[n](...s)},Co=(t,s,n,l=!1)=>{Object.defineProperty(t,s,{configurable:!0,enumerable:!1,writable:l,value:n})},ia=t=>{const s=parseFloat(t);return isNaN(s)?t:s};let Sl;const dn=()=>Sl||(Sl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Te(t){if($e(t)){const s={};for(let n=0;n<t.length;n++){const l=t[n],o=Xe(l)?da(l):Te(l);if(o)for(const i in o)s[i]=o[i]}return s}else if(Xe(t)||Ve(t))return t}const aa=/;(?![^(]*\))/g,ra=/:([^]+)/,ca=/\/\*[^]*?\*\//g;function da(t){const s={};return t.replace(ca,"").split(aa).forEach(n=>{if(n){const l=n.split(ra);l.length>1&&(s[l[0].trim()]=l[1].trim())}}),s}function W(t){let s="";if(Xe(t))s=t;else if($e(t))for(let n=0;n<t.length;n++){const l=W(t[n]);l&&(s+=l+" ")}else if(Ve(t))for(const n in t)t[n]&&(s+=n+" ");return s.trim()}const So=t=>!!(t&&t.__v_isRef===!0),g=t=>Xe(t)?t:t==null?"":$e(t)||Ve(t)&&(t.toString===ko||!Ce(t.toString))?So(t)?g(t.value):JSON.stringify(t,To,2):String(t),To=(t,s)=>So(s)?To(t,s.value):ls(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((n,[l,o],i)=>(n[Cn(l,i)+" =>"]=o,n),{})}:_o(s)?{[`Set(${s.size})`]:[...s.values()].map(n=>Cn(n))}:Bt(s)?Cn(s):Ve(s)&&!$e(s)&&!xo(s)?String(s):s,Cn=(t,s="")=>{var n;return Bt(t)?`Symbol(${(n=t.description)!=null?n:s})`:t};let ot;class ua{constructor(s=!1){this.detached=s,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ot,!s&&ot&&(this.index=(ot.scopes||(ot.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let s,n;if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].pause();for(s=0,n=this.effects.length;s<n;s++)this.effects[s].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let s,n;if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].resume();for(s=0,n=this.effects.length;s<n;s++)this.effects[s].resume()}}run(s){if(this._active){const n=ot;try{return ot=this,s()}finally{ot=n}}}on(){++this._on===1&&(this.prevScope=ot,ot=this)}off(){this._on>0&&--this._on===0&&(ot=this.prevScope,this.prevScope=void 0)}stop(s){if(this._active){this._active=!1;let n,l;for(n=0,l=this.effects.length;n<l;n++)this.effects[n].stop();for(this.effects.length=0,n=0,l=this.cleanups.length;n<l;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,l=this.scopes.length;n<l;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!s){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function fa(){return ot}let Ee;const Sn=new WeakSet;class Ao{constructor(s){this.fn=s,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ot&&ot.active&&ot.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Sn.has(this)&&(Sn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Po(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Tl(this),Mo(this);const s=Ee,n=pt;Ee=this,pt=!0;try{return this.fn()}finally{Io(this),Ee=s,pt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let s=this.deps;s;s=s.nextDep)il(s);this.deps=this.depsTail=void 0,Tl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Sn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vn(this)&&this.run()}get dirty(){return Vn(this)}}let Oo=0,_s,$s;function Po(t,s=!1){if(t.flags|=8,s){t.next=$s,$s=t;return}t.next=_s,_s=t}function ll(){Oo++}function ol(){if(--Oo>0)return;if($s){let s=$s;for($s=void 0;s;){const n=s.next;s.next=void 0,s.flags&=-9,s=n}}let t;for(;_s;){let s=_s;for(_s=void 0;s;){const n=s.next;if(s.next=void 0,s.flags&=-9,s.flags&1)try{s.trigger()}catch(l){t||(t=l)}s=n}}if(t)throw t}function Mo(t){for(let s=t.deps;s;s=s.nextDep)s.version=-1,s.prevActiveLink=s.dep.activeLink,s.dep.activeLink=s}function Io(t){let s,n=t.depsTail,l=n;for(;l;){const o=l.prevDep;l.version===-1?(l===n&&(n=o),il(l),ma(l)):s=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=o}t.deps=s,t.depsTail=n}function Vn(t){for(let s=t.deps;s;s=s.nextDep)if(s.dep.version!==s.version||s.dep.computed&&(Do(s.dep.computed)||s.dep.version!==s.version))return!0;return!!t._dirty}function Do(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ss)||(t.globalVersion=Ss,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Vn(t))))return;t.flags|=2;const s=t.dep,n=Ee,l=pt;Ee=t,pt=!0;try{Mo(t);const o=t.fn(t._value);(s.version===0||it(o,t._value))&&(t.flags|=128,t._value=o,s.version++)}catch(o){throw s.version++,o}finally{Ee=n,pt=l,Io(t),t.flags&=-3}}function il(t,s=!1){const{dep:n,prevSub:l,nextSub:o}=t;if(l&&(l.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=l,t.nextSub=void 0),n.subs===t&&(n.subs=l,!l&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)il(i,!0)}!s&&!--n.sc&&n.map&&n.map.delete(n.key)}function ma(t){const{prevDep:s,nextDep:n}=t;s&&(s.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=s,t.nextDep=void 0)}let pt=!0;const Uo=[];function It(){Uo.push(pt),pt=!1}function Dt(){const t=Uo.pop();pt=t===void 0?!0:t}function Tl(t){const{cleanup:s}=t;if(t.cleanup=void 0,s){const n=Ee;Ee=void 0;try{s()}finally{Ee=n}}}let Ss=0;class pa{constructor(s,n){this.sub=s,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class un{constructor(s){this.computed=s,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(s){if(!Ee||!pt||Ee===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ee)n=this.activeLink=new pa(Ee,this),Ee.deps?(n.prevDep=Ee.depsTail,Ee.depsTail.nextDep=n,Ee.depsTail=n):Ee.deps=Ee.depsTail=n,jo(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const l=n.nextDep;l.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=l),n.prevDep=Ee.depsTail,n.nextDep=void 0,Ee.depsTail.nextDep=n,Ee.depsTail=n,Ee.deps===n&&(Ee.deps=l)}return n}trigger(s){this.version++,Ss++,this.notify(s)}notify(s){ll();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ol()}}}function jo(t){if(t.dep.sc++,t.sub.flags&4){const s=t.dep.computed;if(s&&!t.dep.subs){s.flags|=20;for(let l=s.deps;l;l=l.nextDep)jo(l)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ln=new WeakMap,Xt=Symbol(""),Nn=Symbol(""),Ts=Symbol("");function We(t,s,n){if(pt&&Ee){let l=Ln.get(t);l||Ln.set(t,l=new Map);let o=l.get(n);o||(l.set(n,o=new un),o.map=l,o.key=n),o.track()}}function Ot(t,s,n,l,o,i){const a=Ln.get(t);if(!a){Ss++;return}const r=u=>{u&&u.trigger()};if(ll(),s==="clear")a.forEach(r);else{const u=$e(t),h=u&&nl(n);if(u&&n==="length"){const v=Number(l);a.forEach((p,f)=>{(f==="length"||f===Ts||!Bt(f)&&f>=v)&&r(p)})}else switch((n!==void 0||a.has(void 0))&&r(a.get(n)),h&&r(a.get(Ts)),s){case"add":u?h&&r(a.get("length")):(r(a.get(Xt)),ls(t)&&r(a.get(Nn)));break;case"delete":u||(r(a.get(Xt)),ls(t)&&r(a.get(Nn)));break;case"set":ls(t)&&r(a.get(Xt));break}}ol()}function ts(t){const s=Pe(t);return s===t?s:(We(s,"iterate",Ts),ft(t)?s:s.map(vt))}function fn(t){return We(t=Pe(t),"iterate",Ts),t}function Vt(t,s){return Ut(t)?Jt(t)?rs(vt(s)):rs(s):vt(s)}const va={__proto__:null,[Symbol.iterator](){return Tn(this,Symbol.iterator,t=>Vt(this,t))},concat(...t){return ts(this).concat(...t.map(s=>$e(s)?ts(s):s))},entries(){return Tn(this,"entries",t=>(t[1]=Vt(this,t[1]),t))},every(t,s){return St(this,"every",t,s,void 0,arguments)},filter(t,s){return St(this,"filter",t,s,n=>n.map(l=>Vt(this,l)),arguments)},find(t,s){return St(this,"find",t,s,n=>Vt(this,n),arguments)},findIndex(t,s){return St(this,"findIndex",t,s,void 0,arguments)},findLast(t,s){return St(this,"findLast",t,s,n=>Vt(this,n),arguments)},findLastIndex(t,s){return St(this,"findLastIndex",t,s,void 0,arguments)},forEach(t,s){return St(this,"forEach",t,s,void 0,arguments)},includes(...t){return An(this,"includes",t)},indexOf(...t){return An(this,"indexOf",t)},join(t){return ts(this).join(t)},lastIndexOf(...t){return An(this,"lastIndexOf",t)},map(t,s){return St(this,"map",t,s,void 0,arguments)},pop(){return vs(this,"pop")},push(...t){return vs(this,"push",t)},reduce(t,...s){return Al(this,"reduce",t,s)},reduceRight(t,...s){return Al(this,"reduceRight",t,s)},shift(){return vs(this,"shift")},some(t,s){return St(this,"some",t,s,void 0,arguments)},splice(...t){return vs(this,"splice",t)},toReversed(){return ts(this).toReversed()},toSorted(t){return ts(this).toSorted(t)},toSpliced(...t){return ts(this).toSpliced(...t)},unshift(...t){return vs(this,"unshift",t)},values(){return Tn(this,"values",t=>Vt(this,t))}};function Tn(t,s,n){const l=fn(t),o=l[s]();return l!==t&&!ft(t)&&(o._next=o.next,o.next=()=>{const i=o._next();return i.done||(i.value=n(i.value)),i}),o}const ba=Array.prototype;function St(t,s,n,l,o,i){const a=fn(t),r=a!==t&&!ft(t),u=a[s];if(u!==ba[s]){const p=u.apply(t,i);return r?vt(p):p}let h=n;a!==t&&(r?h=function(p,f){return n.call(this,Vt(t,p),f,t)}:n.length>2&&(h=function(p,f){return n.call(this,p,f,t)}));const v=u.call(a,h,l);return r&&o?o(v):v}function Al(t,s,n,l){const o=fn(t);let i=n;return o!==t&&(ft(t)?n.length>3&&(i=function(a,r,u){return n.call(this,a,r,u,t)}):i=function(a,r,u){return n.call(this,a,Vt(t,r),u,t)}),o[s](i,...l)}function An(t,s,n){const l=Pe(t);We(l,"iterate",Ts);const o=l[s](...n);return(o===-1||o===!1)&&cl(n[0])?(n[0]=Pe(n[0]),l[s](...n)):o}function vs(t,s,n=[]){It(),ll();const l=Pe(t)[s].apply(t,n);return ol(),Dt(),l}const ga=go("__proto__,__v_isRef,__isVue"),Fo=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Bt));function ha(t){Bt(t)||(t=String(t));const s=Pe(this);return We(s,"has",t),s.hasOwnProperty(t)}class Eo{constructor(s=!1,n=!1){this._isReadonly=s,this._isShallow=n}get(s,n,l){if(n==="__v_skip")return s.__v_skip;const o=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw")return l===(o?i?Aa:Ro:i?No:Lo).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(l)?s:void 0;const a=$e(s);if(!o){let u;if(a&&(u=va[n]))return u;if(n==="hasOwnProperty")return ha}const r=Reflect.get(s,n,ze(s)?s:l);if((Bt(n)?Fo.has(n):ga(n))||(o||We(s,"get",n),i))return r;if(ze(r)){const u=a&&nl(n)?r:r.value;return o&&Ve(u)?qn(u):u}return Ve(r)?o?qn(r):Me(r):r}}class Vo extends Eo{constructor(s=!1){super(!1,s)}set(s,n,l,o){let i=s[n];const a=$e(s)&&nl(n);if(!this._isShallow){const h=Ut(i);if(!ft(l)&&!Ut(l)&&(i=Pe(i),l=Pe(l)),!a&&ze(i)&&!ze(l))return h||(i.value=l),!0}const r=a?Number(n)<s.length:je(s,n),u=Reflect.set(s,n,l,ze(s)?s:o);return s===Pe(o)&&(r?it(l,i)&&Ot(s,"set",n,l):Ot(s,"add",n,l)),u}deleteProperty(s,n){const l=je(s,n);s[n];const o=Reflect.deleteProperty(s,n);return o&&l&&Ot(s,"delete",n,void 0),o}has(s,n){const l=Reflect.has(s,n);return(!Bt(n)||!Fo.has(n))&&We(s,"has",n),l}ownKeys(s){return We(s,"iterate",$e(s)?"length":Xt),Reflect.ownKeys(s)}}class ya extends Eo{constructor(s=!1){super(!0,s)}set(s,n){return!0}deleteProperty(s,n){return!0}}const _a=new Vo,$a=new ya,ka=new Vo(!0);const Rn=t=>t,Vs=t=>Reflect.getPrototypeOf(t);function xa(t,s,n){return function(...l){const o=this.__v_raw,i=Pe(o),a=ls(i),r=t==="entries"||t===Symbol.iterator&&a,u=t==="keys"&&a,h=o[t](...l),v=n?Rn:s?rs:vt;return!s&&We(i,"iterate",u?Nn:Xt),{next(){const{value:p,done:f}=h.next();return f?{value:p,done:f}:{value:r?[v(p[0]),v(p[1])]:v(p),done:f}},[Symbol.iterator](){return this}}}}function Ls(t){return function(...s){return t==="delete"?!1:t==="clear"?void 0:this}}function wa(t,s){const n={get(o){const i=this.__v_raw,a=Pe(i),r=Pe(o);t||(it(o,r)&&We(a,"get",o),We(a,"get",r));const{has:u}=Vs(a),h=s?Rn:t?rs:vt;if(u.call(a,o))return h(i.get(o));if(u.call(a,r))return h(i.get(r));i!==a&&i.get(o)},get size(){const o=this.__v_raw;return!t&&We(Pe(o),"iterate",Xt),o.size},has(o){const i=this.__v_raw,a=Pe(i),r=Pe(o);return t||(it(o,r)&&We(a,"has",o),We(a,"has",r)),o===r?i.has(o):i.has(o)||i.has(r)},forEach(o,i){const a=this,r=a.__v_raw,u=Pe(r),h=s?Rn:t?rs:vt;return!t&&We(u,"iterate",Xt),r.forEach((v,p)=>o.call(i,h(v),h(p),a))}};return lt(n,t?{add:Ls("add"),set:Ls("set"),delete:Ls("delete"),clear:Ls("clear")}:{add(o){!s&&!ft(o)&&!Ut(o)&&(o=Pe(o));const i=Pe(this);return Vs(i).has.call(i,o)||(i.add(o),Ot(i,"add",o,o)),this},set(o,i){!s&&!ft(i)&&!Ut(i)&&(i=Pe(i));const a=Pe(this),{has:r,get:u}=Vs(a);let h=r.call(a,o);h||(o=Pe(o),h=r.call(a,o));const v=u.call(a,o);return a.set(o,i),h?it(i,v)&&Ot(a,"set",o,i):Ot(a,"add",o,i),this},delete(o){const i=Pe(this),{has:a,get:r}=Vs(i);let u=a.call(i,o);u||(o=Pe(o),u=a.call(i,o)),r&&r.call(i,o);const h=i.delete(o);return u&&Ot(i,"delete",o,void 0),h},clear(){const o=Pe(this),i=o.size!==0,a=o.clear();return i&&Ot(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=xa(o,t,s)}),n}function al(t,s){const n=wa(t,s);return(l,o,i)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?l:Reflect.get(je(n,o)&&o in l?n:l,o,i)}const Ca={get:al(!1,!1)},Sa={get:al(!1,!0)},Ta={get:al(!0,!1)};const Lo=new WeakMap,No=new WeakMap,Ro=new WeakMap,Aa=new WeakMap;function Oa(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pa(t){return t.__v_skip||!Object.isExtensible(t)?0:Oa(na(t))}function Me(t){return Ut(t)?t:rl(t,!1,_a,Ca,Lo)}function Ma(t){return rl(t,!1,ka,Sa,No)}function qn(t){return rl(t,!0,$a,Ta,Ro)}function rl(t,s,n,l,o){if(!Ve(t)||t.__v_raw&&!(s&&t.__v_isReactive))return t;const i=Pa(t);if(i===0)return t;const a=o.get(t);if(a)return a;const r=new Proxy(t,i===2?l:n);return o.set(t,r),r}function Jt(t){return Ut(t)?Jt(t.__v_raw):!!(t&&t.__v_isReactive)}function Ut(t){return!!(t&&t.__v_isReadonly)}function ft(t){return!!(t&&t.__v_isShallow)}function cl(t){return t?!!t.__v_raw:!1}function Pe(t){const s=t&&t.__v_raw;return s?Pe(s):t}function Ia(t){return!je(t,"__v_skip")&&Object.isExtensible(t)&&Co(t,"__v_skip",!0),t}const vt=t=>Ve(t)?Me(t):t,rs=t=>Ve(t)?qn(t):t;function ze(t){return t?t.__v_isRef===!0:!1}function S(t){return Da(t,!1)}function Da(t,s){return ze(t)?t:new Ua(t,s)}class Ua{constructor(s,n){this.dep=new un,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?s:Pe(s),this._value=n?s:vt(s),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(s){const n=this._rawValue,l=this.__v_isShallow||ft(s)||Ut(s);s=l?s:Pe(s),it(s,n)&&(this._rawValue=s,this._value=l?s:vt(s),this.dep.trigger())}}function Ae(t){return ze(t)?t.value:t}const ja={get:(t,s,n)=>s==="__v_raw"?t:Ae(Reflect.get(t,s,n)),set:(t,s,n,l)=>{const o=t[s];return ze(o)&&!ze(n)?(o.value=n,!0):Reflect.set(t,s,n,l)}};function qo(t){return Jt(t)?t:new Proxy(t,ja)}class Fa{constructor(s){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new un,{get:l,set:o}=s(n.track.bind(n),n.trigger.bind(n));this._get=l,this._set=o}get value(){return this._value=this._get()}set value(s){this._set(s)}}function Ea(t){return new Fa(t)}class Va{constructor(s,n,l){this.fn=s,this.setter=n,this._value=void 0,this.dep=new un(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ss-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&Ee!==this)return Po(this,!0),!0}get value(){const s=this.dep.track();return Do(this),s&&(s.version=this.dep.version),this._value}set value(s){this.setter&&this.setter(s)}}function La(t,s,n=!1){let l,o;return Ce(t)?l=t:(l=t.get,o=t.set),new Va(l,o,n)}const Ns={},Js=new WeakMap;let Kt;function Na(t,s=!1,n=Kt){if(n){let l=Js.get(n);l||Js.set(n,l=[]),l.push(t)}}function Ra(t,s,n=De){const{immediate:l,deep:o,once:i,scheduler:a,augmentJob:r,call:u}=n,h=I=>o?I:ft(I)||o===!1||o===0?Pt(I,1):Pt(I);let v,p,f,m,y=!1,L=!1;if(ze(t)?(p=()=>t.value,y=ft(t)):Jt(t)?(p=()=>h(t),y=!0):$e(t)?(L=!0,y=t.some(I=>Jt(I)||ft(I)),p=()=>t.map(I=>{if(ze(I))return I.value;if(Jt(I))return h(I);if(Ce(I))return u?u(I,2):I()})):Ce(t)?s?p=u?()=>u(t,2):t:p=()=>{if(f){It();try{f()}finally{Dt()}}const I=Kt;Kt=v;try{return u?u(t,3,[m]):t(m)}finally{Kt=I}}:p=kt,s&&o){const I=p,V=o===!0?1/0:o;p=()=>Pt(I(),V)}const K=fa(),P=()=>{v.stop(),K&&K.active&&sl(K.effects,v)};if(i&&s){const I=s;s=(...V)=>{I(...V),P()}}let H=L?new Array(t.length).fill(Ns):Ns;const E=I=>{if(!(!(v.flags&1)||!v.dirty&&!I))if(s){const V=v.run();if(o||y||(L?V.some((Q,ee)=>it(Q,H[ee])):it(V,H))){f&&f();const Q=Kt;Kt=v;try{const ee=[V,H===Ns?void 0:L&&H[0]===Ns?[]:H,m];H=V,u?u(s,3,ee):s(...ee)}finally{Kt=Q}}}else v.run()};return r&&r(E),v=new Ao(p),v.scheduler=a?()=>a(E,!1):E,m=I=>Na(I,!1,v),f=v.onStop=()=>{const I=Js.get(v);if(I){if(u)u(I,4);else for(const V of I)V();Js.delete(v)}},s?l?E(!0):H=v.run():a?a(E.bind(null,!0),!0):v.run(),P.pause=v.pause.bind(v),P.resume=v.resume.bind(v),P.stop=P,P}function Pt(t,s=1/0,n){if(s<=0||!Ve(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=s))return t;if(n.set(t,s),s--,ze(t))Pt(t.value,s,n);else if($e(t))for(let l=0;l<t.length;l++)Pt(t[l],s,n);else if(_o(t)||ls(t))t.forEach(l=>{Pt(l,s,n)});else if(xo(t)){for(const l in t)Pt(t[l],s,n);for(const l of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,l)&&Pt(t[l],s,n)}return t}function Us(t,s,n,l){try{return l?t(...l):t()}catch(o){mn(o,s,n)}}function bt(t,s,n,l){if(Ce(t)){const o=Us(t,s,n,l);return o&&$o(o)&&o.catch(i=>{mn(i,s,n)}),o}if($e(t)){const o=[];for(let i=0;i<t.length;i++)o.push(bt(t[i],s,n,l));return o}}function mn(t,s,n,l=!0){const o=s?s.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=s&&s.appContext.config||De;if(s){let r=s.parent;const u=s.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const v=r.ec;if(v){for(let p=0;p<v.length;p++)if(v[p](t,u,h)===!1)return}r=r.parent}if(i){It(),Us(i,null,10,[t,u,h]),Dt();return}}qa(t,n,o,l,a)}function qa(t,s,n,l=!0,o=!1){if(o)throw t;console.error(t)}const st=[];let _t=-1;const os=[];let Lt=null,ss=0;const Bo=Promise.resolve();let Qs=null;function Qt(t){const s=Qs||Bo;return t?s.then(this?t.bind(this):t):s}function Ba(t){let s=_t+1,n=st.length;for(;s<n;){const l=s+n>>>1,o=st[l],i=As(o);i<t||i===t&&o.flags&2?s=l+1:n=l}return s}function dl(t){if(!(t.flags&1)){const s=As(t),n=st[st.length-1];!n||!(t.flags&2)&&s>=As(n)?st.push(t):st.splice(Ba(s),0,t),t.flags|=1,Ho()}}function Ho(){Qs||(Qs=Bo.then(Wo))}function Ha(t){$e(t)?os.push(...t):Lt&&t.id===-1?Lt.splice(ss+1,0,t):t.flags&1||(os.push(t),t.flags|=1),Ho()}function Ol(t,s,n=_t+1){for(;n<st.length;n++){const l=st[n];if(l&&l.flags&2){if(t&&l.id!==t.uid)continue;st.splice(n,1),n--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function zo(t){if(os.length){const s=[...new Set(os)].sort((n,l)=>As(n)-As(l));if(os.length=0,Lt){Lt.push(...s);return}for(Lt=s,ss=0;ss<Lt.length;ss++){const n=Lt[ss];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Lt=null,ss=0}}const As=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Wo(t){try{for(_t=0;_t<st.length;_t++){const s=st[_t];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),Us(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;_t<st.length;_t++){const s=st[_t];s&&(s.flags&=-2)}_t=-1,st.length=0,zo(),Qs=null,(st.length||os.length)&&Wo()}}let He=null,Ko=null;function Ys(t){const s=He;return He=t,Ko=t&&t.type.__scopeId||null,s}function Oe(t,s=He,n){if(!s||t._n)return t;const l=(...o)=>{l._d&&sn(-1);const i=Ys(s);let a;try{a=t(...o)}finally{Ys(i),l._d&&sn(1)}return a};return l._n=!0,l._c=!0,l._d=!0,l}function ue(t,s){if(He===null)return t;const n=_n(He),l=t.dirs||(t.dirs=[]);for(let o=0;o<s.length;o++){let[i,a,r,u=De]=s[o];i&&(Ce(i)&&(i={mounted:i,updated:i}),i.deep&&Pt(a),l.push({dir:i,instance:n,value:a,oldValue:void 0,arg:r,modifiers:u}))}return t}function Ht(t,s,n,l){const o=t.dirs,i=s&&s.dirs;for(let a=0;a<o.length;a++){const r=o[a];i&&(r.oldValue=i[a].value);let u=r.dir[l];u&&(It(),bt(u,n,8,[t.el,r,t,s]),Dt())}}function za(t,s){if(Ge){let n=Ge.provides;const l=Ge.parent&&Ge.parent.provides;l===n&&(n=Ge.provides=Object.create(l)),n[t]=s}}function Hs(t,s,n=!1){const l=yn();if(l||as){let o=as?as._context.provides:l?l.parent==null||l.ce?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&Ce(s)?s.call(l&&l.proxy):s}}const Wa=Symbol.for("v-scx"),Ka=()=>Hs(Wa);function Ga(t,s){return ul(t,null,{flush:"sync"})}function Se(t,s,n){return ul(t,s,n)}function ul(t,s,n=De){const{immediate:l,deep:o,flush:i,once:a}=n,r=lt({},n),u=s&&l||!s&&i!=="post";let h;if(Is){if(i==="sync"){const m=Ka();h=m.__watcherHandles||(m.__watcherHandles=[])}else if(!u){const m=()=>{};return m.stop=kt,m.resume=kt,m.pause=kt,m}}const v=Ge;r.call=(m,y,L)=>bt(m,v,y,L);let p=!1;i==="post"?r.scheduler=m=>{tt(m,v&&v.suspense)}:i!=="sync"&&(p=!0,r.scheduler=(m,y)=>{y?m():dl(m)}),r.augmentJob=m=>{s&&(m.flags|=4),p&&(m.flags|=2,v&&(m.id=v.uid,m.i=v))};const f=Ra(t,s,r);return Is&&(h?h.push(f):u&&f()),f}function Xa(t,s,n){const l=this.proxy,o=Xe(t)?t.includes(".")?Go(l,t):()=>l[t]:t.bind(l,l);let i;Ce(s)?i=s:(i=s.handler,n=s);const a=Es(this),r=ul(o,i.bind(l),n);return a(),r}function Go(t,s){const n=s.split(".");return()=>{let l=t;for(let o=0;o<n.length&&l;o++)l=l[n[o]];return l}}const Xo=Symbol("_vte"),Jo=t=>t.__isTeleport,ks=t=>t&&(t.disabled||t.disabled===""),Pl=t=>t&&(t.defer||t.defer===""),Ml=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Il=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Bn=(t,s)=>{const n=t&&t.to;return Xe(n)?s?s(n):null:n},Qo={name:"Teleport",__isTeleport:!0,process(t,s,n,l,o,i,a,r,u,h){const{mc:v,pc:p,pbc:f,o:{insert:m,querySelector:y,createText:L,createComment:K}}=h,P=ks(s.props);let{shapeFlag:H,children:E,dynamicChildren:I}=s;if(t==null){const V=s.el=L(""),Q=s.anchor=L("");m(V,n,l),m(Q,n,l);const ee=(T,k)=>{H&16&&v(E,T,k,o,i,a,r,u)},B=()=>{const T=s.target=Bn(s.props,y),k=Yo(T,s,L,m);T&&(a!=="svg"&&Ml(T)?a="svg":a!=="mathml"&&Il(T)&&(a="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(T),P||(ee(T,k),zs(s,!1)))};P&&(ee(n,Q),zs(s,!0)),Pl(s.props)?(s.el.__isMounted=!1,tt(()=>{B(),delete s.el.__isMounted},i)):B()}else{if(Pl(s.props)&&t.el.__isMounted===!1){tt(()=>{Qo.process(t,s,n,l,o,i,a,r,u,h)},i);return}s.el=t.el,s.targetStart=t.targetStart;const V=s.anchor=t.anchor,Q=s.target=t.target,ee=s.targetAnchor=t.targetAnchor,B=ks(t.props),T=B?n:Q,k=B?V:ee;if(a==="svg"||Ml(Q)?a="svg":(a==="mathml"||Il(Q))&&(a="mathml"),I?(f(t.dynamicChildren,I,T,o,i,a,r),vl(t,s,!0)):u||p(t,s,T,k,o,i,a,r,!1),P)B?s.props&&t.props&&s.props.to!==t.props.to&&(s.props.to=t.props.to):Rs(s,n,V,h,1);else if((s.props&&s.props.to)!==(t.props&&t.props.to)){const _=s.target=Bn(s.props,y);_&&Rs(s,_,null,h,0)}else B&&Rs(s,Q,ee,h,1);zs(s,P)}},remove(t,s,n,{um:l,o:{remove:o}},i){const{shapeFlag:a,children:r,anchor:u,targetStart:h,targetAnchor:v,target:p,props:f}=t;if(p&&(o(h),o(v)),i&&o(u),a&16){const m=i||!ks(f);for(let y=0;y<r.length;y++){const L=r[y];l(L,s,n,m,!!L.dynamicChildren)}}},move:Rs,hydrate:Ja};function Rs(t,s,n,{o:{insert:l},m:o},i=2){i===0&&l(t.targetAnchor,s,n);const{el:a,anchor:r,shapeFlag:u,children:h,props:v}=t,p=i===2;if(p&&l(a,s,n),(!p||ks(v))&&u&16)for(let f=0;f<h.length;f++)o(h[f],s,n,2);p&&l(r,s,n)}function Ja(t,s,n,l,o,i,{o:{nextSibling:a,parentNode:r,querySelector:u,insert:h,createText:v}},p){function f(L,K,P,H){K.anchor=p(a(L),K,r(L),n,l,o,i),K.targetStart=P,K.targetAnchor=H}const m=s.target=Bn(s.props,u),y=ks(s.props);if(m){const L=m._lpa||m.firstChild;if(s.shapeFlag&16)if(y)f(t,s,L,L&&a(L));else{s.anchor=a(t);let K=L;for(;K;){if(K&&K.nodeType===8){if(K.data==="teleport start anchor")s.targetStart=K;else if(K.data==="teleport anchor"){s.targetAnchor=K,m._lpa=s.targetAnchor&&a(s.targetAnchor);break}}K=a(K)}s.targetAnchor||Yo(m,s,v,h),p(L&&a(L),s,m,n,l,o,i)}zs(s,y)}else y&&s.shapeFlag&16&&f(t,s,t,a(t));return s.anchor&&a(s.anchor)}const Ct=Qo;function zs(t,s){const n=t.ctx;if(n&&n.ut){let l,o;for(s?(l=t.el,o=t.anchor):(l=t.targetStart,o=t.targetAnchor);l&&l!==o;)l.nodeType===1&&l.setAttribute("data-v-owner",n.uid),l=l.nextSibling;n.ut()}}function Yo(t,s,n,l){const o=s.targetStart=n(""),i=s.targetAnchor=n("");return o[Xo]=i,t&&(l(o,t),l(i,t)),i}const At=Symbol("_leaveCb"),qs=Symbol("_enterCb");function Zo(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Re(()=>{t.isMounted=!0}),bn(()=>{t.isUnmounting=!0}),t}const ut=[Function,Array],ei={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ut,onEnter:ut,onAfterEnter:ut,onEnterCancelled:ut,onBeforeLeave:ut,onLeave:ut,onAfterLeave:ut,onLeaveCancelled:ut,onBeforeAppear:ut,onAppear:ut,onAfterAppear:ut,onAppearCancelled:ut},ti=t=>{const s=t.subTree;return s.component?ti(s.component):s},Qa={name:"BaseTransition",props:ei,setup(t,{slots:s}){const n=yn(),l=Zo();return()=>{const o=s.default&&fl(s.default(),!0);if(!o||!o.length)return;const i=si(o),a=Pe(t),{mode:r}=a;if(l.isLeaving)return On(i);const u=Dl(i);if(!u)return On(i);let h=Os(u,a,l,n,p=>h=p);u.type!==Ke&&Zt(u,h);let v=n.subTree&&Dl(n.subTree);if(v&&v.type!==Ke&&!Gt(v,u)&&ti(n).type!==Ke){let p=Os(v,a,l,n);if(Zt(v,p),r==="out-in"&&u.type!==Ke)return l.isLeaving=!0,p.afterLeave=()=>{l.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,v=void 0},On(i);r==="in-out"&&u.type!==Ke?p.delayLeave=(f,m,y)=>{const L=ni(l,v);L[String(v.key)]=v,f[At]=()=>{m(),f[At]=void 0,delete h.delayedLeave,v=void 0},h.delayedLeave=()=>{y(),delete h.delayedLeave,v=void 0}}:v=void 0}else v&&(v=void 0);return i}}};function si(t){let s=t[0];if(t.length>1){for(const n of t)if(n.type!==Ke){s=n;break}}return s}const Ya=Qa;function ni(t,s){const{leavingVNodes:n}=t;let l=n.get(s.type);return l||(l=Object.create(null),n.set(s.type,l)),l}function Os(t,s,n,l,o){const{appear:i,mode:a,persisted:r=!1,onBeforeEnter:u,onEnter:h,onAfterEnter:v,onEnterCancelled:p,onBeforeLeave:f,onLeave:m,onAfterLeave:y,onLeaveCancelled:L,onBeforeAppear:K,onAppear:P,onAfterAppear:H,onAppearCancelled:E}=s,I=String(t.key),V=ni(n,t),Q=(T,k)=>{T&&bt(T,l,9,k)},ee=(T,k)=>{const _=k[1];Q(T,k),$e(T)?T.every(D=>D.length<=1)&&_():T.length<=1&&_()},B={mode:a,persisted:r,beforeEnter(T){let k=u;if(!n.isMounted)if(i)k=K||u;else return;T[At]&&T[At](!0);const _=V[I];_&&Gt(t,_)&&_.el[At]&&_.el[At](),Q(k,[T])},enter(T){let k=h,_=v,D=p;if(!n.isMounted)if(i)k=P||h,_=H||v,D=E||p;else return;let q=!1;const M=T[qs]=Y=>{q||(q=!0,Y?Q(D,[T]):Q(_,[T]),B.delayedLeave&&B.delayedLeave(),T[qs]=void 0)};k?ee(k,[T,M]):M()},leave(T,k){const _=String(t.key);if(T[qs]&&T[qs](!0),n.isUnmounting)return k();Q(f,[T]);let D=!1;const q=T[At]=M=>{D||(D=!0,k(),M?Q(L,[T]):Q(y,[T]),T[At]=void 0,V[_]===t&&delete V[_])};V[_]=t,m?ee(m,[T,q]):q()},clone(T){const k=Os(T,s,n,l,o);return o&&o(k),k}};return B}function On(t){if(pn(t))return t=Rt(t),t.children=null,t}function Dl(t){if(!pn(t))return Jo(t.type)&&t.children?si(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:s,children:n}=t;if(n){if(s&16)return n[0];if(s&32&&Ce(n.default))return n.default()}}function Zt(t,s){t.shapeFlag&6&&t.component?(t.transition=s,Zt(t.component.subTree,s)):t.shapeFlag&128?(t.ssContent.transition=s.clone(t.ssContent),t.ssFallback.transition=s.clone(t.ssFallback)):t.transition=s}function fl(t,s=!1,n){let l=[],o=0;for(let i=0;i<t.length;i++){let a=t[i];const r=n==null?a.key:String(n)+String(a.key!=null?a.key:i);a.type===de?(a.patchFlag&128&&o++,l=l.concat(fl(a.children,s,r))):(s||a.type!==Ke)&&l.push(r!=null?Rt(a,{key:r}):a)}if(o>1)for(let i=0;i<l.length;i++)l[i].patchFlag=-2;return l}function li(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Zs=new WeakMap;function xs(t,s,n,l,o=!1){if($e(t)){t.forEach((y,L)=>xs(y,s&&($e(s)?s[L]:s),n,l,o));return}if(is(l)&&!o){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&xs(t,s,n,l.component.subTree);return}const i=l.shapeFlag&4?_n(l.component):l.el,a=o?null:i,{i:r,r:u}=t,h=s&&s.r,v=r.refs===De?r.refs={}:r.refs,p=r.setupState,f=Pe(p),m=p===De?ho:y=>je(f,y);if(h!=null&&h!==u){if(Ul(s),Xe(h))v[h]=null,m(h)&&(p[h]=null);else if(ze(h)){h.value=null;const y=s;y.k&&(v[y.k]=null)}}if(Ce(u))Us(u,r,12,[a,v]);else{const y=Xe(u),L=ze(u);if(y||L){const K=()=>{if(t.f){const P=y?m(u)?p[u]:v[u]:u.value;if(o)$e(P)&&sl(P,i);else if($e(P))P.includes(i)||P.push(i);else if(y)v[u]=[i],m(u)&&(p[u]=v[u]);else{const H=[i];u.value=H,t.k&&(v[t.k]=H)}}else y?(v[u]=a,m(u)&&(p[u]=a)):L&&(u.value=a,t.k&&(v[t.k]=a))};if(a){const P=()=>{K(),Zs.delete(t)};P.id=-1,Zs.set(t,P),tt(P,n)}else Ul(t),K()}}}function Ul(t){const s=Zs.get(t);s&&(s.flags|=8,Zs.delete(t))}dn().requestIdleCallback;dn().cancelIdleCallback;const is=t=>!!t.type.__asyncLoader,pn=t=>t.type.__isKeepAlive;function Za(t,s){oi(t,"a",s)}function er(t,s){oi(t,"da",s)}function oi(t,s,n=Ge){const l=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(vn(s,l,n),n){let o=n.parent;for(;o&&o.parent;)pn(o.parent.vnode)&&tr(l,s,n,o),o=o.parent}}function tr(t,s,n,l){const o=vn(s,t,l,!0);ps(()=>{sl(l[s],o)},n)}function vn(t,s,n=Ge,l=!1){if(n){const o=n[t]||(n[t]=[]),i=s.__weh||(s.__weh=(...a)=>{It();const r=Es(n),u=bt(s,n,t,a);return r(),Dt(),u});return l?o.unshift(i):o.push(i),i}}const jt=t=>(s,n=Ge)=>{(!Is||t==="sp")&&vn(t,(...l)=>s(...l),n)},sr=jt("bm"),Re=jt("m"),nr=jt("bu"),ii=jt("u"),bn=jt("bum"),ps=jt("um"),lr=jt("sp"),or=jt("rtg"),ir=jt("rtc");function ar(t,s=Ge){vn("ec",t,s)}const rr="directives",cr=Symbol.for("v-ndc");function dr(t){return ur(rr,t)}function ur(t,s,n=!0,l=!1){const o=He||Ge;if(o){const i=o.type,a=jl(o[t]||i[t],s)||jl(o.appContext[t],s);return!a&&l?i:a}}function jl(t,s){return t&&(t[s]||t[xt(s)]||t[wo(xt(s))])}function ve(t,s,n,l){let o;const i=n,a=$e(t);if(a||Xe(t)){const r=a&&Jt(t);let u=!1,h=!1;r&&(u=!ft(t),h=Ut(t),t=fn(t)),o=new Array(t.length);for(let v=0,p=t.length;v<p;v++)o[v]=s(u?h?rs(vt(t[v])):vt(t[v]):t[v],v,void 0,i)}else if(typeof t=="number"){o=new Array(t);for(let r=0;r<t;r++)o[r]=s(r+1,r,void 0,i)}else if(Ve(t))if(t[Symbol.iterator])o=Array.from(t,(r,u)=>s(r,u,void 0,i));else{const r=Object.keys(t);o=new Array(r.length);for(let u=0,h=r.length;u<h;u++){const v=r[u];o[u]=s(t[v],v,u,i)}}else o=[];return o}function Pn(t,s,n={},l,o){if(He.ce||He.parent&&is(He.parent)&&He.parent.ce){const h=Object.keys(n).length>0;return s!=="default"&&(n.name=s),c(),Ne(de,null,[pe("slot",n,l)],h?-2:64)}let i=t[s];i&&i._c&&(i._d=!1),c();const a=i&&ai(i(n)),r=n.key||a&&a.key,u=Ne(de,{key:(r&&!Bt(r)?r:`_${s}`)+(!a&&l?"_fb":"")},a||[],a&&t._===1?64:-2);return i&&i._c&&(i._d=!0),u}function ai(t){return t.some(s=>Ms(s)?!(s.type===Ke||s.type===de&&!ai(s.children)):!0)?t:null}const Hn=t=>t?Si(t)?_n(t):Hn(t.parent):null,ws=lt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Hn(t.parent),$root:t=>Hn(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ci(t),$forceUpdate:t=>t.f||(t.f=()=>{dl(t.update)}),$nextTick:t=>t.n||(t.n=Qt.bind(t.proxy)),$watch:t=>Xa.bind(t)}),Mn=(t,s)=>t!==De&&!t.__isScriptSetup&&je(t,s),fr={get({_:t},s){if(s==="__v_skip")return!0;const{ctx:n,setupState:l,data:o,props:i,accessCache:a,type:r,appContext:u}=t;if(s[0]!=="$"){const f=a[s];if(f!==void 0)switch(f){case 1:return l[s];case 2:return o[s];case 4:return n[s];case 3:return i[s]}else{if(Mn(l,s))return a[s]=1,l[s];if(o!==De&&je(o,s))return a[s]=2,o[s];if(je(i,s))return a[s]=3,i[s];if(n!==De&&je(n,s))return a[s]=4,n[s];zn&&(a[s]=0)}}const h=ws[s];let v,p;if(h)return s==="$attrs"&&We(t.attrs,"get",""),h(t);if((v=r.__cssModules)&&(v=v[s]))return v;if(n!==De&&je(n,s))return a[s]=4,n[s];if(p=u.config.globalProperties,je(p,s))return p[s]},set({_:t},s,n){const{data:l,setupState:o,ctx:i}=t;return Mn(o,s)?(o[s]=n,!0):l!==De&&je(l,s)?(l[s]=n,!0):je(t.props,s)||s[0]==="$"&&s.slice(1)in t?!1:(i[s]=n,!0)},has({_:{data:t,setupState:s,accessCache:n,ctx:l,appContext:o,props:i,type:a}},r){let u;return!!(n[r]||t!==De&&r[0]!=="$"&&je(t,r)||Mn(s,r)||je(i,r)||je(l,r)||je(ws,r)||je(o.config.globalProperties,r)||(u=a.__cssModules)&&u[r])},defineProperty(t,s,n){return n.get!=null?t._.accessCache[s]=0:je(n,"value")&&this.set(t,s,n.value,null),Reflect.defineProperty(t,s,n)}};function en(t){return $e(t)?t.reduce((s,n)=>(s[n]=null,s),{}):t}function js(t,s){return!t||!s?t||s:$e(t)&&$e(s)?t.concat(s):lt({},en(t),en(s))}let zn=!0;function mr(t){const s=ci(t),n=t.proxy,l=t.ctx;zn=!1,s.beforeCreate&&Fl(s.beforeCreate,t,"bc");const{data:o,computed:i,methods:a,watch:r,provide:u,inject:h,created:v,beforeMount:p,mounted:f,beforeUpdate:m,updated:y,activated:L,deactivated:K,beforeDestroy:P,beforeUnmount:H,destroyed:E,unmounted:I,render:V,renderTracked:Q,renderTriggered:ee,errorCaptured:B,serverPrefetch:T,expose:k,inheritAttrs:_,components:D,directives:q,filters:M}=s;if(h&&pr(h,l,null),a)for(const U in a){const O=a[U];Ce(O)&&(l[U]=O.bind(n))}if(o){const U=o.call(n,n);Ve(U)&&(t.data=Me(U))}if(zn=!0,i)for(const U in i){const O=i[U],$=Ce(O)?O.bind(n,n):Ce(O.get)?O.get.bind(n,n):kt,le=!Ce(O)&&Ce(O.set)?O.set.bind(n):kt,G=se({get:$,set:le});Object.defineProperty(l,U,{enumerable:!0,configurable:!0,get:()=>G.value,set:z=>G.value=z})}if(r)for(const U in r)ri(r[U],l,n,U);if(u){const U=Ce(u)?u.call(n):u;Reflect.ownKeys(U).forEach(O=>{za(O,U[O])})}v&&Fl(v,t,"c");function Z(U,O){$e(O)?O.forEach($=>U($.bind(n))):O&&U(O.bind(n))}if(Z(sr,p),Z(Re,f),Z(nr,m),Z(ii,y),Z(Za,L),Z(er,K),Z(ar,B),Z(ir,Q),Z(or,ee),Z(bn,H),Z(ps,I),Z(lr,T),$e(k))if(k.length){const U=t.exposed||(t.exposed={});k.forEach(O=>{Object.defineProperty(U,O,{get:()=>n[O],set:$=>n[O]=$,enumerable:!0})})}else t.exposed||(t.exposed={});V&&t.render===kt&&(t.render=V),_!=null&&(t.inheritAttrs=_),D&&(t.components=D),q&&(t.directives=q),T&&li(t)}function pr(t,s,n=kt){$e(t)&&(t=Wn(t));for(const l in t){const o=t[l];let i;Ve(o)?"default"in o?i=Hs(o.from||l,o.default,!0):i=Hs(o.from||l):i=Hs(o),ze(i)?Object.defineProperty(s,l,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):s[l]=i}}function Fl(t,s,n){bt($e(t)?t.map(l=>l.bind(s.proxy)):t.bind(s.proxy),s,n)}function ri(t,s,n,l){let o=l.includes(".")?Go(n,l):()=>n[l];if(Xe(t)){const i=s[t];Ce(i)&&Se(o,i)}else if(Ce(t))Se(o,t.bind(n));else if(Ve(t))if($e(t))t.forEach(i=>ri(i,s,n,l));else{const i=Ce(t.handler)?t.handler.bind(n):s[t.handler];Ce(i)&&Se(o,i,t)}}function ci(t){const s=t.type,{mixins:n,extends:l}=s,{mixins:o,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,r=i.get(s);let u;return r?u=r:!o.length&&!n&&!l?u=s:(u={},o.length&&o.forEach(h=>tn(u,h,a,!0)),tn(u,s,a)),Ve(s)&&i.set(s,u),u}function tn(t,s,n,l=!1){const{mixins:o,extends:i}=s;i&&tn(t,i,n,!0),o&&o.forEach(a=>tn(t,a,n,!0));for(const a in s)if(!(l&&a==="expose")){const r=vr[a]||n&&n[a];t[a]=r?r(t[a],s[a]):s[a]}return t}const vr={data:El,props:Vl,emits:Vl,methods:hs,computed:hs,beforeCreate:et,created:et,beforeMount:et,mounted:et,beforeUpdate:et,updated:et,beforeDestroy:et,beforeUnmount:et,destroyed:et,unmounted:et,activated:et,deactivated:et,errorCaptured:et,serverPrefetch:et,components:hs,directives:hs,watch:gr,provide:El,inject:br};function El(t,s){return s?t?function(){return lt(Ce(t)?t.call(this,this):t,Ce(s)?s.call(this,this):s)}:s:t}function br(t,s){return hs(Wn(t),Wn(s))}function Wn(t){if($e(t)){const s={};for(let n=0;n<t.length;n++)s[t[n]]=t[n];return s}return t}function et(t,s){return t?[...new Set([].concat(t,s))]:s}function hs(t,s){return t?lt(Object.create(null),t,s):s}function Vl(t,s){return t?$e(t)&&$e(s)?[...new Set([...t,...s])]:lt(Object.create(null),en(t),en(s??{})):s}function gr(t,s){if(!t)return s;if(!s)return t;const n=lt(Object.create(null),t);for(const l in s)n[l]=et(t[l],s[l]);return n}function di(){return{app:null,config:{isNativeTag:ho,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hr=0;function yr(t,s){return function(l,o=null){Ce(l)||(l=lt({},l)),o!=null&&!Ve(o)&&(o=null);const i=di(),a=new WeakSet,r=[];let u=!1;const h=i.app={_uid:hr++,_component:l,_props:o,_container:null,_context:i,_instance:null,version:Jr,get config(){return i.config},set config(v){},use(v,...p){return a.has(v)||(v&&Ce(v.install)?(a.add(v),v.install(h,...p)):Ce(v)&&(a.add(v),v(h,...p))),h},mixin(v){return i.mixins.includes(v)||i.mixins.push(v),h},component(v,p){return p?(i.components[v]=p,h):i.components[v]},directive(v,p){return p?(i.directives[v]=p,h):i.directives[v]},mount(v,p,f){if(!u){const m=h._ceVNode||pe(l,o);return m.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(m,v,f),u=!0,h._container=v,v.__vue_app__=h,_n(m.component)}},onUnmount(v){r.push(v)},unmount(){u&&(bt(r,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(v,p){return i.provides[v]=p,h},runWithContext(v){const p=as;as=h;try{return v()}finally{as=p}}};return h}}let as=null;function cs(t,s,n=De){const l=yn(),o=xt(s),i=ms(s),a=ui(t,o),r=Ea((u,h)=>{let v,p=De,f;return Ga(()=>{const m=t[o];it(v,m)&&(v=m,h())}),{get(){return u(),n.get?n.get(v):v},set(m){const y=n.set?n.set(m):m;if(!it(y,v)&&!(p!==De&&it(m,p)))return;const L=l.vnode.props;L&&(s in L||o in L||i in L)&&(`onUpdate:${s}`in L||`onUpdate:${o}`in L||`onUpdate:${i}`in L)||(v=m,h()),l.emit(`update:${s}`,y),it(m,y)&&it(m,p)&&!it(y,f)&&h(),p=m,f=y}}});return r[Symbol.iterator]=()=>{let u=0;return{next(){return u<2?{value:u++?a||De:r,done:!1}:{done:!0}}}},r}const ui=(t,s)=>s==="modelValue"||s==="model-value"?t.modelModifiers:t[`${s}Modifiers`]||t[`${xt(s)}Modifiers`]||t[`${ms(s)}Modifiers`];function _r(t,s,...n){if(t.isUnmounted)return;const l=t.vnode.props||De;let o=n;const i=s.startsWith("update:"),a=i&&ui(l,s.slice(7));a&&(a.trim&&(o=n.map(v=>Xe(v)?v.trim():v)),a.number&&(o=n.map(ia)));let r,u=l[r=xn(s)]||l[r=xn(xt(s))];!u&&i&&(u=l[r=xn(ms(s))]),u&&bt(u,t,6,o);const h=l[r+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[r])return;t.emitted[r]=!0,bt(h,t,6,o)}}const $r=new WeakMap;function fi(t,s,n=!1){const l=n?$r:s.emitsCache,o=l.get(t);if(o!==void 0)return o;const i=t.emits;let a={},r=!1;if(!Ce(t)){const u=h=>{const v=fi(h,s,!0);v&&(r=!0,lt(a,v))};!n&&s.mixins.length&&s.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!r?(Ve(t)&&l.set(t,null),null):($e(i)?i.forEach(u=>a[u]=null):lt(a,i),Ve(t)&&l.set(t,a),a)}function gn(t,s){return!t||!tl(s)?!1:(s=s.slice(2).replace(/Once$/,""),je(t,s[0].toLowerCase()+s.slice(1))||je(t,ms(s))||je(t,s))}function Ll(t){const{type:s,vnode:n,proxy:l,withProxy:o,propsOptions:[i],slots:a,attrs:r,emit:u,render:h,renderCache:v,props:p,data:f,setupState:m,ctx:y,inheritAttrs:L}=t,K=Ys(t);let P,H;try{if(n.shapeFlag&4){const I=o||l,V=I;P=$t(h.call(V,I,v,p,m,f,y)),H=r}else{const I=s;P=$t(I.length>1?I(p,{attrs:r,slots:a,emit:u}):I(p,null)),H=s.props?r:kr(r)}}catch(I){Cs.length=0,mn(I,t,1),P=pe(Ke)}let E=P;if(H&&L!==!1){const I=Object.keys(H),{shapeFlag:V}=E;I.length&&V&7&&(i&&I.some(yo)&&(H=xr(H,i)),E=Rt(E,H,!1,!0))}return n.dirs&&(E=Rt(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&Zt(E,n.transition),P=E,Ys(K),P}const kr=t=>{let s;for(const n in t)(n==="class"||n==="style"||tl(n))&&((s||(s={}))[n]=t[n]);return s},xr=(t,s)=>{const n={};for(const l in t)(!yo(l)||!(l.slice(9)in s))&&(n[l]=t[l]);return n};function wr(t,s,n){const{props:l,children:o,component:i}=t,{props:a,children:r,patchFlag:u}=s,h=i.emitsOptions;if(s.dirs||s.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return l?Nl(l,a,h):!!a;if(u&8){const v=s.dynamicProps;for(let p=0;p<v.length;p++){const f=v[p];if(a[f]!==l[f]&&!gn(h,f))return!0}}}else return(o||r)&&(!r||!r.$stable)?!0:l===a?!1:l?a?Nl(l,a,h):!0:!!a;return!1}function Nl(t,s,n){const l=Object.keys(s);if(l.length!==Object.keys(t).length)return!0;for(let o=0;o<l.length;o++){const i=l[o];if(s[i]!==t[i]&&!gn(n,i))return!0}return!1}function Cr({vnode:t,parent:s},n){for(;s;){const l=s.subTree;if(l.suspense&&l.suspense.activeBranch===t&&(l.el=t.el),l===t)(t=s.vnode).el=n,s=s.parent;else break}}const mi={},pi=()=>Object.create(mi),vi=t=>Object.getPrototypeOf(t)===mi;function Sr(t,s,n,l=!1){const o={},i=pi();t.propsDefaults=Object.create(null),bi(t,s,o,i);for(const a in t.propsOptions[0])a in o||(o[a]=void 0);n?t.props=l?o:Ma(o):t.type.props?t.props=o:t.props=i,t.attrs=i}function Tr(t,s,n,l){const{props:o,attrs:i,vnode:{patchFlag:a}}=t,r=Pe(o),[u]=t.propsOptions;let h=!1;if((l||a>0)&&!(a&16)){if(a&8){const v=t.vnode.dynamicProps;for(let p=0;p<v.length;p++){let f=v[p];if(gn(t.emitsOptions,f))continue;const m=s[f];if(u)if(je(i,f))m!==i[f]&&(i[f]=m,h=!0);else{const y=xt(f);o[y]=Kn(u,r,y,m,t,!1)}else m!==i[f]&&(i[f]=m,h=!0)}}}else{bi(t,s,o,i)&&(h=!0);let v;for(const p in r)(!s||!je(s,p)&&((v=ms(p))===p||!je(s,v)))&&(u?n&&(n[p]!==void 0||n[v]!==void 0)&&(o[p]=Kn(u,r,p,void 0,t,!0)):delete o[p]);if(i!==r)for(const p in i)(!s||!je(s,p))&&(delete i[p],h=!0)}h&&Ot(t.attrs,"set","")}function bi(t,s,n,l){const[o,i]=t.propsOptions;let a=!1,r;if(s)for(let u in s){if(ys(u))continue;const h=s[u];let v;o&&je(o,v=xt(u))?!i||!i.includes(v)?n[v]=h:(r||(r={}))[v]=h:gn(t.emitsOptions,u)||(!(u in l)||h!==l[u])&&(l[u]=h,a=!0)}if(i){const u=Pe(n),h=r||De;for(let v=0;v<i.length;v++){const p=i[v];n[p]=Kn(o,u,p,h[p],t,!je(h,p))}}return a}function Kn(t,s,n,l,o,i){const a=t[n];if(a!=null){const r=je(a,"default");if(r&&l===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&Ce(u)){const{propsDefaults:h}=o;if(n in h)l=h[n];else{const v=Es(o);l=h[n]=u.call(null,s),v()}}else l=u;o.ce&&o.ce._setProp(n,l)}a[0]&&(i&&!r?l=!1:a[1]&&(l===""||l===ms(n))&&(l=!0))}return l}const Ar=new WeakMap;function gi(t,s,n=!1){const l=n?Ar:s.propsCache,o=l.get(t);if(o)return o;const i=t.props,a={},r=[];let u=!1;if(!Ce(t)){const v=p=>{u=!0;const[f,m]=gi(p,s,!0);lt(a,f),m&&r.push(...m)};!n&&s.mixins.length&&s.mixins.forEach(v),t.extends&&v(t.extends),t.mixins&&t.mixins.forEach(v)}if(!i&&!u)return Ve(t)&&l.set(t,ns),ns;if($e(i))for(let v=0;v<i.length;v++){const p=xt(i[v]);Rl(p)&&(a[p]=De)}else if(i)for(const v in i){const p=xt(v);if(Rl(p)){const f=i[v],m=a[p]=$e(f)||Ce(f)?{type:f}:lt({},f),y=m.type;let L=!1,K=!0;if($e(y))for(let P=0;P<y.length;++P){const H=y[P],E=Ce(H)&&H.name;if(E==="Boolean"){L=!0;break}else E==="String"&&(K=!1)}else L=Ce(y)&&y.name==="Boolean";m[0]=L,m[1]=K,(L||je(m,"default"))&&r.push(p)}}const h=[a,r];return Ve(t)&&l.set(t,h),h}function Rl(t){return t[0]!=="$"&&!ys(t)}const ml=t=>t==="_"||t==="_ctx"||t==="$stable",pl=t=>$e(t)?t.map($t):[$t(t)],Or=(t,s,n)=>{if(s._n)return s;const l=Oe((...o)=>pl(s(...o)),n);return l._c=!1,l},hi=(t,s,n)=>{const l=t._ctx;for(const o in t){if(ml(o))continue;const i=t[o];if(Ce(i))s[o]=Or(o,i,l);else if(i!=null){const a=pl(i);s[o]=()=>a}}},yi=(t,s)=>{const n=pl(s);t.slots.default=()=>n},_i=(t,s,n)=>{for(const l in s)(n||!ml(l))&&(t[l]=s[l])},Pr=(t,s,n)=>{const l=t.slots=pi();if(t.vnode.shapeFlag&32){const o=s._;o?(_i(l,s,n),n&&Co(l,"_",o,!0)):hi(s,l)}else s&&yi(t,s)},Mr=(t,s,n)=>{const{vnode:l,slots:o}=t;let i=!0,a=De;if(l.shapeFlag&32){const r=s._;r?n&&r===1?i=!1:_i(o,s,n):(i=!s.$stable,hi(s,o)),a=s}else s&&(yi(t,s),a={default:1});if(i)for(const r in o)!ml(r)&&a[r]==null&&delete o[r]},tt=Fr;function Ir(t){return Dr(t)}function Dr(t,s){const n=dn();n.__VUE__=!0;const{insert:l,remove:o,patchProp:i,createElement:a,createText:r,createComment:u,setText:h,setElementText:v,parentNode:p,nextSibling:f,setScopeId:m=kt,insertStaticContent:y}=t,L=(b,w,J,j=null,C=null,N=null,re=void 0,oe=null,x=!!w.dynamicChildren)=>{if(b===w)return;b&&!Gt(b,w)&&(j=me(b),z(b,C,N,!0),b=null),w.patchFlag===-2&&(x=!1,w.dynamicChildren=null);const{type:R,ref:ne,shapeFlag:ae}=w;switch(R){case hn:K(b,w,J,j);break;case Ke:P(b,w,J,j);break;case Ws:b==null&&H(w,J,j,re);break;case de:D(b,w,J,j,C,N,re,oe,x);break;default:ae&1?V(b,w,J,j,C,N,re,oe,x):ae&6?q(b,w,J,j,C,N,re,oe,x):(ae&64||ae&128)&&R.process(b,w,J,j,C,N,re,oe,x,ie)}ne!=null&&C?xs(ne,b&&b.ref,N,w||b,!w):ne==null&&b&&b.ref!=null&&xs(b.ref,null,N,b,!0)},K=(b,w,J,j)=>{if(b==null)l(w.el=r(w.children),J,j);else{const C=w.el=b.el;w.children!==b.children&&h(C,w.children)}},P=(b,w,J,j)=>{b==null?l(w.el=u(w.children||""),J,j):w.el=b.el},H=(b,w,J,j)=>{[b.el,b.anchor]=y(b.children,w,J,j,b.el,b.anchor)},E=({el:b,anchor:w},J,j)=>{let C;for(;b&&b!==w;)C=f(b),l(b,J,j),b=C;l(w,J,j)},I=({el:b,anchor:w})=>{let J;for(;b&&b!==w;)J=f(b),o(b),b=J;o(w)},V=(b,w,J,j,C,N,re,oe,x)=>{if(w.type==="svg"?re="svg":w.type==="math"&&(re="mathml"),b==null)Q(w,J,j,C,N,re,oe,x);else{const R=b.el&&b.el._isVueCE?b.el:null;try{R&&R._beginPatch(),T(b,w,C,N,re,oe,x)}finally{R&&R._endPatch()}}},Q=(b,w,J,j,C,N,re,oe)=>{let x,R;const{props:ne,shapeFlag:ae,transition:ce,dirs:ye}=b;if(x=b.el=a(b.type,N,ne&&ne.is,ne),ae&8?v(x,b.children):ae&16&&B(b.children,x,null,j,C,In(b,N),re,oe),ye&&Ht(b,null,j,"created"),ee(x,b,b.scopeId,re,j),ne){for(const Ie in ne)Ie!=="value"&&!ys(Ie)&&i(x,Ie,null,ne[Ie],N,j);"value"in ne&&i(x,"value",null,ne.value,N),(R=ne.onVnodeBeforeMount)&&ht(R,j,b)}ye&&Ht(b,null,j,"beforeMount");const ke=Ur(C,ce);ke&&ce.beforeEnter(x),l(x,w,J),((R=ne&&ne.onVnodeMounted)||ke||ye)&&tt(()=>{R&&ht(R,j,b),ke&&ce.enter(x),ye&&Ht(b,null,j,"mounted")},C)},ee=(b,w,J,j,C)=>{if(J&&m(b,J),j)for(let N=0;N<j.length;N++)m(b,j[N]);if(C){let N=C.subTree;if(w===N||xi(N.type)&&(N.ssContent===w||N.ssFallback===w)){const re=C.vnode;ee(b,re,re.scopeId,re.slotScopeIds,C.parent)}}},B=(b,w,J,j,C,N,re,oe,x=0)=>{for(let R=x;R<b.length;R++){const ne=b[R]=oe?Nt(b[R]):$t(b[R]);L(null,ne,w,J,j,C,N,re,oe)}},T=(b,w,J,j,C,N,re)=>{const oe=w.el=b.el;let{patchFlag:x,dynamicChildren:R,dirs:ne}=w;x|=b.patchFlag&16;const ae=b.props||De,ce=w.props||De;let ye;if(J&&zt(J,!1),(ye=ce.onVnodeBeforeUpdate)&&ht(ye,J,w,b),ne&&Ht(w,b,J,"beforeUpdate"),J&&zt(J,!0),(ae.innerHTML&&ce.innerHTML==null||ae.textContent&&ce.textContent==null)&&v(oe,""),R?k(b.dynamicChildren,R,oe,J,j,In(w,C),N):re||O(b,w,oe,null,J,j,In(w,C),N,!1),x>0){if(x&16)_(oe,ae,ce,J,C);else if(x&2&&ae.class!==ce.class&&i(oe,"class",null,ce.class,C),x&4&&i(oe,"style",ae.style,ce.style,C),x&8){const ke=w.dynamicProps;for(let Ie=0;Ie<ke.length;Ie++){const Ue=ke[Ie],Qe=ae[Ue],Ye=ce[Ue];(Ye!==Qe||Ue==="value")&&i(oe,Ue,Qe,Ye,C,J)}}x&1&&b.children!==w.children&&v(oe,w.children)}else!re&&R==null&&_(oe,ae,ce,J,C);((ye=ce.onVnodeUpdated)||ne)&&tt(()=>{ye&&ht(ye,J,w,b),ne&&Ht(w,b,J,"updated")},j)},k=(b,w,J,j,C,N,re)=>{for(let oe=0;oe<w.length;oe++){const x=b[oe],R=w[oe],ne=x.el&&(x.type===de||!Gt(x,R)||x.shapeFlag&198)?p(x.el):J;L(x,R,ne,null,j,C,N,re,!0)}},_=(b,w,J,j,C)=>{if(w!==J){if(w!==De)for(const N in w)!ys(N)&&!(N in J)&&i(b,N,w[N],null,C,j);for(const N in J){if(ys(N))continue;const re=J[N],oe=w[N];re!==oe&&N!=="value"&&i(b,N,oe,re,C,j)}"value"in J&&i(b,"value",w.value,J.value,C)}},D=(b,w,J,j,C,N,re,oe,x)=>{const R=w.el=b?b.el:r(""),ne=w.anchor=b?b.anchor:r("");let{patchFlag:ae,dynamicChildren:ce,slotScopeIds:ye}=w;ye&&(oe=oe?oe.concat(ye):ye),b==null?(l(R,J,j),l(ne,J,j),B(w.children||[],J,ne,C,N,re,oe,x)):ae>0&&ae&64&&ce&&b.dynamicChildren&&b.dynamicChildren.length===ce.length?(k(b.dynamicChildren,ce,J,C,N,re,oe),(w.key!=null||C&&w===C.subTree)&&vl(b,w,!0)):O(b,w,J,ne,C,N,re,oe,x)},q=(b,w,J,j,C,N,re,oe,x)=>{w.slotScopeIds=oe,b==null?w.shapeFlag&512?C.ctx.activate(w,J,j,re,x):M(w,J,j,C,N,re,x):Y(b,w,x)},M=(b,w,J,j,C,N,re)=>{const oe=b.component=Br(b,j,C);if(pn(b)&&(oe.ctx.renderer=ie),Hr(oe,!1,re),oe.asyncDep){if(C&&C.registerDep(oe,Z,re),!b.el){const x=oe.subTree=pe(Ke);P(null,x,w,J),b.placeholder=x.el}}else Z(oe,b,w,J,C,N,re)},Y=(b,w,J)=>{const j=w.component=b.component;if(wr(b,w,J))if(j.asyncDep&&!j.asyncResolved){U(j,w,J);return}else j.next=w,j.update();else w.el=b.el,j.vnode=w},Z=(b,w,J,j,C,N,re)=>{const oe=()=>{if(b.isMounted){let{next:ae,bu:ce,u:ye,parent:ke,vnode:Ie}=b;{const dt=$i(b);if(dt){ae&&(ae.el=Ie.el,U(b,ae,re)),dt.asyncDep.then(()=>{b.isUnmounted||oe()});return}}let Ue=ae,Qe;zt(b,!1),ae?(ae.el=Ie.el,U(b,ae,re)):ae=Ie,ce&&wn(ce),(Qe=ae.props&&ae.props.onVnodeBeforeUpdate)&&ht(Qe,ke,ae,Ie),zt(b,!0);const Ye=Ll(b),at=b.subTree;b.subTree=Ye,L(at,Ye,p(at.el),me(at),b,C,N),ae.el=Ye.el,Ue===null&&Cr(b,Ye.el),ye&&tt(ye,C),(Qe=ae.props&&ae.props.onVnodeUpdated)&&tt(()=>ht(Qe,ke,ae,Ie),C)}else{let ae;const{el:ce,props:ye}=w,{bm:ke,m:Ie,parent:Ue,root:Qe,type:Ye}=b,at=is(w);zt(b,!1),ke&&wn(ke),!at&&(ae=ye&&ye.onVnodeBeforeMount)&&ht(ae,Ue,w),zt(b,!0);{Qe.ce&&Qe.ce._def.shadowRoot!==!1&&Qe.ce._injectChildStyle(Ye);const dt=b.subTree=Ll(b);L(null,dt,J,j,b,C,N),w.el=dt.el}if(Ie&&tt(Ie,C),!at&&(ae=ye&&ye.onVnodeMounted)){const dt=w;tt(()=>ht(ae,Ue,dt),C)}(w.shapeFlag&256||Ue&&is(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&b.a&&tt(b.a,C),b.isMounted=!0,w=J=j=null}};b.scope.on();const x=b.effect=new Ao(oe);b.scope.off();const R=b.update=x.run.bind(x),ne=b.job=x.runIfDirty.bind(x);ne.i=b,ne.id=b.uid,x.scheduler=()=>dl(ne),zt(b,!0),R()},U=(b,w,J)=>{w.component=b;const j=b.vnode.props;b.vnode=w,b.next=null,Tr(b,w.props,j,J),Mr(b,w.children,J),It(),Ol(b),Dt()},O=(b,w,J,j,C,N,re,oe,x=!1)=>{const R=b&&b.children,ne=b?b.shapeFlag:0,ae=w.children,{patchFlag:ce,shapeFlag:ye}=w;if(ce>0){if(ce&128){le(R,ae,J,j,C,N,re,oe,x);return}else if(ce&256){$(R,ae,J,j,C,N,re,oe,x);return}}ye&8?(ne&16&&Be(R,C,N),ae!==R&&v(J,ae)):ne&16?ye&16?le(R,ae,J,j,C,N,re,oe,x):Be(R,C,N,!0):(ne&8&&v(J,""),ye&16&&B(ae,J,j,C,N,re,oe,x))},$=(b,w,J,j,C,N,re,oe,x)=>{b=b||ns,w=w||ns;const R=b.length,ne=w.length,ae=Math.min(R,ne);let ce;for(ce=0;ce<ae;ce++){const ye=w[ce]=x?Nt(w[ce]):$t(w[ce]);L(b[ce],ye,J,null,C,N,re,oe,x)}R>ne?Be(b,C,N,!0,!1,ae):B(w,J,j,C,N,re,oe,x,ae)},le=(b,w,J,j,C,N,re,oe,x)=>{let R=0;const ne=w.length;let ae=b.length-1,ce=ne-1;for(;R<=ae&&R<=ce;){const ye=b[R],ke=w[R]=x?Nt(w[R]):$t(w[R]);if(Gt(ye,ke))L(ye,ke,J,null,C,N,re,oe,x);else break;R++}for(;R<=ae&&R<=ce;){const ye=b[ae],ke=w[ce]=x?Nt(w[ce]):$t(w[ce]);if(Gt(ye,ke))L(ye,ke,J,null,C,N,re,oe,x);else break;ae--,ce--}if(R>ae){if(R<=ce){const ye=ce+1,ke=ye<ne?w[ye].el:j;for(;R<=ce;)L(null,w[R]=x?Nt(w[R]):$t(w[R]),J,ke,C,N,re,oe,x),R++}}else if(R>ce)for(;R<=ae;)z(b[R],C,N,!0),R++;else{const ye=R,ke=R,Ie=new Map;for(R=ke;R<=ce;R++){const rt=w[R]=x?Nt(w[R]):$t(w[R]);rt.key!=null&&Ie.set(rt.key,R)}let Ue,Qe=0;const Ye=ce-ke+1;let at=!1,dt=0;const Ze=new Array(Ye);for(R=0;R<Ye;R++)Ze[R]=0;for(R=ye;R<=ae;R++){const rt=b[R];if(Qe>=Ye){z(rt,C,N,!0);continue}let gt;if(rt.key!=null)gt=Ie.get(rt.key);else for(Ue=ke;Ue<=ce;Ue++)if(Ze[Ue-ke]===0&&Gt(rt,w[Ue])){gt=Ue;break}gt===void 0?z(rt,C,N,!0):(Ze[gt-ke]=R+1,gt>=dt?dt=gt:at=!0,L(rt,w[gt],J,null,C,N,re,oe,x),Qe++)}const xl=at?jr(Ze):ns;for(Ue=xl.length-1,R=Ye-1;R>=0;R--){const rt=ke+R,gt=w[rt],wl=w[rt+1],Cl=rt+1<ne?wl.el||ki(wl):j;Ze[R]===0?L(null,gt,J,Cl,C,N,re,oe,x):at&&(Ue<0||R!==xl[Ue]?G(gt,J,Cl,2):Ue--)}}},G=(b,w,J,j,C=null)=>{const{el:N,type:re,transition:oe,children:x,shapeFlag:R}=b;if(R&6){G(b.component.subTree,w,J,j);return}if(R&128){b.suspense.move(w,J,j);return}if(R&64){re.move(b,w,J,ie);return}if(re===de){l(N,w,J);for(let ae=0;ae<x.length;ae++)G(x[ae],w,J,j);l(b.anchor,w,J);return}if(re===Ws){E(b,w,J);return}if(j!==2&&R&1&&oe)if(j===0)oe.beforeEnter(N),l(N,w,J),tt(()=>oe.enter(N),C);else{const{leave:ae,delayLeave:ce,afterLeave:ye}=oe,ke=()=>{b.ctx.isUnmounted?o(N):l(N,w,J)},Ie=()=>{N._isLeaving&&N[At](!0),ae(N,()=>{ke(),ye&&ye()})};ce?ce(N,ke,Ie):Ie()}else l(N,w,J)},z=(b,w,J,j=!1,C=!1)=>{const{type:N,props:re,ref:oe,children:x,dynamicChildren:R,shapeFlag:ne,patchFlag:ae,dirs:ce,cacheIndex:ye}=b;if(ae===-2&&(C=!1),oe!=null&&(It(),xs(oe,null,J,b,!0),Dt()),ye!=null&&(w.renderCache[ye]=void 0),ne&256){w.ctx.deactivate(b);return}const ke=ne&1&&ce,Ie=!is(b);let Ue;if(Ie&&(Ue=re&&re.onVnodeBeforeUnmount)&&ht(Ue,w,b),ne&6)qe(b.component,J,j);else{if(ne&128){b.suspense.unmount(J,j);return}ke&&Ht(b,null,w,"beforeUnmount"),ne&64?b.type.remove(b,w,J,ie,j):R&&!R.hasOnce&&(N!==de||ae>0&&ae&64)?Be(R,w,J,!1,!0):(N===de&&ae&384||!C&&ne&16)&&Be(x,w,J),j&&fe(b)}(Ie&&(Ue=re&&re.onVnodeUnmounted)||ke)&&tt(()=>{Ue&&ht(Ue,w,b),ke&&Ht(b,null,w,"unmounted")},J)},fe=b=>{const{type:w,el:J,anchor:j,transition:C}=b;if(w===de){Le(J,j);return}if(w===Ws){I(b);return}const N=()=>{o(J),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(b.shapeFlag&1&&C&&!C.persisted){const{leave:re,delayLeave:oe}=C,x=()=>re(J,N);oe?oe(b.el,N,x):x()}else N()},Le=(b,w)=>{let J;for(;b!==w;)J=f(b),o(b),b=J;o(w)},qe=(b,w,J)=>{const{bum:j,scope:C,job:N,subTree:re,um:oe,m:x,a:R}=b;ql(x),ql(R),j&&wn(j),C.stop(),N&&(N.flags|=8,z(re,b,w,J)),oe&&tt(oe,w),tt(()=>{b.isUnmounted=!0},w)},Be=(b,w,J,j=!1,C=!1,N=0)=>{for(let re=N;re<b.length;re++)z(b[re],w,J,j,C)},me=b=>{if(b.shapeFlag&6)return me(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const w=f(b.anchor||b.el),J=w&&w[Xo];return J?f(J):w};let X=!1;const be=(b,w,J)=>{let j;b==null?w._vnode&&(z(w._vnode,null,null,!0),j=w._vnode.component):L(w._vnode||null,b,w,null,null,null,J),w._vnode=b,X||(X=!0,Ol(j),zo(),X=!1)},ie={p:L,um:z,m:G,r:fe,mt:M,mc:B,pc:O,pbc:k,n:me,o:t};return{render:be,hydrate:void 0,createApp:yr(be)}}function In({type:t,props:s},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:n}function zt({effect:t,job:s},n){n?(t.flags|=32,s.flags|=4):(t.flags&=-33,s.flags&=-5)}function Ur(t,s){return(!t||t&&!t.pendingBranch)&&s&&!s.persisted}function vl(t,s,n=!1){const l=t.children,o=s.children;if($e(l)&&$e(o))for(let i=0;i<l.length;i++){const a=l[i];let r=o[i];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=o[i]=Nt(o[i]),r.el=a.el),!n&&r.patchFlag!==-2&&vl(a,r)),r.type===hn&&(r.patchFlag!==-1?r.el=a.el:r.__elIndex=i+(t.type===de?1:0)),r.type===Ke&&!r.el&&(r.el=a.el)}}function jr(t){const s=t.slice(),n=[0];let l,o,i,a,r;const u=t.length;for(l=0;l<u;l++){const h=t[l];if(h!==0){if(o=n[n.length-1],t[o]<h){s[l]=o,n.push(l);continue}for(i=0,a=n.length-1;i<a;)r=i+a>>1,t[n[r]]<h?i=r+1:a=r;h<t[n[i]]&&(i>0&&(s[l]=n[i-1]),n[i]=l)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=s[a];return n}function $i(t){const s=t.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:$i(s)}function ql(t){if(t)for(let s=0;s<t.length;s++)t[s].flags|=8}function ki(t){if(t.placeholder)return t.placeholder;const s=t.component;return s?ki(s.subTree):null}const xi=t=>t.__isSuspense;function Fr(t,s){s&&s.pendingBranch?$e(t)?s.effects.push(...t):s.effects.push(t):Ha(t)}const de=Symbol.for("v-fgt"),hn=Symbol.for("v-txt"),Ke=Symbol.for("v-cmt"),Ws=Symbol.for("v-stc"),Cs=[];let ct=null;function c(t=!1){Cs.push(ct=t?null:[])}function Er(){Cs.pop(),ct=Cs[Cs.length-1]||null}let Ps=1;function sn(t,s=!1){Ps+=t,t<0&&ct&&s&&(ct.hasOnce=!0)}function wi(t){return t.dynamicChildren=Ps>0?ct||ns:null,Er(),Ps>0&&ct&&ct.push(t),t}function d(t,s,n,l,o,i){return wi(e(t,s,n,l,o,i,!0))}function Ne(t,s,n,l,o){return wi(pe(t,s,n,l,o,!0))}function Ms(t){return t?t.__v_isVNode===!0:!1}function Gt(t,s){return t.type===s.type&&t.key===s.key}const Ci=({key:t})=>t??null,Ks=({ref:t,ref_key:s,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Xe(t)||ze(t)||Ce(t)?{i:He,r:t,k:s,f:!!n}:t:null);function e(t,s=null,n=null,l=0,o=null,i=t===de?0:1,a=!1,r=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:s,key:s&&Ci(s),ref:s&&Ks(s),scopeId:Ko,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:l,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:He};return r?(bl(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=Xe(n)?8:16),Ps>0&&!a&&ct&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&ct.push(u),u}const pe=Vr;function Vr(t,s=null,n=null,l=0,o=null,i=!1){if((!t||t===cr)&&(t=Ke),Ms(t)){const r=Rt(t,s,!0);return n&&bl(r,n),Ps>0&&!i&&ct&&(r.shapeFlag&6?ct[ct.indexOf(t)]=r:ct.push(r)),r.patchFlag=-2,r}if(Gr(t)&&(t=t.__vccOpts),s){s=Lr(s);let{class:r,style:u}=s;r&&!Xe(r)&&(s.class=W(r)),Ve(u)&&(cl(u)&&!$e(u)&&(u=lt({},u)),s.style=Te(u))}const a=Xe(t)?1:xi(t)?128:Jo(t)?64:Ve(t)?4:Ce(t)?2:0;return e(t,s,n,l,o,a,i,!0)}function Lr(t){return t?cl(t)||vi(t)?lt({},t):t:null}function Rt(t,s,n=!1,l=!1){const{props:o,ref:i,patchFlag:a,children:r,transition:u}=t,h=s?Nr(o||{},s):o,v={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Ci(h),ref:s&&s.ref?n&&i?$e(i)?i.concat(Ks(s)):[i,Ks(s)]:Ks(s):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:r,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:s&&t.type!==de?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Rt(t.ssContent),ssFallback:t.ssFallback&&Rt(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&l&&Zt(v,u.clone(v)),v}function te(t=" ",s=0){return pe(hn,null,t,s)}function Fs(t,s){const n=pe(Ws,null,t);return n.staticCount=s,n}function F(t="",s=!1){return s?(c(),Ne(Ke,null,t)):pe(Ke,null,t)}function $t(t){return t==null||typeof t=="boolean"?pe(Ke):$e(t)?pe(de,null,t.slice()):Ms(t)?Nt(t):pe(hn,null,String(t))}function Nt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Rt(t)}function bl(t,s){let n=0;const{shapeFlag:l}=t;if(s==null)s=null;else if($e(s))n=16;else if(typeof s=="object")if(l&65){const o=s.default;o&&(o._c&&(o._d=!1),bl(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=s._;!o&&!vi(s)?s._ctx=He:o===3&&He&&(He.slots._===1?s._=1:(s._=2,t.patchFlag|=1024))}else Ce(s)?(s={default:s,_ctx:He},n=32):(s=String(s),l&64?(n=16,s=[te(s)]):n=8);t.children=s,t.shapeFlag|=n}function Nr(...t){const s={};for(let n=0;n<t.length;n++){const l=t[n];for(const o in l)if(o==="class")s.class!==l.class&&(s.class=W([s.class,l.class]));else if(o==="style")s.style=Te([s.style,l.style]);else if(tl(o)){const i=s[o],a=l[o];a&&i!==a&&!($e(i)&&i.includes(a))&&(s[o]=i?[].concat(i,a):a)}else o!==""&&(s[o]=l[o])}return s}function ht(t,s,n,l=null){bt(t,s,7,[n,l])}const Rr=di();let qr=0;function Br(t,s,n){const l=t.type,o=(s?s.appContext:t.appContext)||Rr,i={uid:qr++,vnode:t,type:l,parent:s,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ua(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(o.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gi(l,o),emitsOptions:fi(l,o),emit:null,emitted:null,propsDefaults:De,inheritAttrs:l.inheritAttrs,ctx:De,data:De,props:De,attrs:De,slots:De,refs:De,setupState:De,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=s?s.root:i,i.emit=_r.bind(null,i),t.ce&&t.ce(i),i}let Ge=null;const yn=()=>Ge||He;let nn,Gn;{const t=dn(),s=(n,l)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(l),i=>{o.length>1?o.forEach(a=>a(i)):o[0](i)}};nn=s("__VUE_INSTANCE_SETTERS__",n=>Ge=n),Gn=s("__VUE_SSR_SETTERS__",n=>Is=n)}const Es=t=>{const s=Ge;return nn(t),t.scope.on(),()=>{t.scope.off(),nn(s)}},Bl=()=>{Ge&&Ge.scope.off(),nn(null)};function Si(t){return t.vnode.shapeFlag&4}let Is=!1;function Hr(t,s=!1,n=!1){s&&Gn(s);const{props:l,children:o}=t.vnode,i=Si(t);Sr(t,l,i,s),Pr(t,o,n||s);const a=i?zr(t,s):void 0;return s&&Gn(!1),a}function zr(t,s){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,fr);const{setup:l}=n;if(l){It();const o=t.setupContext=l.length>1?Kr(t):null,i=Es(t),a=Us(l,t,0,[t.props,o]),r=$o(a);if(Dt(),i(),(r||t.sp)&&!is(t)&&li(t),r){if(a.then(Bl,Bl),s)return a.then(u=>{Hl(t,u)}).catch(u=>{mn(u,t,0)});t.asyncDep=a}else Hl(t,a)}else Ti(t)}function Hl(t,s,n){Ce(s)?t.type.__ssrInlineRender?t.ssrRender=s:t.render=s:Ve(s)&&(t.setupState=qo(s)),Ti(t)}function Ti(t,s,n){const l=t.type;t.render||(t.render=l.render||kt);{const o=Es(t);It();try{mr(t)}finally{Dt(),o()}}}const Wr={get(t,s){return We(t,"get",""),t[s]}};function Kr(t){const s=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Wr),slots:t.slots,emit:t.emit,expose:s}}function _n(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(qo(Ia(t.exposed)),{get(s,n){if(n in s)return s[n];if(n in ws)return ws[n](t)},has(s,n){return n in s||n in ws}})):t.proxy}function Gr(t){return Ce(t)&&"__vccOpts"in t}const se=(t,s)=>La(t,s,Is);function Xr(t,s,n){try{sn(-1);const l=arguments.length;return l===2?Ve(s)&&!$e(s)?Ms(s)?pe(t,null,[s]):pe(t,s):pe(t,null,s):(l>3?n=Array.prototype.slice.call(arguments,2):l===3&&Ms(n)&&(n=[n]),pe(t,s,n))}finally{sn(1)}}const Jr="3.5.26";function Qr(t){const s=Object.create(null);for(const n of t.split(","))s[n]=1;return n=>n in s}const Yr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Zr=t=>t.startsWith("onUpdate:"),$n=Object.assign,wt=Array.isArray,kn=t=>Oi(t)==="[object Set]",zl=t=>Oi(t)==="[object Date]",Ai=t=>typeof t=="function",ds=t=>typeof t=="string",Xn=t=>typeof t=="symbol",Jn=t=>t!==null&&typeof t=="object",ec=Object.prototype.toString,Oi=t=>ec.call(t),gl=t=>{const s=Object.create(null);return(n=>s[n]||(s[n]=t(n)))},tc=/-\w/g,sc=gl(t=>t.replace(tc,s=>s.slice(1).toUpperCase())),nc=/\B([A-Z])/g,hl=gl(t=>t.replace(nc,"-$1").toLowerCase()),lc=gl(t=>t.charAt(0).toUpperCase()+t.slice(1)),oc=(t,...s)=>{for(let n=0;n<t.length;n++)t[n](...s)},yl=t=>{const s=parseFloat(t);return isNaN(s)?t:s},ic=t=>{const s=ds(t)?Number(t):NaN;return isNaN(s)?t:s},ac="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rc=Qr(ac);function Pi(t){return!!t||t===""}function cc(t,s){if(t.length!==s.length)return!1;let n=!0;for(let l=0;n&&l<t.length;l++)n=es(t[l],s[l]);return n}function es(t,s){if(t===s)return!0;let n=zl(t),l=zl(s);if(n||l)return n&&l?t.getTime()===s.getTime():!1;if(n=Xn(t),l=Xn(s),n||l)return t===s;if(n=wt(t),l=wt(s),n||l)return n&&l?cc(t,s):!1;if(n=Jn(t),l=Jn(s),n||l){if(!n||!l)return!1;const o=Object.keys(t).length,i=Object.keys(s).length;if(o!==i)return!1;for(const a in t){const r=t.hasOwnProperty(a),u=s.hasOwnProperty(a);if(r&&!u||!r&&u||!es(t[a],s[a]))return!1}}return String(t)===String(s)}function _l(t,s){return t.findIndex(n=>es(n,s))}let Qn;const Wl=typeof window<"u"&&window.trustedTypes;if(Wl)try{Qn=Wl.createPolicy("vue",{createHTML:t=>t})}catch{}const Mi=Qn?t=>Qn.createHTML(t):t=>t,dc="http://www.w3.org/2000/svg",uc="http://www.w3.org/1998/Math/MathML",Tt=typeof document<"u"?document:null,Kl=Tt&&Tt.createElement("template"),fc={insert:(t,s,n)=>{s.insertBefore(t,n||null)},remove:t=>{const s=t.parentNode;s&&s.removeChild(t)},createElement:(t,s,n,l)=>{const o=s==="svg"?Tt.createElementNS(dc,t):s==="mathml"?Tt.createElementNS(uc,t):n?Tt.createElement(t,{is:n}):Tt.createElement(t);return t==="select"&&l&&l.multiple!=null&&o.setAttribute("multiple",l.multiple),o},createText:t=>Tt.createTextNode(t),createComment:t=>Tt.createComment(t),setText:(t,s)=>{t.nodeValue=s},setElementText:(t,s)=>{t.textContent=s},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Tt.querySelector(t),setScopeId(t,s){t.setAttribute(s,"")},insertStaticContent(t,s,n,l,o,i){const a=n?n.previousSibling:s.lastChild;if(o&&(o===i||o.nextSibling))for(;s.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{Kl.innerHTML=Mi(l==="svg"?`<svg>${t}</svg>`:l==="mathml"?`<math>${t}</math>`:t);const r=Kl.content;if(l==="svg"||l==="mathml"){const u=r.firstChild;for(;u.firstChild;)r.appendChild(u.firstChild);r.removeChild(u)}s.insertBefore(r,n)}return[a?a.nextSibling:s.firstChild,n?n.previousSibling:s.lastChild]}},Ft="transition",bs="animation",us=Symbol("_vtc"),Ii={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Di=$n({},ei,Ii),mc=t=>(t.displayName="Transition",t.props=Di,t),Fe=mc((t,{slots:s})=>Xr(Ya,Ui(t),s)),Wt=(t,s=[])=>{wt(t)?t.forEach(n=>n(...s)):t&&t(...s)},Gl=t=>t?wt(t)?t.some(s=>s.length>1):t.length>1:!1;function Ui(t){const s={};for(const D in t)D in Ii||(s[D]=t[D]);if(t.css===!1)return s;const{name:n="v",type:l,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:r=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:h=a,appearToClass:v=r,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,y=pc(o),L=y&&y[0],K=y&&y[1],{onBeforeEnter:P,onEnter:H,onEnterCancelled:E,onLeave:I,onLeaveCancelled:V,onBeforeAppear:Q=P,onAppear:ee=H,onAppearCancelled:B=E}=s,T=(D,q,M,Y)=>{D._enterCancelled=Y,Et(D,q?v:r),Et(D,q?h:a),M&&M()},k=(D,q)=>{D._isLeaving=!1,Et(D,p),Et(D,m),Et(D,f),q&&q()},_=D=>(q,M)=>{const Y=D?ee:H,Z=()=>T(q,D,M);Wt(Y,[q,Z]),Xl(()=>{Et(q,D?u:i),yt(q,D?v:r),Gl(Y)||Jl(q,l,L,Z)})};return $n(s,{onBeforeEnter(D){Wt(P,[D]),yt(D,i),yt(D,a)},onBeforeAppear(D){Wt(Q,[D]),yt(D,u),yt(D,h)},onEnter:_(!1),onAppear:_(!0),onLeave(D,q){D._isLeaving=!0;const M=()=>k(D,q);yt(D,p),D._enterCancelled?(yt(D,f),Yn(D)):(Yn(D),yt(D,f)),Xl(()=>{D._isLeaving&&(Et(D,p),yt(D,m),Gl(I)||Jl(D,l,K,M))}),Wt(I,[D,M])},onEnterCancelled(D){T(D,!1,void 0,!0),Wt(E,[D])},onAppearCancelled(D){T(D,!0,void 0,!0),Wt(B,[D])},onLeaveCancelled(D){k(D),Wt(V,[D])}})}function pc(t){if(t==null)return null;if(Jn(t))return[Dn(t.enter),Dn(t.leave)];{const s=Dn(t);return[s,s]}}function Dn(t){return ic(t)}function yt(t,s){s.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[us]||(t[us]=new Set)).add(s)}function Et(t,s){s.split(/\s+/).forEach(l=>l&&t.classList.remove(l));const n=t[us];n&&(n.delete(s),n.size||(t[us]=void 0))}function Xl(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let vc=0;function Jl(t,s,n,l){const o=t._endId=++vc,i=()=>{o===t._endId&&l()};if(n!=null)return setTimeout(i,n);const{type:a,timeout:r,propCount:u}=ji(t,s);if(!a)return l();const h=a+"end";let v=0;const p=()=>{t.removeEventListener(h,f),i()},f=m=>{m.target===t&&++v>=u&&p()};setTimeout(()=>{v<u&&p()},r+1),t.addEventListener(h,f)}function ji(t,s){const n=window.getComputedStyle(t),l=y=>(n[y]||"").split(", "),o=l(`${Ft}Delay`),i=l(`${Ft}Duration`),a=Ql(o,i),r=l(`${bs}Delay`),u=l(`${bs}Duration`),h=Ql(r,u);let v=null,p=0,f=0;s===Ft?a>0&&(v=Ft,p=a,f=i.length):s===bs?h>0&&(v=bs,p=h,f=u.length):(p=Math.max(a,h),v=p>0?a>h?Ft:bs:null,f=v?v===Ft?i.length:u.length:0);const m=v===Ft&&/\b(?:transform|all)(?:,|$)/.test(l(`${Ft}Property`).toString());return{type:v,timeout:p,propCount:f,hasTransform:m}}function Ql(t,s){for(;t.length<s.length;)t=t.concat(t);return Math.max(...s.map((n,l)=>Yl(n)+Yl(t[l])))}function Yl(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Yn(t){return(t?t.ownerDocument:document).body.offsetHeight}function bc(t,s,n){const l=t[us];l&&(s=(s?[s,...l]:[...l]).join(" ")),s==null?t.removeAttribute("class"):n?t.setAttribute("class",s):t.className=s}const ln=Symbol("_vod"),Fi=Symbol("_vsh"),Zn={name:"show",beforeMount(t,{value:s},{transition:n}){t[ln]=t.style.display==="none"?"":t.style.display,n&&s?n.beforeEnter(t):gs(t,s)},mounted(t,{value:s},{transition:n}){n&&s&&n.enter(t)},updated(t,{value:s,oldValue:n},{transition:l}){!s!=!n&&(l?s?(l.beforeEnter(t),gs(t,!0),l.enter(t)):l.leave(t,()=>{gs(t,!1)}):gs(t,s))},beforeUnmount(t,{value:s}){gs(t,s)}};function gs(t,s){t.style.display=s?t[ln]:"none",t[Fi]=!s}const gc=Symbol(""),hc=/(?:^|;)\s*display\s*:/;function yc(t,s,n){const l=t.style,o=ds(n);let i=!1;if(n&&!o){if(s)if(ds(s))for(const a of s.split(";")){const r=a.slice(0,a.indexOf(":")).trim();n[r]==null&&Gs(l,r,"")}else for(const a in s)n[a]==null&&Gs(l,a,"");for(const a in n)a==="display"&&(i=!0),Gs(l,a,n[a])}else if(o){if(s!==n){const a=l[gc];a&&(n+=";"+a),l.cssText=n,i=hc.test(n)}}else s&&t.removeAttribute("style");ln in t&&(t[ln]=i?l.display:"",t[Fi]&&(l.display="none"))}const Zl=/\s*!important$/;function Gs(t,s,n){if(wt(n))n.forEach(l=>Gs(t,s,l));else if(n==null&&(n=""),s.startsWith("--"))t.setProperty(s,n);else{const l=_c(t,s);Zl.test(n)?t.setProperty(hl(l),n.replace(Zl,""),"important"):t[l]=n}}const eo=["Webkit","Moz","ms"],Un={};function _c(t,s){const n=Un[s];if(n)return n;let l=xt(s);if(l!=="filter"&&l in t)return Un[s]=l;l=lc(l);for(let o=0;o<eo.length;o++){const i=eo[o]+l;if(i in t)return Un[s]=i}return s}const to="http://www.w3.org/1999/xlink";function so(t,s,n,l,o,i=rc(s)){l&&s.startsWith("xlink:")?n==null?t.removeAttributeNS(to,s.slice(6,s.length)):t.setAttributeNS(to,s,n):n==null||i&&!Pi(n)?t.removeAttribute(s):t.setAttribute(s,i?"":Xn(n)?String(n):n)}function no(t,s,n,l,o){if(s==="innerHTML"||s==="textContent"){n!=null&&(t[s]=s==="innerHTML"?Mi(n):n);return}const i=t.tagName;if(s==="value"&&i!=="PROGRESS"&&!i.includes("-")){const r=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(r!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(s),t._value=n;return}let a=!1;if(n===""||n==null){const r=typeof t[s];r==="boolean"?n=Pi(n):n==null&&r==="string"?(n="",a=!0):r==="number"&&(n=0,a=!0)}try{t[s]=n}catch{}a&&t.removeAttribute(o||s)}function Mt(t,s,n,l){t.addEventListener(s,n,l)}function $c(t,s,n,l){t.removeEventListener(s,n,l)}const lo=Symbol("_vei");function kc(t,s,n,l,o=null){const i=t[lo]||(t[lo]={}),a=i[s];if(l&&a)a.value=l;else{const[r,u]=xc(s);if(l){const h=i[s]=Sc(l,o);Mt(t,r,h,u)}else a&&($c(t,r,a,u),i[s]=void 0)}}const oo=/(?:Once|Passive|Capture)$/;function xc(t){let s;if(oo.test(t)){s={};let l;for(;l=t.match(oo);)t=t.slice(0,t.length-l[0].length),s[l[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hl(t.slice(2)),s]}let jn=0;const wc=Promise.resolve(),Cc=()=>jn||(wc.then(()=>jn=0),jn=Date.now());function Sc(t,s){const n=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=n.attached)return;bt(Tc(l,n.value),s,5,[l])};return n.value=t,n.attached=Cc(),n}function Tc(t,s){if(wt(s)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},s.map(l=>o=>!o._stopped&&l&&l(o))}else return s}const io=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Ac=(t,s,n,l,o,i)=>{const a=o==="svg";s==="class"?bc(t,l,a):s==="style"?yc(t,n,l):Yr(s)?Zr(s)||kc(t,s,n,l,i):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):Oc(t,s,l,a))?(no(t,s,l),!t.tagName.includes("-")&&(s==="value"||s==="checked"||s==="selected")&&so(t,s,l,a,i,s!=="value")):t._isVueCE&&(/[A-Z]/.test(s)||!ds(l))?no(t,sc(s),l,i,s):(s==="true-value"?t._trueValue=l:s==="false-value"&&(t._falseValue=l),so(t,s,l,a))};function Oc(t,s,n,l){if(l)return!!(s==="innerHTML"||s==="textContent"||s in t&&io(s)&&Ai(n));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="autocorrect"||s==="sandbox"&&t.tagName==="IFRAME"||s==="form"||s==="list"&&t.tagName==="INPUT"||s==="type"&&t.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return io(s)&&ds(n)?!1:s in t}const Ei=new WeakMap,Vi=new WeakMap,on=Symbol("_moveCb"),ao=Symbol("_enterCb"),Pc=t=>(delete t.props.mode,t),Mc=Pc({name:"TransitionGroup",props:$n({},Di,{tag:String,moveClass:String}),setup(t,{slots:s}){const n=yn(),l=Zo();let o,i;return ii(()=>{if(!o.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!jc(o[0].el,n.vnode.el,a)){o=[];return}o.forEach(Ic),o.forEach(Dc);const r=o.filter(Uc);Yn(n.vnode.el),r.forEach(u=>{const h=u.el,v=h.style;yt(h,a),v.transform=v.webkitTransform=v.transitionDuration="";const p=h[on]=f=>{f&&f.target!==h||(!f||f.propertyName.endsWith("transform"))&&(h.removeEventListener("transitionend",p),h[on]=null,Et(h,a))};h.addEventListener("transitionend",p)}),o=[]}),()=>{const a=Pe(t),r=Ui(a);let u=a.tag||de;if(o=[],i)for(let h=0;h<i.length;h++){const v=i[h];v.el&&v.el instanceof Element&&(o.push(v),Zt(v,Os(v,r,l,n)),Ei.set(v,{left:v.el.offsetLeft,top:v.el.offsetTop}))}i=s.default?fl(s.default()):[];for(let h=0;h<i.length;h++){const v=i[h];v.key!=null&&Zt(v,Os(v,r,l,n))}return pe(u,null,i)}}}),Li=Mc;function Ic(t){const s=t.el;s[on]&&s[on](),s[ao]&&s[ao]()}function Dc(t){Vi.set(t,{left:t.el.offsetLeft,top:t.el.offsetTop})}function Uc(t){const s=Ei.get(t),n=Vi.get(t),l=s.left-n.left,o=s.top-n.top;if(l||o){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${l}px,${o}px)`,i.transitionDuration="0s",t}}function jc(t,s,n){const l=t.cloneNode(),o=t[us];o&&o.forEach(r=>{r.split(/\s+/).forEach(u=>u&&l.classList.remove(u))}),n.split(/\s+/).forEach(r=>r&&l.classList.add(r)),l.style.display="none";const i=s.nodeType===1?s:s.parentNode;i.appendChild(l);const{hasTransform:a}=ji(l);return i.removeChild(l),a}const qt=t=>{const s=t.props["onUpdate:modelValue"]||!1;return wt(s)?n=>oc(s,n):s};function Fc(t){t.target.composing=!0}function ro(t){const s=t.target;s.composing&&(s.composing=!1,s.dispatchEvent(new Event("input")))}const mt=Symbol("_assign");function co(t,s,n){return s&&(t=t.trim()),n&&(t=yl(t)),t}const he={created(t,{modifiers:{lazy:s,trim:n,number:l}},o){t[mt]=qt(o);const i=l||o.props&&o.props.type==="number";Mt(t,s?"change":"input",a=>{a.target.composing||t[mt](co(t.value,n,i))}),(n||i)&&Mt(t,"change",()=>{t.value=co(t.value,n,i)}),s||(Mt(t,"compositionstart",Fc),Mt(t,"compositionend",ro),Mt(t,"change",ro))},mounted(t,{value:s}){t.value=s??""},beforeUpdate(t,{value:s,oldValue:n,modifiers:{lazy:l,trim:o,number:i}},a){if(t[mt]=qt(a),t.composing)return;const r=(i||t.type==="number")&&!/^0\d/.test(t.value)?yl(t.value):t.value,u=s??"";r!==u&&(document.activeElement===t&&t.type!=="range"&&(l&&s===n||o&&t.value.trim()===u)||(t.value=u))}},an={deep:!0,created(t,s,n){t[mt]=qt(n),Mt(t,"change",()=>{const l=t._modelValue,o=fs(t),i=t.checked,a=t[mt];if(wt(l)){const r=_l(l,o),u=r!==-1;if(i&&!u)a(l.concat(o));else if(!i&&u){const h=[...l];h.splice(r,1),a(h)}}else if(kn(l)){const r=new Set(l);i?r.add(o):r.delete(o),a(r)}else a(Ni(t,i))})},mounted:uo,beforeUpdate(t,s,n){t[mt]=qt(n),uo(t,s,n)}};function uo(t,{value:s,oldValue:n},l){t._modelValue=s;let o;if(wt(s))o=_l(s,l.props.value)>-1;else if(kn(s))o=s.has(l.props.value);else{if(s===n)return;o=es(s,Ni(t,!0))}t.checked!==o&&(t.checked=o)}const el={created(t,{value:s},n){t.checked=es(s,n.props.value),t[mt]=qt(n),Mt(t,"change",()=>{t[mt](fs(t))})},beforeUpdate(t,{value:s,oldValue:n},l){t[mt]=qt(l),s!==n&&(t.checked=es(s,l.props.value))}},Yt={deep:!0,created(t,{value:s,modifiers:{number:n}},l){const o=kn(s);Mt(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>n?yl(fs(a)):fs(a));t[mt](t.multiple?o?new Set(i):i:i[0]),t._assigning=!0,Qt(()=>{t._assigning=!1})}),t[mt]=qt(l)},mounted(t,{value:s}){fo(t,s)},beforeUpdate(t,s,n){t[mt]=qt(n)},updated(t,{value:s}){t._assigning||fo(t,s)}};function fo(t,s){const n=t.multiple,l=wt(s);if(!(n&&!l&&!kn(s))){for(let o=0,i=t.options.length;o<i;o++){const a=t.options[o],r=fs(a);if(n)if(l){const u=typeof r;u==="string"||u==="number"?a.selected=s.some(h=>String(h)===String(r)):a.selected=_l(s,r)>-1}else a.selected=s.has(r);else if(es(fs(a),s)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function fs(t){return"_value"in t?t._value:t.value}function Ni(t,s){const n=s?"_trueValue":"_falseValue";return n in t?t[n]:s}const Ec=["ctrl","shift","alt","meta"],Vc={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,s)=>Ec.some(n=>t[`${n}Key`]&&!s.includes(n))},ge=(t,s)=>{const n=t._withMods||(t._withMods={}),l=s.join(".");return n[l]||(n[l]=((o,...i)=>{for(let a=0;a<s.length;a++){const r=Vc[s[a]];if(r&&r(o,s))return}return t(o,...i)}))},Lc={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},$l=(t,s)=>{const n=t._withKeys||(t._withKeys={}),l=s.join(".");return n[l]||(n[l]=(o=>{if(!("key"in o))return;const i=hl(o.key);if(s.some(a=>a===i||Lc[a]===i))return t(o)}))},Nc=$n({patchProp:Ac},fc);let mo;function Rc(){return mo||(mo=Ir(Nc))}const Je=((...t)=>{const s=Rc().createApp(...t),{mount:n}=s;return s.mount=l=>{const o=Bc(l);if(!o)return;const i=s._component;!Ai(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=n(o,!1,qc(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},s});function qc(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Bc(t){return ds(t)?document.querySelector(t):t}const _e=we.create({headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),po=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");po&&(_e.defaults.headers.common["X-CSRF-TOKEN"]=po);_e.interceptors.response.use(t=>t,t=>Promise.reject(t));function Hc(t={}){return _e.get("/orders/list",{params:t})}function zc(t){return _e.delete(`/orders/${t}`)}function Wc(t,s=[]){return _e.patch(`/orders/${t}/tags`,{tag_ids:s})}function Kc(t,s){return _e.patch(`/orders/${t}/status`,{status_id:s})}function Gc(t,s){return _e.patch(`/orders/${t}/comment`,{comment_internal:s})}function Ri(t){return _e.post("/orders",t)}function qi(t){return _e.get(`/orders/${t}`)}function Bi(t,s){return _e.put(`/orders/${t}`,s)}function Xc(t){return _e.get("/customers",{params:{q:t}})}function Jc(t={}){return _e.get("/customers",{params:t})}function Qc(t){return _e.get(`/customers/${t}`)}const xe=(t,s)=>{const n=t.__vccOpts||t;for(const[l,o]of s)n[l]=o;return n},Yc={class:"customer-section flex-column d-flex gap-3"},Zc={key:0,class:"customer-card border rounded-4 bg-white shadow-sm p-3 animate-fade-in"},ed={class:"d-flex align-items-center gap-3"},td={class:"flex-grow-1 min-width-0"},sd={class:"d-flex align-items-center gap-2 mb-1"},nd={class:"mb-0 fw-bold text-dark text-truncate"},ld={class:"customer-meta small d-flex flex-wrap gap-x-3"},od={key:0,class:"text-secondary"},id={key:1,class:"text-secondary"},ad={class:"d-flex gap-2"},rd={key:2,class:"customer-card border rounded-4 bg-white shadow-sm animate-fade-in overflow-visible"},cd={class:"p-3"},dd={class:"row g-3"},ud={class:"col-12 position-relative"},fd={class:"input-group-custom"},md={key:0,class:"spinner-border spinner-border-sm input-loader text-primary"},pd={key:0,class:"customer-suggest-dropdown shadow-lg"},vd=["onMousedown"],bd={class:"d-flex w-100 justify-content-between align-items-center"},gd={class:"fw-bold text-dark"},hd={class:"badge bg-light text-dark border"},yd={key:0,class:"text-muted"},_d={key:1,class:"duplicate-hint mt-2 text-success d-flex align-items-center gap-2 small animate-fade-in"},$d={key:2,class:"text-danger small mt-2"},kd={key:3,class:"invalid-feedback d-block"},xd={key:4,class:"invalid-feedback d-block"},wd={class:"col-12"},Cd={key:0,class:"invalid-feedback d-block"},Sd={key:1,class:"invalid-feedback d-block"},Td={class:"col-12"},Ad={class:"p-3 bg-light-subtle border-top text-end"},Od={__name:"CustomerBlock",props:js({errors:{type:Object,default:()=>({})}},{modelValue:{type:Object,default:()=>({})},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=cs(t,"modelValue"),n=Me({id:null,phone:"",first_name:"",last_name:"",email:"",...s.value}),l=S(!1),o=S(!1),i=S(""),a=S([]),r=S(!1),u=S("");let h=null;const v=se(()=>`${n.first_name||""} ${n.last_name||""}`.trim()||"  "),p=se(()=>!!(n.id||n.phone||n.first_name||n.last_name)),f=se(()=>{if(!n.phone)return"";const k=m(n.phone);return k.length===12?`+${k.substring(0,2)} (${k.substring(2,5)}) ${k.substring(5,8)}-${k.substring(8,10)}-${k.substring(10,12)}`:n.phone}),m=k=>(k||"").replace(/\D+/g,""),y=k=>{let _=m(k);return _?(_.startsWith("0")?_="38"+_:_.startsWith("38")&&!_.startsWith("380")&&(_="380"+_.slice(2)),_.startsWith("3800")&&(_="380"+_.slice(4)),_.slice(0,12)):""},L=se(()=>{if(!n.phone)return"";const k=m(n.phone);return/^380\d{9}$/.test(k)?"":"  ( 380XXXXXXXXX)"}),K=se(()=>{const k=u.value.trim();if(!k)return"";const _=k.split(/\s+/).filter(Boolean);return _.length<2?"   ":_.length>2?"    ":""});function P(){Object.assign(n,{id:null,first_name:"",last_name:"",phone:"",email:""}),u.value="",a.value=[],i.value=""}function H(){const k=u.value.trim().split(/\s+/).filter(Boolean);n.first_name=k[0]||"",n.last_name=k[1]||""}function E(){h&&clearTimeout(h),i.value="",n.id=null;const k=y(n.phone||"");k!==n.phone&&(n.phone=k);const _=k;if(!_){a.value=[],r.value=!1;return}if(_.length<4){o.value=!1;return}o.value=!0,h=setTimeout(()=>I(_),400)}async function I(k){try{const{data:_}=await Xc(k),D=_?.data||_||[];a.value=D;const q=m(k),M=D.find(Y=>m(Y.phone)===q);M?(V(M),r.value=!1):r.value=!!D.length}catch(_){console.error(_)}finally{o.value=!1}}function V(k){n.id=k.id,n.first_name=k.first_name||"",n.last_name=k.last_name||"",n.email=k.email||"",n.phone=y(k.phone||n.phone),u.value=`${n.first_name} ${n.last_name}`.trim()}function Q(k){V(k),r.value=!1}function ee(){a.value.length&&(r.value=!0)}function B(){p.value||P(),l.value=!1}const T=()=>setTimeout(()=>r.value=!1,200);return Se(()=>({...n}),k=>{JSON.stringify(k)!==JSON.stringify(s.value)&&(s.value=k)},{deep:!0}),Se(()=>s.value,k=>{k&&JSON.stringify(k)!==JSON.stringify(n)&&(Object.assign(n,k),u.value=`${n.first_name||""} ${n.last_name||""}`.trim())},{deep:!0,immediate:!0}),(k,_)=>(c(),d("div",Yc,[p.value&&!l.value?(c(),d("div",Zc,[e("div",ed,[_[11]||(_[11]=e("div",{class:"avatar-circle"},[e("i",{class:"bi bi-person-check-fill fs-4 text-primary"})],-1)),e("div",td,[e("div",sd,[e("h6",nd,g(v.value),1),_[6]||(_[6]=e("span",{class:"badge bg-primary-subtle text-primary border border-primary-subtle px-2"},"",-1))]),e("div",ld,[n.phone?(c(),d("span",od,[_[7]||(_[7]=e("i",{class:"bi bi-telephone-fill me-1 text-muted"},null,-1)),te(g(f.value),1)])):F("",!0),n.email?(c(),d("span",id,[_[8]||(_[8]=e("i",{class:"bi bi-envelope-at-fill me-1 text-muted"},null,-1)),te(g(n.email),1)])):F("",!0)])]),e("div",ad,[e("button",{class:"btn-action edit",onClick:_[0]||(_[0]=D=>l.value=!0),title:""},[..._[9]||(_[9]=[e("i",{class:"bi bi-pencil-square"},null,-1)])]),e("button",{class:"btn-action delete",onClick:P,title:""},[..._[10]||(_[10]=[e("i",{class:"bi bi-trash3"},null,-1)])])])])])):!p.value&&!l.value?(c(),d("div",{key:1,class:"empty-state-card rounded-4 p-4 text-center cursor-pointer transition-all",onClick:_[1]||(_[1]=D=>l.value=!0)},[..._[12]||(_[12]=[e("div",{class:"icon-pulse mb-2"},[e("i",{class:"bi bi-person-plus text-primary fs-2"})],-1),e("h6",{class:"fw-bold text-dark mb-1"}," ",-1),e("p",{class:"text-muted small mb-0"},"      ",-1)])])):(c(),d("div",rd,[e("div",{class:"card-header-custom px-3 py-2 border-bottom d-flex justify-content-between align-items-center bg-light-subtle"},[_[14]||(_[14]=e("span",{class:"fw-bold small text-uppercase letter-spacing-1 text-muted"}," ",-1)),e("button",{type:"button",class:"btn-close-custom",onClick:B},[..._[13]||(_[13]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",cd,[e("div",dd,[e("div",ud,[_[17]||(_[17]=e("label",{class:"form-label-custom"}," ",-1)),e("div",fd,[_[15]||(_[15]=e("i",{class:"bi bi-telephone input-icon-left"},null,-1)),ue(e("input",{type:"tel",autocomplete:"off",name:"crm_customer_phone",class:W(["form-control custom-input",{"is-invalid":t.errors.phone||L.value}]),"onUpdate:modelValue":_[2]||(_[2]=D=>n.phone=D),placeholder:"380...",onInput:E,onFocus:ee,onBlur:T},null,34),[[he,n.phone]]),o.value?(c(),d("div",md)):F("",!0)]),r.value&&a.value.length?(c(),d("div",pd,[(c(!0),d(de,null,ve(a.value,D=>(c(),d("button",{key:D.id,type:"button",class:"dropdown-item d-flex flex-column align-items-start py-2",onMousedown:ge(q=>Q(D),["prevent"])},[e("div",bd,[e("span",gd,g(D.first_name)+" "+g(D.last_name),1),e("span",hd,g(D.phone),1)]),D.email?(c(),d("small",yd,g(D.email),1)):F("",!0)],40,vd))),128))])):F("",!0),n.id?(c(),d("div",_d,[..._[16]||(_[16]=[e("i",{class:"bi bi-check2-circle fs-5"},null,-1),e("div",null,[e("span",{class:"fw-bold"},"   ."),e("span",{class:"d-block text-muted smaller",style:{"line-height":"1.2"}},"   .")],-1)])])):F("",!0),i.value?(c(),d("div",$d,g(i.value),1)):F("",!0),t.errors.phone?(c(),d("div",kd,g(t.errors.phone),1)):L.value?(c(),d("div",xd,g(L.value),1)):F("",!0)]),e("div",wd,[_[18]||(_[18]=e("label",{class:"form-label-custom"},"  ",-1)),ue(e("input",{type:"text",autocomplete:"name",class:W(["form-control custom-input",{"is-invalid":t.errors.first_name||t.errors.last_name||K.value}]),"onUpdate:modelValue":_[3]||(_[3]=D=>u.value=D),placeholder:" ",onInput:H},null,34),[[he,u.value]]),t.errors.first_name||t.errors.last_name?(c(),d("div",Cd,g(t.errors.first_name||t.errors.last_name),1)):K.value?(c(),d("div",Sd,g(K.value),1)):F("",!0)]),e("div",Td,[_[19]||(_[19]=e("label",{class:"form-label-custom"}," ",-1)),ue(e("input",{type:"email",autocomplete:"email",class:W(["form-control custom-input",{"is-invalid":t.errors.email}]),"onUpdate:modelValue":_[4]||(_[4]=D=>n.email=D),placeholder:"example@mail.com"},null,2),[[he,n.email]])])])]),e("div",Ad,[e("button",{class:"btn btn-primary rounded-3 px-4 fw-bold shadow-sm btn-sm",onClick:_[5]||(_[5]=D=>l.value=!1)},"  ")])]))]))}},Hi=xe(Od,[["__scopeId","data-v-b0449245"]]);function zi(){return _e.get("/tags")}function Pd(t={}){return _e.get("/order-sources",{params:t})}function Wi(t={}){return _e.get("/statuses",{params:t})}const Md={class:"d-flex flex-column gap-3 position-relative"},Id={class:"info-card"},Dd={class:"d-flex justify-content-between align-items-center"},Ud={class:"info-value"},jd={class:"d-flex align-items-center gap-2"},Fd={class:"icon-mini",style:{backgroundColor:"#6366f120",color:"#6366f1"}},Ed={class:"fw-medium text-dark"},Vd={class:"row g-2"},Ld={class:"col-6"},Nd={class:"text-truncate"},Rd={class:"col-6"},qd={class:"text-truncate"},Bd={class:"d-flex flex-wrap gap-2 align-items-center position-relative"},Hd={class:"d-flex align-items-center gap-1"},zd=["onClick"],Wd={class:"position-relative"},Kd={key:0,class:"tags-popover shadow-lg"},Gd={class:"popover-header"},Xd={class:"popover-body custom-scrollbar"},Jd=["onClick"],Qd={key:0,class:"bi bi-check text-white"},Yd={key:0,class:"text-center text-muted small py-3"},Zd={key:0},eu={class:"modal-dialog modal-dialog-centered modal-sm"},tu={class:"modal-content border-0 shadow-lg rounded-4 overflow-hidden"},su={class:"modal-header border-bottom-0 pb-0 px-4 pt-4"},nu={class:"modal-title fw-bold text-uppercase text-muted small"},lu={class:"modal-body p-2"},ou={class:"d-flex flex-column gap-1"},iu=["onClick"],au={class:"d-flex align-items-center gap-3"},ru={class:"fw-medium"},cu={key:0,class:"bi bi-check-circle-fill text-primary"},du={__name:"OrderMetaBlock",props:js({errors:{type:Object,default:()=>({})}},{modelValue:{type:Object,default:()=>({id:"",source:"site",status:"new",payment_status:"unpaid"})},modelModifiers:{},tagIds:{type:Array,default:()=>[]},tagIdsModifiers:{}}),emits:["update:modelValue","update:tagIds"],setup(t){const s=cs(t,"modelValue"),n=cs(t,"tagIds"),l=Me({...s.value}),o=S([]),i=S([]),a=S([]),r=Me({isOpen:!1,type:"",title:"",options:[]}),u=S(!1),h=[{value:"unpaid",label:" ",color:"#dc3545",icon:"bi-x-circle"},{value:"prepayment",label:"",color:"#f59e0b",icon:"bi-wallet2"},{value:"paid",label:"",color:"#198754",icon:"bi-check-circle"},{value:"refund",label:"",color:"#6c757d",icon:"bi-arrow-counterclockwise"}],v=k=>a.value.find(_=>_.value===k)?.label||k,p=k=>a.value.find(_=>_.value===k)?.icon||"bi-share",f=k=>i.value.find(_=>_.code===k)?.name||"...",m=k=>i.value.find(_=>_.code===k)?.icon||"bi-circle",y=k=>{const _=i.value.find(D=>D.code===k);return _?.color?{backgroundColor:_.color,borderColor:_.color,color:"#fff"}:{backgroundColor:"#6c757d",color:"#fff"}},L=k=>h.find(_=>_.value===k)?.label||k,K=k=>({unpaid:"bg-danger text-white border-danger",prepayment:"bg-warning text-dark border-warning",paid:"bg-success text-white border-success",refund:"bg-secondary text-white border-secondary"})[k]||"bg-light text-dark";function P(k){r.type=k,r.isOpen=!0,k==="source"?(r.title=" ",r.options=a.value.map(_=>({..._,color:"#6366f1"}))):k==="status"?(r.title=" ",r.options=i.value.map(_=>({value:_.code,label:_.name,icon:_.icon,color:_.color}))):k==="payment_status"&&(r.title=" ",r.options=h)}function H(k){l[r.type]=k,E()}const E=()=>r.isOpen=!1,I=k=>l[r.type]===k,V=se(()=>new Set(n.value||[])),Q=se(()=>o.value.filter(k=>V.value.has(k.id)));function ee(){u.value=!u.value}function B(k){const _=new Set(V.value);_.has(k)?_.delete(k):_.add(k),n.value=Array.from(_)}function T(k){const _=k.color||"#6c757d";return _.startsWith("#")?{backgroundColor:_+"26",color:_,borderColor:_+"4d"}:{backgroundColor:"#f1f5f9",color:"#64748b",borderColor:"#e2e8f0"}}return Se(l,k=>{Object.assign(s.value,k)},{deep:!0}),Re(async()=>{try{const[k,_,D]=await Promise.all([zi(),Wi({type:"order"}),Pd({type:"order"})]);o.value=Array.isArray(k.data?.data)?k.data.data:k.data??[],i.value=Array.isArray(_.data?.data)?_.data.data:_.data??[];const q=Array.isArray(D.data?.data)?D.data.data:D.data??[];a.value=q.map(M=>({value:M.code,label:M.name,icon:M.icon?`bi ${M.icon}`:"bi-share",color:M.color}))}catch(k){console.error(k)}}),(k,_)=>(c(),d("div",Md,[e("div",Id,[e("div",Dd,[e("div",null,[_[5]||(_[5]=e("label",{class:"info-label"}," ",-1)),e("div",Ud,g(l.id||""),1)]),_[6]||(_[6]=e("div",{class:"icon-circle bg-light text-muted"},[e("i",{class:"bi bi-hash"})],-1))])]),e("div",null,[_[8]||(_[8]=e("label",{class:"info-label mb-1"},"",-1)),e("div",{class:"custom-select-trigger",onClick:_[0]||(_[0]=D=>P("source"))},[e("div",jd,[e("div",Fd,[e("i",{class:W(p(l.source))},null,2)]),e("span",Ed,g(v(l.source)),1)]),_[7]||(_[7]=e("i",{class:"bi bi-chevron-down text-muted small"},null,-1))])]),e("div",Vd,[e("div",Ld,[_[9]||(_[9]=e("label",{class:"info-label mb-1"},"",-1)),e("div",{class:"status-card",style:Te(y(l.status)),onClick:_[1]||(_[1]=D=>P("status"))},[e("i",{class:W([m(l.status),"fs-5"])},null,2),e("span",Nd,g(f(l.status)),1)],4)]),e("div",Rd,[_[11]||(_[11]=e("label",{class:"info-label mb-1"},"",-1)),e("div",{class:W(["status-card",K(l.payment_status)]),onClick:_[2]||(_[2]=D=>P("payment_status"))},[_[10]||(_[10]=e("i",{class:"bi bi-credit-card-fill fs-5"},null,-1)),e("span",qd,g(L(l.payment_status)),1)],2)])]),_[18]||(_[18]=e("hr",{class:"border-light my-1 opacity-50"},null,-1)),e("div",null,[_[16]||(_[16]=e("label",{class:"info-label mb-2"},"",-1)),e("div",Bd,[(c(!0),d(de,null,ve(Q.value,D=>(c(),d("div",{key:D.id,class:"tag-badge animate-fade",style:Te(T(D))},[e("div",Hd,[D.icon?(c(),d("i",{key:0,class:W(["bi",D.icon]),style:Te({color:D.color})},null,6)):F("",!0),e("span",null,g(D.name),1)]),e("button",{type:"button",class:"remove-tag-btn",onClick:ge(q=>B(D.id),["stop"])},[..._[12]||(_[12]=[e("i",{class:"bi bi-x"},null,-1)])],8,zd)],4))),128)),e("div",Wd,[e("button",{type:"button",class:W(["btn-add-tag",{active:u.value}]),onClick:ge(ee,["stop"])},[..._[13]||(_[13]=[e("i",{class:"bi bi-plus-lg"},null,-1),e("span",null,"",-1)])],2),u.value?(c(),d("div",Kd,[e("div",Gd,[_[15]||(_[15]=e("span",{class:"small fw-bold text-muted text-uppercase"},"  ",-1)),e("button",{type:"button",class:"btn-close-mini",onClick:_[3]||(_[3]=D=>u.value=!1)},[..._[14]||(_[14]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",Xd,[(c(!0),d(de,null,ve(o.value,D=>(c(),d("div",{key:D.id,class:W(["popover-item",{selected:V.value.has(D.id)}]),onClick:q=>B(D.id)},[e("div",{class:W(["custom-checkbox me-2",{checked:V.value.has(D.id)}])},[V.value.has(D.id)?(c(),d("i",Qd)):F("",!0)],2),e("div",{class:"tag-preview",style:Te(T(D))},[D.icon?(c(),d("i",{key:0,class:W(["bi",D.icon])},null,2)):F("",!0),te(" "+g(D.name),1)],4)],10,Jd))),128)),o.value.length===0?(c(),d("div",Yd,"   ")):F("",!0)])])):F("",!0)])])]),u.value?(c(),d("div",{key:0,class:"fixed-overlay",onClick:_[4]||(_[4]=D=>u.value=!1)})):F("",!0),(c(),Ne(Ct,{to:"body"},[r.isOpen?(c(),d("div",Zd,[_[17]||(_[17]=e("div",{class:"modal-backdrop fade show bg-dark bg-opacity-25",style:{"backdrop-filter":"blur(2px)"}},null,-1)),e("div",{class:"modal fade show d-block",tabindex:"-1",onClick:ge(E,["self"])},[e("div",eu,[e("div",tu,[e("div",su,[e("h6",nu,g(r.title),1),e("button",{type:"button",class:"btn-close shadow-none",onClick:E})]),e("div",lu,[e("div",ou,[(c(!0),d(de,null,ve(r.options,D=>(c(),d("button",{key:D.value,type:"button",class:W(["picker-option",{selected:I(D.value)}]),onClick:q=>H(D.value)},[e("div",au,[e("div",{class:"option-icon",style:Te(D.color?{backgroundColor:D.color+"20",color:D.color}:{})},[e("i",{class:W(D.icon||"bi-circle-fill")},null,2)],4),e("span",ru,g(D.label),1)]),I(D.value)?(c(),d("i",cu)):F("",!0)],10,iu))),128))])])])])])])):F("",!0)]))]))}},Ki=xe(du,[["__scopeId","data-v-f195ac61"]]);function uu(t=""){const s=typeof t=="string"?{q:t}:t||{};return _e.get("/products",{params:s,headers:{Accept:"application/json"}})}const fu={class:"h-100 d-flex flex-column bg-white rounded-4 shadow-sm border border-light-subtle overflow-hidden wrapper-container"},mu={class:"px-4 py-3 border-bottom d-flex justify-content-between align-items-center bg-white sticky-header"},pu={class:"d-flex align-items-center gap-3"},vu={class:"text-secondary x-small fw-medium text-uppercase ls-1"},bu={class:"flex-grow-1 overflow-auto custom-scroll bg-body-tertiary bg-opacity-10 position-relative"},gu={class:"table table-borderless align-middle mb-0 w-100 position-relative",style:{"border-collapse":"separate","border-spacing":"0"}},hu={key:0,class:"bg-white"},yu={class:"ps-4 py-3 border-bottom-dashed"},_u={class:"d-flex align-items-center gap-3"},$u={class:"item-thumb rounded-3 shadow-sm flex-shrink-0 position-relative overflow-hidden"},ku=["src"],xu={key:1,class:"w-100 h-100 d-flex align-items-center justify-content-center bg-light text-secondary"},wu={class:"flex-grow-1 min-w-0"},Cu={class:"d-flex align-items-center gap-2 mb-1"},Su={key:0,class:"badge bg-light text-secondary border fw-normal font-monospace px-2",style:{"font-size":"0.7rem"}},Tu=["onUpdate:modelValue"],Au={class:"text-center py-3 border-bottom-dashed"},Ou={class:"d-inline-flex align-items-center bg-light rounded-pill border p-1 stepper-shadow"},Pu=["onClick"],Mu=["onUpdate:modelValue"],Iu=["onClick"],Du={class:"text-end py-3 border-bottom-dashed"},Uu={class:"d-flex justify-content-end align-items-center gap-1 group-focus-within"},ju=["onUpdate:modelValue"],Fu={class:"text-muted small fw-normal"},Eu={key:0,class:"text-muted x-small text-end mt-1 fw-medium"},Vu={class:"text-end py-3 pe-4 border-bottom-dashed"},Lu=["onClick"],Nu={key:1},Ru={class:"bg-white border-top p-4"},qu={class:"d-flex justify-content-end"},Bu={class:"w-100",style:{"max-width":"320px"}},Hu={key:0,class:"d-flex justify-content-between align-items-center mb-2 px-2"},zu={class:"badge bg-success-subtle text-success border border-success-subtle rounded-pill px-2"},Wu={class:"p-3 bg-light bg-opacity-50 rounded-3 border d-flex justify-content-between align-items-end"},Ku={class:"text-muted small"},Gu={class:"text-end lh-1"},Xu={class:"fs-3 fw-bolder text-primary tracking-tight"},Ju={class:"fs-6 text-muted fw-medium ms-1"},Qu={key:0},Yu={class:"offcanvas offcanvas-end show shadow-2xl border-0 d-flex flex-column",tabindex:"-1",style:{width:"600px","z-index":"1055"}},Zu={class:"p-3 bg-light border-bottom"},ef=["value"],tf={key:0,class:"h-100 d-flex align-items-center justify-content-center text-muted"},sf={key:1,class:"h-100 d-flex flex-column align-items-center justify-content-center text-muted opacity-50"},nf={key:2,class:"d-flex flex-column gap-2 p-3"},lf=["onClick"],of={class:"product-thumb-fixed border rounded-3 overflow-hidden bg-light flex-shrink-0 d-flex align-items-center justify-content-center position-relative"},af=["src"],rf={key:1,class:"bi bi-image text-muted small"},cf={class:"flex-grow-1 min-w-0 d-flex justify-content-between gap-3"},df={class:"d-flex flex-column justify-content-center pt-1 pb-1"},uf={class:"fw-bold text-dark lh-sm product-title mb-1"},ff={class:"d-flex align-items-center gap-2 flex-wrap"},mf={class:"badge bg-light text-secondary border fw-normal font-monospace px-1 py-0 rounded-1",style:{"font-size":"0.65rem"}},pf={class:"d-flex flex-column align-items-end justify-content-between flex-shrink-0 gap-2 pt-1"},vf={class:"fw-bold text-primary",style:{"font-size":"0.95rem"}},bf={class:"text-muted fw-normal",style:{"font-size":"0.75rem"}},gf={type:"button",class:"btn btn-sm btn-light text-primary fw-bold rounded-pill px-3 py-0 shadow-sm d-flex align-items-center gap-1 add-btn-compact"},hf={key:0,class:"product-group-variants"},yf=["onClick"],_f={class:"flex-grow-1 min-w-0 d-flex justify-content-between gap-3"},$f={class:"d-flex flex-column justify-content-center pt-1 pb-1"},kf={class:"fw-bold text-dark lh-sm product-title mb-1"},xf={class:"d-flex align-items-center gap-2 flex-wrap"},wf={class:"badge bg-light text-secondary border fw-normal font-monospace px-1 py-0 rounded-1",style:{"font-size":"0.65rem"}},Cf={class:"d-flex flex-column align-items-end justify-content-between flex-shrink-0 gap-2 pt-1"},Sf={class:"fw-bold text-primary",style:{"font-size":"0.95rem"}},Tf={class:"text-muted fw-normal",style:{"font-size":"0.75rem"}},Af={key:3,class:"py-3 text-center text-muted small"},Of=50,Pf={__name:"ItemsTable",props:js({currency:{type:String,default:"UAH"},prepayAmount:{type:Number,default:0},prepayEnabled:{type:Boolean,default:!1}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=cs(t,"modelValue"),n=t,l=S(!1),o=S(!1),i=S(!1),a=S([]),r=S([]),u=S(""),h=S(!1),v=S(null),p=S(0),f=S(!0),m=S(new Set),y=se(()=>Math.round(s.value.reduce((q,M)=>q+(Number(M.qty)||0)*(Number(M.price)||0),0)*100)/100),L=se(()=>Math.max(0,Math.round((y.value-n.prepayAmount)*100)/100)),K=se(()=>a.value),P=se(()=>{const q=new Map;return K.value.forEach(M=>{const Y=q.get(M.product_id)||{product_id:M.product_id,title:M.base_title||M.title||"",sku:M.parent_sku||"",imageUrl:M.imageUrl||"",price:M.price||0,total_stock:0,variants:[]};Y.variants.push(M),Y.total_stock+=Number(M.stock||0),q.set(M.product_id,Y)}),Array.from(q.values())});function H(){u.value="",p.value=0,f.value=!0,a.value=[],m.value=new Set,l.value=!0,ee(!0),_()}function E(){l.value=!1}function I(q){s.value.push({product_id:q.product_id||q.id||null,product_variant_id:q.product_variant_id||null,sku:q.sku||"",title:q.title||"",size:q.size||"",qty:1,price:q.price||0,imageUrl:q.imageUrl||"",main_photo_path:q.main_photo_path||""})}function V(q){const M=new Set(m.value);M.has(q)?M.delete(q):M.add(q),m.value=M}function Q(q){return m.value.has(q)}async function ee(q=!1){if(!(o.value||i.value)){q?o.value=!0:i.value=!0;try{const M=q?1:p.value+1,{data:Y}=await uu({category:u.value||void 0,page:M,per_page:Of,with_variants:!0}),Z=Y||{},U=Array.isArray(Z?.data)?Z.data:Array.isArray(Z)?Z:[],O=k(U);if(q)a.value=O;else{const $=new Set(a.value.map(le=>le.id));a.value=a.value.concat(O.filter(le=>!$.has(le.id)))}Z?.current_page?(p.value=Z.current_page,f.value=Z.current_page<Z.last_page):(p.value=M,f.value=!1)}catch(M){console.error(M),a.value=[]}finally{o.value=!1,i.value=!1}}}function B(q){s.value.splice(q,1)}function T(q){const M=q.main_photo_url||q.main_photo||q.main_photo_path||(q.imageUrl?q.imageUrl:"");if(!M)return"";if(M.startsWith("http"))return M;let Y=M.replace(/^\//,"");return Y.startsWith("public/")&&(Y=Y.replace(/^public\//,"")),Y.startsWith("storage/")?`/${Y}`:`/storage/${Y}`}function k(q){return q.flatMap(M=>{const Y={product_id:M.id,price:M.sale_price||M.price||0,imageUrl:T(M),main_photo_path:M.main_photo_path||"",parent_sku:M.sku||"",base_title:M.title||""};return Array.isArray(M.variants)&&M.variants.length?M.variants.map(Z=>({id:Z.id,product_id:M.id,product_variant_id:Z.id,sku:Z.sku||M.sku||"",title:`${M.title}${Z.size?` (${Z.size})`:""}`,size:Z.size||"",stock:Number(Z.stock_qty||0),...Y})):[{id:M.id,product_id:M.id,product_variant_id:null,sku:M.sku||"",title:M.title||"",size:"",stock:Number(M.stock_qty||0),...Y}]})}Se(()=>u.value,()=>{l.value&&(p.value=0,f.value=!0,ee(!0))});const _=async()=>{if(!r.value.length&&!h.value){h.value=!0;try{const{data:q}=await _e.get("/products/categories");r.value=Array.isArray(q)?q:[]}catch(q){console.error(q)}finally{h.value=!1}}},D=()=>{const q=v.value;!q||o.value||i.value||!f.value||q.scrollTop+q.clientHeight>=q.scrollHeight-200&&ee(!1)};return(q,M)=>(c(),d("div",fu,[e("div",mu,[e("div",pu,[M[2]||(M[2]=e("div",{class:"icon-box bg-primary bg-opacity-10 text-primary rounded-circle"},[e("i",{class:"bi bi-bag-check-fill fs-5"})],-1)),e("div",null,[M[1]||(M[1]=e("h6",{class:"mb-0 fw-bold text-dark font-heading"}," ",-1)),e("div",vu,": "+g(s.value.length),1)])]),e("button",{class:"btn btn-primary rounded-pill shadow-sm d-flex align-items-center gap-2 px-4 fw-medium btn-hover-effect",type:"button",onClick:H},[...M[3]||(M[3]=[e("i",{class:"bi bi-plus-lg text-white-50"},null,-1),e("span",null,"",-1)])])]),e("div",bu,[e("table",gu,[M[8]||(M[8]=e("thead",{class:"sticky-top bg-white shadow-sm z-index-10"},[e("tr",null,[e("th",{class:"ps-4 py-3 text-secondary x-small text-uppercase fw-bold bg-white border-bottom"},""),e("th",{class:"py-3 text-secondary x-small text-uppercase fw-bold text-center bg-white border-bottom",style:{width:"140px"}},""),e("th",{class:"py-3 text-secondary x-small text-uppercase fw-bold text-end bg-white border-bottom",style:{width:"150px"}},""),e("th",{class:"py-3 text-secondary x-small text-uppercase fw-bold text-end bg-white border-bottom pe-4",style:{width:"60px"}})])],-1)),s.value.length?(c(),d("tbody",hu,[(c(!0),d(de,null,ve(s.value,(Y,Z)=>(c(),d("tr",{key:Y.sku+"-"+Z,class:"item-row"},[e("td",yu,[e("div",_u,[e("div",$u,[Y.imageUrl?(c(),d("img",{key:0,src:Y.imageUrl,class:"w-100 h-100 object-fit-cover zoom-effect",alt:"img"},null,8,ku)):(c(),d("div",xu,[...M[4]||(M[4]=[e("i",{class:"bi bi-image opacity-50"},null,-1)])]))]),e("div",wu,[e("div",Cu,[Y.sku?(c(),d("span",Su,g(Y.sku),1)):F("",!0)]),ue(e("input",{class:"form-control form-control-flush fw-bold text-dark p-0 text-truncate","onUpdate:modelValue":U=>Y.title=U,placeholder:" "},null,8,Tu),[[he,Y.title]])])])]),e("td",Au,[e("div",Ou,[e("button",{class:"btn btn-icon-xs rounded-circle btn-white text-secondary hover-dark",onClick:U=>Y.qty>1?Y.qty--:B(Z),type:"button"},[e("i",{class:W(Y.qty>1?"bi bi-dash":"bi bi-trash3 text-danger"),style:{"font-size":"0.8rem"}},null,2)],8,Pu),ue(e("input",{class:"form-control border-0 text-center fw-bold bg-transparent p-0 mx-1",style:{width:"40px","font-size":"0.95rem"},"onUpdate:modelValue":U=>Y.qty=U,type:"number",min:"1"},null,8,Mu),[[he,Y.qty,void 0,{number:!0}]]),e("button",{class:"btn btn-icon-xs rounded-circle btn-white text-primary hover-primary",onClick:U=>Y.qty++,type:"button"},[...M[5]||(M[5]=[e("i",{class:"bi bi-plus",style:{"font-size":"1rem"}},null,-1)])],8,Iu)])]),e("td",Du,[e("div",Uu,[ue(e("input",{class:"form-control form-control-flush text-end fw-bold text-dark fs-6 p-0",style:{width:"80px"},"onUpdate:modelValue":U=>Y.price=U,type:"number",step:"0.01"},null,8,ju),[[he,Y.price,void 0,{number:!0}]]),e("span",Fu,g(t.currency),1)]),Y.qty>1?(c(),d("div",Eu,g((Y.price*Y.qty).toFixed(2))+" "+g(t.currency),1)):F("",!0)]),e("td",Vu,[e("button",{class:"btn btn-icon-sm text-secondary opacity-25 hover-opacity-100 hover-danger transition-all",type:"button",onClick:U=>B(Z)},[...M[6]||(M[6]=[e("i",{class:"bi bi-x-lg"},null,-1)])],8,Lu)])]))),128))])):(c(),d("tbody",Nu,[...M[7]||(M[7]=[e("tr",null,[e("td",{colspan:"4",class:"py-5"},[e("div",{class:"text-center py-5"},[e("div",{class:"mb-3 position-relative d-inline-block"},[e("div",{class:"icon-circle-lg bg-light text-secondary opacity-50 rounded-circle d-flex align-items-center justify-content-center mx-auto"},[e("i",{class:"bi bi-basket2 fs-1"})]),e("span",{class:"position-absolute top-0 end-0 p-2 bg-primary border border-white rounded-circle"})]),e("h6",{class:"fw-bold text-dark"}," "),e("p",{class:"text-muted small mb-4"},"    ")])])],-1)])]))])]),e("div",Ru,[e("div",qu,[e("div",Bu,[t.prepayEnabled&&t.prepayAmount>0?(c(),d("div",Hu,[M[9]||(M[9]=e("span",{class:"text-muted small"},"",-1)),e("span",zu," - "+g(t.prepayAmount)+" "+g(t.currency),1)])):F("",!0),e("div",Wu,[e("div",null,[M[10]||(M[10]=e("div",{class:"text-secondary x-small text-uppercase fw-bold mb-1"}," ",-1)),e("div",Ku,": "+g(y.value)+" "+g(t.currency),1)]),e("div",Gu,[e("span",Xu,g(L.value),1),e("span",Ju,g(t.currency),1)])])])])]),(c(),Ne(Ct,{to:"body"},[l.value?(c(),d("div",Qu,[e("div",{class:"offcanvas-backdrop fade show glass-backdrop",onClick:E}),e("div",Yu,[e("div",{class:"px-4 py-3 bg-white border-bottom d-flex align-items-center justify-content-between sticky-top z-index-10"},[M[12]||(M[12]=e("div",null,[e("h5",{class:"fw-bold mb-1 font-heading"}," "),e("div",{class:"d-flex align-items-center gap-2 text-muted x-small text-uppercase ls-1"},[e("span",null," ")])],-1)),e("button",{type:"button",class:"btn btn-icon btn-light rounded-circle text-secondary hover-dark",onClick:E},[...M[11]||(M[11]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",Zu,[ue(e("select",{"onUpdate:modelValue":M[0]||(M[0]=Y=>u.value=Y),class:"form-select rounded-3 border-0 shadow-sm",style:{width:"200px",height:"42px"}},[M[13]||(M[13]=e("option",{value:""}," ",-1)),(c(!0),d(de,null,ve(r.value,Y=>(c(),d("option",{key:Y.id,value:Y.id},g(Y.name),9,ef))),128))],512),[[Yt,u.value]])]),e("div",{ref_key:"pickerBody",ref:v,class:"offcanvas-body p-0 bg-secondary bg-opacity-10 custom-scroll",onScroll:D},[o.value&&!a.value.length?(c(),d("div",tf,[...M[14]||(M[14]=[e("div",{class:"spinner-border text-primary spinner-border-sm me-2"},null,-1),te(" ... ",-1)])])):K.value.length?(c(),d("div",nf,[(c(!0),d(de,null,ve(P.value,Y=>(c(),d("div",{key:Y.product_id,class:"product-group-card"},[e("div",{class:"product-group-head",onClick:Z=>V(Y.product_id)},[e("div",of,[Y.imageUrl?(c(),d("img",{key:0,src:Y.imageUrl,class:"w-100 h-100 object-fit-cover"},null,8,af)):(c(),d("i",rf)),e("span",{class:W(["stock-dot border border-white",Y.total_stock>0?"bg-success":"bg-danger"])},null,2)]),e("div",cf,[e("div",df,[e("div",uf,g(Y.title),1),e("div",ff,[e("span",mf,g(Y.sku||"---"),1),e("span",{class:W(["x-small",Y.total_stock>0?"text-success":"text-danger"])},g(Y.total_stock>0?` ${Y.total_stock} .`:""),3)])]),e("div",pf,[e("div",vf,[te(g(Y.price)+" ",1),e("span",bf,g(t.currency),1)]),e("button",gf,[e("i",{class:W(["bi",Q(Y.product_id)?"bi-chevron-up":"bi-chevron-down"])},null,2),M[16]||(M[16]=e("span",null,"",-1))])])])],8,lf),Q(Y.product_id)?(c(),d("div",hf,[(c(!0),d(de,null,ve(Y.variants,Z=>(c(),d("div",{key:Z.id,class:"product-card bg-white p-2 rounded-3 shadow-sm d-flex align-items-start gap-3 cursor-pointer",onClick:U=>I(Z)},[e("div",_f,[e("div",$f,[e("div",kf,g(Z.size||" "),1),e("div",xf,[e("span",wf,g(Z.sku||"---"),1),e("span",{class:W(["x-small",Z.stock>0?"text-success":"text-danger"])},g(Z.stock>0?`${Z.stock} .`:""),3)])]),e("div",Cf,[e("div",Sf,[te(g(Z.price)+" ",1),e("span",Tf,g(t.currency),1)]),M[17]||(M[17]=e("button",{type:"button",class:"btn btn-sm btn-light text-primary fw-bold rounded-pill px-3 py-0 shadow-sm d-flex align-items-center gap-1 add-btn-compact"},[e("i",{class:"bi bi-plus-lg"}),e("span",null,".")],-1))])])],8,yf))),128))])):F("",!0)]))),128))])):(c(),d("div",sf,[...M[15]||(M[15]=[e("i",{class:"bi bi-inbox fs-1 mb-2"},null,-1),e("span",null,"  ",-1)])])),i.value?(c(),d("div",Af,[...M[18]||(M[18]=[e("div",{class:"spinner-border spinner-border-sm text-primary me-2"},null,-1)])])):F("",!0)],544)])])):F("",!0)]))]))}},Gi=xe(Pf,[["__scopeId","data-v-dcc44231"]]),Mf={class:"payment-wrapper"},If={class:"d-flex flex-column gap-3"},Df=["onClick"],Uf={class:"d-flex align-items-center gap-3 position-relative z-1"},jf={class:"flex-grow-1"},Ff={class:"d-flex align-items-center justify-content-between mb-1"},Ef={class:"fw-bold text-dark fs-6"},Vf={class:"small text-muted lh-sm"},Lf=["value"],Nf={key:0,class:"mt-2 overflow-hidden"},Rf={class:"p-3 bg-light bg-opacity-50 border rounded-3 dashed-border"},qf={class:"currency-symbol"},Bf={key:0,class:"invalid-feedback d-block small mt-1"},Hf={__name:"PaymentBlock",props:js({currency:{type:String,default:"UAH"},errors:{type:Object,default:()=>({})}},{modelValue:{type:Object,default:()=>({method:"cod",prepay_amount:0})},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=cs(t,"modelValue"),n=[{value:"cod",label:" ",icon:"bi-box-seam",desc:"   "},{value:"card",label:"  ",icon:"bi-credit-card",desc:"   "},{value:"prepay",label:" ",icon:"bi-pie-chart",desc:" +  "}];return(l,o)=>(c(),d("div",Mf,[o[6]||(o[6]=e("h6",{class:"text-uppercase text-secondary x-small fw-bold mb-3 ls-1"}," ",-1)),e("div",If,[(c(),d(de,null,ve(n,i=>e("div",{key:i.value,class:W(["payment-card position-relative overflow-hidden",{selected:s.value.method===i.value}]),onClick:a=>s.value.method=i.value},[o[3]||(o[3]=e("div",{class:"selection-bg"},null,-1)),e("div",Uf,[e("div",{class:W(["icon-box",s.value.method===i.value?"bg-primary text-white shadow-sm":"bg-light text-secondary"])},[e("i",{class:W(["bi",i.icon,"fs-5"])},null,2)],2),e("div",jf,[e("div",Ff,[e("span",Ef,g(i.label),1),o[2]||(o[2]=e("div",{class:"custom-radio"},[e("div",{class:"radio-dot"})],-1))]),e("div",Vf,g(i.desc),1)])]),ue(e("input",{class:"d-none",type:"radio",value:i.value,"onUpdate:modelValue":o[0]||(o[0]=a=>s.value.method=a)},null,8,Lf),[[el,s.value.method]])],10,Df)),64))]),pe(Fe,{name:"expand"},{default:Oe(()=>[s.value.method==="prepay"?(c(),d("div",Nf,[e("div",Rf,[o[5]||(o[5]=e("div",{class:"d-flex justify-content-between align-items-center mb-2"},[e("label",{class:"form-label text-muted x-small fw-bold text-uppercase mb-0"}," "),e("span",{class:"badge bg-white border text-secondary shadow-sm",style:{"font-size":"0.7rem"}},":  ")],-1)),e("div",{class:W(["input-group-currency",{"is-invalid":t.errors.prepay_amount}])},[ue(e("input",{class:"form-control-currency","onUpdate:modelValue":o[1]||(o[1]=i=>s.value.prepay_amount=i),type:"number",step:"0.01",placeholder:"0",autofocus:""},null,512),[[he,s.value.prepay_amount,void 0,{number:!0}]]),e("span",qf,g(t.currency),1)],2),t.errors.prepay_amount?(c(),d("div",Bf,[o[4]||(o[4]=e("i",{class:"bi bi-exclamation-circle me-1"},null,-1)),te(g(t.errors.prepay_amount),1)])):F("",!0)])])):F("",!0)]),_:1})]))}},kl=xe(Hf,[["__scopeId","data-v-249b7d99"]]);function Xi(t){return _e.get("/nova-poshta/cities",{params:{q:t}})}function Xs({cityRef:t,query:s,limit:n=50}){return _e.get("/nova-poshta/warehouses",{params:{city_ref:t,q:s,limit:n}})}function zf({cityRef:t,query:s,limit:n=25}){return _e.get("/nova-poshta/streets",{params:{city_ref:t,q:s,limit:n}})}const Wf={class:"delivery-card glass-card"},Kf={class:"d-flex flex-column gap-4"},Gf={class:"delivery-toggle-group"},Xf={class:"position-relative"},Jf={class:"input-modern-wrapper"},Qf={key:0,class:"input-suffix"},Yf={key:1,class:"premium-dropdown"},Zf={key:0,class:"dropdown-item text-danger small"},em=["onMousedown"],tm={class:"d-flex align-items-center"},sm={class:"fw-bold"},nm={class:"text-muted smaller"},lm={key:0,class:"invalid-feedback d-block"},om={key:0,class:"position-relative animate-fade-in"},im=["disabled"],am={key:0,class:"input-suffix"},rm={key:1,class:"premium-dropdown"},cm=["onMousedown"],dm={class:"d-flex gap-2 text-start"},um={class:"small fw-medium"},fm={key:0,class:"invalid-feedback d-block"},mm={class:"mt-3"},pm={key:1,class:"animate-fade-in"},vm={class:"mb-3 position-relative"},bm=["disabled"],gm={key:0,class:"input-suffix"},hm={key:1,class:"premium-dropdown"},ym={key:0,class:"dropdown-item text-muted small"},_m=["onMousedown"],$m={class:"row g-2"},km={class:"col-6"},xm={class:"col-6"},wm={class:"payer-selector"},Cm={__name:"DeliveryBlock",props:js({errors:{type:Object,default:()=>({})}},{modelValue:{type:Object,default:()=>({})},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const s=cs(t,"modelValue"),n=Me({city_ref:"",settlement_ref:"",settlement_name:"",city_name:"",warehouse_ref:"",warehouse_name:"",delivery_type:"warehouse",carrier:"nova_poshta",payer:"recipient",street_name:"",street_ref:"",building:"",apartment:"",address_note:"",...s.value}),l=S(n.city_name||""),o=S(n.warehouse_name||""),i=S(n.street_name||""),a=S([]),r=S([]),u=S([]),h=S(!1),v=S(!1),p=S(!1),f=S(!1),m=S(!1),y=S(!1),L=S("");let K,P,H;const E=Me({city:!1,warehouse:!1,street:!1});Se(()=>({...n}),O=>{s.value=O},{deep:!0}),Se(()=>s.value,O=>{O&&(Object.assign(n,O),O.city_name&&O.city_name!==l.value&&(E.city=!0,l.value=O.city_name),O.warehouse_name&&O.warehouse_name!==o.value&&(E.warehouse=!0,o.value=O.warehouse_name),O.street_name&&O.street_name!==i.value&&(E.street=!0,i.value=O.street_name))},{deep:!0,immediate:!0}),Se(l,O=>{if(E.city){E.city=!1;return}if(n.city_name=O,n.city_ref="",n.settlement_ref="",n.settlement_name="",q(),K&&clearTimeout(K),!O||O.length<3){a.value=[];return}K=setTimeout(()=>I(O),400)}),Se(o,O=>{if(E.warehouse){E.warehouse=!1;return}n.warehouse_name=O,n.warehouse_ref="",P&&clearTimeout(P),n.city_ref&&(P=setTimeout(()=>V(O),400))}),Se(i,O=>{if(E.street){E.street=!1;return}if(n.street_name=O,n.street_ref="",H&&clearTimeout(H),!(!n.settlement_ref||n.delivery_type!=="courier")){if(!O||O.length<2){u.value=[];return}H=setTimeout(()=>Q(O),400)}});async function I(O){f.value=!0,L.value="";try{const{data:$}=await Xi(O);a.value=$?.data||$||[]}catch($){console.error($),L.value=" "}finally{f.value=!1}}async function V(O){m.value=!0;try{const{data:$}=await Xs({cityRef:n.city_ref,query:O,limit:100});r.value=$?.data||$||[]}finally{m.value=!1}}async function Q(O){const $=O&&O.length>=2;if(!n.settlement_ref||!$){u.value=[];return}y.value=!0;try{const{data:le}=await _e.get("/nova-poshta/streets",{params:{settlement_ref:n.settlement_ref,q:O,limit:25}});u.value=le?.data||le||[]}finally{y.value=!1}}function ee(O){M(),D();const $=O.delivery_city_ref||O.ref||"",le=O.settlement_ref||O.ref||$||"";n.city_ref=$,n.settlement_ref=le,n.city_name=O.name||"",n.settlement_name=O.name||"",E.city=!0,l.value=n.city_name,h.value=!1,n.delivery_type==="warehouse"&&V("")}function B(O){n.warehouse_ref=O.ref,n.warehouse_name=O.name,E.warehouse=!0,o.value=O.name,v.value=!1}function T(O){n.street_name=O.name,n.street_ref=O.street_ref||O.ref||"",E.street=!0,i.value=O.name,p.value=!1}function k(){v.value=!0,n.city_ref&&!r.value.length&&V("")}function _(){p.value=!0}function D(){n.street_name="",n.street_ref="",n.building="",n.apartment="",i.value="",u.value=[]}function q(){M(),D()}function M(){n.warehouse_ref="",n.warehouse_name="",o.value="",r.value=[]}const Y=()=>setTimeout(()=>h.value=!1,200),Z=()=>setTimeout(()=>v.value=!1,200),U=()=>setTimeout(()=>p.value=!1,200);return(O,$)=>(c(),d("div",Wf,[e("div",Kf,[e("section",null,[$[13]||($[13]=e("label",{class:"form-label-custom"}," ",-1)),e("div",Gf,[ue(e("input",{type:"radio",class:"btn-check",id:"dt_warehouse",value:"warehouse","onUpdate:modelValue":$[0]||($[0]=le=>n.delivery_type=le),onChange:q},null,544),[[el,n.delivery_type]]),$[11]||($[11]=e("label",{class:"toggle-item",for:"dt_warehouse"},[e("i",{class:"bi bi-box-seam"}),e("span",null,"")],-1)),ue(e("input",{type:"radio",class:"btn-check",id:"dt_courier",value:"courier","onUpdate:modelValue":$[1]||($[1]=le=>n.delivery_type=le),onChange:q},null,544),[[el,n.delivery_type]]),$[12]||($[12]=e("label",{class:"toggle-item",for:"dt_courier"},[e("i",{class:"bi bi-geo-fill"}),e("span",null,"")],-1))])]),e("section",Xf,[$[17]||($[17]=e("label",{class:"form-label-custom"}," ",-1)),e("div",Jf,[$[16]||($[16]=e("i",{class:"bi bi-search prefix-icon"},null,-1)),ue(e("input",{type:"text",autocomplete:"off",class:W(["form-control input-modern with-prefix",{"is-invalid":t.errors.city_name}]),"onUpdate:modelValue":$[2]||($[2]=le=>l.value=le),onFocus:$[3]||($[3]=le=>h.value=!0),onBlur:Y,placeholder:" ..."},null,34),[[he,l.value]]),f.value?(c(),d("div",Qf,[...$[14]||($[14]=[e("div",{class:"loader-mini"},null,-1)])])):F("",!0),h.value&&(a.value.length||L.value)?(c(),d("div",Yf,[L.value?(c(),d("div",Zf,g(L.value),1)):F("",!0),(c(!0),d(de,null,ve(a.value,le=>(c(),d("button",{key:le.ref,type:"button",class:"dropdown-item",onMousedown:ge(G=>ee(le),["prevent"])},[e("div",tm,[$[15]||($[15]=e("i",{class:"bi bi-geo-alt me-2 text-muted"},null,-1)),e("div",null,[e("div",sm,g(le.name),1),e("div",nm,g(le.area),1)])])],40,em))),128))])):F("",!0)]),t.errors.city_name?(c(),d("div",lm,g(t.errors.city_name),1)):F("",!0)]),n.delivery_type!=="courier"?(c(),d("section",om,[$[21]||($[21]=e("label",{class:"form-label-custom"},"  ",-1)),e("div",{class:W(["input-modern-wrapper",{"opacity-50":!n.city_ref}])},[$[19]||($[19]=e("i",{class:"bi bi-building-up prefix-icon"},null,-1)),ue(e("input",{type:"text",autocomplete:"off",class:W(["form-control input-modern with-prefix",{"is-invalid":t.errors.warehouse_name}]),"onUpdate:modelValue":$[4]||($[4]=le=>o.value=le),onFocus:k,onBlur:Z,disabled:!n.city_ref,placeholder:"   ..."},null,42,im),[[he,o.value]]),m.value?(c(),d("div",am,[...$[18]||($[18]=[e("div",{class:"loader-mini"},null,-1)])])):F("",!0),v.value&&r.value.length?(c(),d("div",rm,[(c(!0),d(de,null,ve(r.value,le=>(c(),d("button",{key:le.ref||le.name,type:"button",class:"dropdown-item",onMousedown:ge(G=>B(le),["prevent"])},[e("div",dm,[e("i",{class:W(["bi",le.name.includes("")?"bi-mailbox text-info":"bi-door-open text-primary"])},null,2),e("span",um,g(le.name),1)])],40,cm))),128))])):F("",!0)],2),t.errors.warehouse_name?(c(),d("div",fm,g(t.errors.warehouse_name),1)):F("",!0),e("div",mm,[$[20]||($[20]=e("label",{class:"form-label-custom"}," (  )",-1)),ue(e("input",{class:"form-control input-modern input-modern-small","onUpdate:modelValue":$[5]||($[5]=le=>n.address_note=le),placeholder:":   "},null,512),[[he,n.address_note]])])])):(c(),d("section",pm,[e("div",vm,[$[24]||($[24]=e("label",{class:"form-label-custom"},"",-1)),e("div",{class:W(["input-modern-wrapper",{"opacity-50":!n.settlement_ref}])},[$[23]||($[23]=e("i",{class:"bi bi-signpost-split prefix-icon"},null,-1)),ue(e("input",{type:"text",autocomplete:"off",class:W(["form-control input-modern with-prefix",{"is-invalid":t.errors.street_name}]),"onUpdate:modelValue":$[6]||($[6]=le=>i.value=le),onFocus:_,onBlur:U,disabled:!n.settlement_ref,placeholder:"  (2+ )..."},null,42,bm),[[he,i.value]]),y.value?(c(),d("div",gm,[...$[22]||($[22]=[e("div",{class:"loader-mini"},null,-1)])])):F("",!0),p.value&&(u.value.length||y.value)?(c(),d("div",hm,[y.value?(c(),d("div",ym,"...")):F("",!0),(c(!0),d(de,null,ve(u.value,le=>(c(),d("button",{key:le.ref,type:"button",class:"dropdown-item",onMousedown:ge(G=>T(le),["prevent"])},g(le.name),41,_m))),128))])):F("",!0)],2)]),e("div",$m,[e("div",km,[$[25]||($[25]=e("label",{class:"form-label-custom"},"",-1)),ue(e("input",{class:W(["form-control input-modern",{"is-invalid":t.errors.building}]),"onUpdate:modelValue":$[7]||($[7]=le=>n.building=le),placeholder:"10/"},null,2),[[he,n.building]])]),e("div",xm,[$[26]||($[26]=e("label",{class:"form-label-custom"},"./",-1)),ue(e("input",{class:"form-control input-modern","onUpdate:modelValue":$[8]||($[8]=le=>n.apartment=le),placeholder:"42"},null,512),[[he,n.apartment]])])])])),e("section",null,[$[29]||($[29]=e("label",{class:"form-label-custom"}," ",-1)),e("div",wm,[e("div",{class:W(["payer-option",{active:n.payer==="recipient"}]),onClick:$[9]||($[9]=le=>n.payer="recipient")},[...$[27]||($[27]=[e("i",{class:"bi bi-person"},null,-1),e("span",null,"",-1)])],2),e("div",{class:W(["payer-option",{active:n.payer==="sender"}]),onClick:$[10]||($[10]=le=>n.payer="sender")},[...$[28]||($[28]=[e("i",{class:"bi bi-shop"},null,-1),e("span",null,"",-1)])],2)])])])]))}},Ji=xe(Cm,[["__scopeId","data-v-35ae709f"]]),Sm={class:"container-fluid p-0 p-md-4"},Tm={class:"mx-auto",style:{"max-width":"1600px"}},Am={class:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-4 gap-3"},Om={class:"d-flex align-items-center gap-2 mb-1"},Pm={class:"h4 fw-bold text-dark m-0"},Mm={class:"d-flex align-items-center gap-2"},Im=["disabled"],Dm={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Um={key:1,class:"bi bi-check-lg"},jm={key:0,class:"py-5 text-center text-muted"},Fm={class:"row g-4"},Em={class:"col-12 col-lg-3"},Vm={class:"clean-card h-100"},Lm={class:"col-12 col-lg-4"},Nm={class:"clean-card h-100"},Rm={class:"col-12 col-lg-5"},qm={class:"clean-card h-100"},Bm={class:"col-12 col-lg-8"},Hm={class:"clean-card h-100"},zm={class:"card-title-section d-flex justify-content-between align-items-center mb-0 pb-3 border-bottom"},Wm={key:0,class:"badge bg-light text-dark border"},Km={class:"pt-3"},Gm={class:"col-12 col-lg-4"},Xm={class:"clean-card h-100"},Jm={key:2},Qm={class:"modal-dialog modal-dialog-centered modal-sm"},Ym={class:"modal-content border-0 shadow-lg rounded-4"},Zm={class:"modal-body text-center p-4"},ep={class:"d-grid gap-2"},tp=["disabled"],sp={key:0,class:"spinner-border spinner-border-sm me-1"},np={__name:"OrderCreatePage",props:{initialOrderId:{type:[String,Number],default:null}},setup(t){const s=S(!1),n=S(!1),l=S(!1),o=t,i=Me({customer:{first_name:"",last_name:"",phone:"",email:""},meta:{currency:"UAH",source:"site",status:"new",payment_status:"unpaid"},items:[],payment:{method:"cod",currency:"UAH",prepay_amount:0,note:""},delivery:{carrier:"nova_poshta",delivery_type:"warehouse",service_type:"",payer:"recipient",ttn:"",city_ref:"",settlement_ref:"",city_name:"",warehouse_ref:"",warehouse_name:"",street_name:"",street_ref:"",building:"",apartment:"",address_note:"",recipient_name:"",recipient_phone:""},tag_ids:[],comment_internal:""}),a=se(()=>({customer:i.customer,order:{...i.meta,comment_internal:i.comment_internal},items:i.items,payment:i.payment.method==="prepay"?i.payment:{...i.payment,prepay_amount:0},delivery:{...i.delivery,delivery_payer:i.delivery.payer},tag_ids:i.tag_ids})),r=se(()=>i.payment.method==="prepay"?Number(i.payment.prepay_amount||0):0);async function u(){s.value=!0;try{o.initialOrderId?await Bi(o.initialOrderId,a.value):await Ri(a.value),window.location.href="/orders"}catch(m){console.error("  :",m),alert("   .  .")}finally{s.value=!1,p()}}function h(){u()}function v(){l.value=!0}function p(){s.value||(l.value=!1)}async function f(){if(o.initialOrderId){n.value=!0;try{const{data:m}=await qi(o.initialOrderId),y=m?.data||m||{};Object.assign(i.customer,{first_name:y.customer?.first_name||"",last_name:y.customer?.last_name||"",phone:y.customer?.phone||"",email:y.customer?.email||""}),Object.assign(i.meta,{currency:y.currency||"UAH",source:y.source||"site",status:y.status||"new",payment_status:y.payment_status||"unpaid"}),i.items=(y.items||[]).map(P=>({id:P.id,product_id:P.product_id,product_variant_id:P.product_variant_id||null,sku:P.sku,title:P.product_title||P.title,size:P.size,qty:P.qty,price:P.price,total:P.total,imageUrl:P.product?.main_photo_path?`/storage/${P.product.main_photo_path}`:""}));const L=y.payment||{};Object.assign(i.payment,{method:L.method||"cod",prepay_amount:L.prepay_amount||0,currency:L.currency||y.currency||"UAH",note:L.note||""});const K=y.delivery||{};Object.assign(i.delivery,{carrier:K.carrier||"nova_poshta",delivery_type:K.delivery_type||"warehouse",service_type:K.service_type||"",payer:K.delivery_payer||K.payer||"recipient",ttn:K.ttn||"",city_ref:K.city_ref||"",city_name:K.city_name||K.city||"",warehouse_ref:K.warehouse_ref||"",warehouse_name:K.warehouse_name||K.warehouse||"",street_name:K.street_name||"",building:K.building||"",apartment:K.apartment||"",address_note:K.address_note||"",recipient_name:K.recipient_name||"",recipient_phone:K.recipient_phone||""}),i.tag_ids=(y.tags||[]).map(P=>P.id),i.comment_internal=y.comment_internal||""}catch(m){console.error("   ",m)}finally{n.value=!1}}}return o.initialOrderId&&f(),(m,y)=>(c(),d("div",Sm,[e("div",Tm,[e("div",Am,[e("div",null,[e("div",Om,[y[6]||(y[6]=e("a",{href:"/orders",class:"btn btn-icon-back text-muted p-0 me-2"},[e("i",{class:"bi bi-arrow-left fs-5"})],-1)),e("h1",Pm,g(t.initialOrderId?` #${t.initialOrderId}`:" "),1)])]),e("div",Mm,[y[7]||(y[7]=e("a",{href:"/orders",class:"btn btn-white border shadow-sm"},"  ",-1)),e("button",{class:"btn btn-primary-gradient shadow-sm d-flex align-items-center gap-2 px-4",type:"button",onClick:v,disabled:s.value},[s.value?(c(),d("span",Dm)):(c(),d("i",Um)),e("span",null,g(s.value?"":""),1)],8,Im)])]),n.value?(c(),d("div",jm,[...y[8]||(y[8]=[e("div",{class:"spinner-border text-primary mb-2"},null,-1),e("div",null," ...",-1)])])):(c(),d("form",{key:1,onSubmit:ge(v,["prevent"])},[e("div",Fm,[e("div",Em,[e("div",Vm,[y[9]||(y[9]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-sliders text-primary me-2"}),te("  ")],-1)),pe(Ki,{modelValue:i.meta,"onUpdate:modelValue":y[0]||(y[0]=L=>i.meta=L),tagIds:i.tag_ids,"onUpdate:tagIds":y[1]||(y[1]=L=>i.tag_ids=L)},null,8,["modelValue","tagIds"])])]),e("div",Lm,[e("div",Nm,[y[10]||(y[10]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-person text-purple me-2"}),te(" ")],-1)),pe(Hi,{modelValue:i.customer,"onUpdate:modelValue":y[2]||(y[2]=L=>i.customer=L)},null,8,["modelValue"])])]),e("div",Rm,[e("div",qm,[y[11]||(y[11]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-truck text-dark me-2"}),te(" ")],-1)),pe(Ji,{modelValue:i.delivery,"onUpdate:modelValue":y[3]||(y[3]=L=>i.delivery=L)},null,8,["modelValue"])])]),e("div",Bm,[e("div",Hm,[e("div",zm,[y[12]||(y[12]=e("span",null,[e("i",{class:"bi bi-box-seam text-warning me-2"}),te("")],-1)),i.items.length?(c(),d("span",Wm,g(i.items.length)+" . ",1)):F("",!0)]),e("div",Km,[pe(Gi,{modelValue:i.items,"onUpdate:modelValue":y[4]||(y[4]=L=>i.items=L),currency:i.meta.currency,"prepay-amount":r.value,"prepay-enabled":i.payment.method==="prepay"},null,8,["modelValue","currency","prepay-amount","prepay-enabled"])])])]),e("div",Gm,[e("div",Xm,[y[13]||(y[13]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-credit-card text-success me-2"}),te(" ")],-1)),pe(kl,{modelValue:i.payment,"onUpdate:modelValue":y[5]||(y[5]=L=>i.payment=L),currency:i.meta.currency},null,8,["modelValue","currency"])])])])],32)),l.value?(c(),d("div",Jm,[y[17]||(y[17]=e("div",{class:"modal-backdrop fade show bg-dark bg-opacity-50",style:{"backdrop-filter":"blur(4px)"}},null,-1)),e("div",{class:"modal fade show d-block",tabindex:"-1",onClick:ge(p,["self"])},[e("div",Qm,[e("div",Ym,[e("div",Zm,[y[14]||(y[14]=e("div",{class:"mb-3 d-inline-flex align-items-center justify-content-center rounded-circle bg-primary bg-opacity-10 text-primary",style:{width:"60px",height:"60px"}},[e("i",{class:"bi bi-save fs-2"})],-1)),y[15]||(y[15]=e("h5",{class:"mb-2 fw-bold"}," ?",-1)),y[16]||(y[16]=e("p",{class:"text-muted small mb-4"},"  .       . ",-1)),e("div",ep,[e("button",{type:"button",class:"btn btn-primary-gradient shadow-sm fw-bold",disabled:s.value,onClick:h},[s.value?(c(),d("span",sp)):F("",!0),te(" "+g(s.value?"...":", "),1)],8,tp),e("button",{type:"button",class:"btn btn-light text-muted fw-medium",onClick:p},"  ")])])])])])])):F("",!0)])]))}},lp=xe(np,[["__scopeId","data-v-ad092a1e"]]),op={class:"container-fluid p-0 p-md-4"},ip={class:"mx-auto",style:{"max-width":"1600px"}},ap={class:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-4 gap-3"},rp={class:"d-flex align-items-center gap-2 mb-1"},cp={class:"h4 fw-bold text-dark m-0"},dp={class:"d-flex align-items-center gap-2"},up=["disabled"],fp={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},mp={key:1,class:"bi bi-check-lg"},pp={key:0,class:"py-5 text-center text-muted"},vp={class:"row g-4"},bp={class:"col-12 col-lg-3"},gp={class:"clean-card h-100"},hp={class:"col-12 col-lg-4"},yp={class:"clean-card h-100"},_p={class:"col-12 col-lg-5"},$p={class:"clean-card h-100"},kp={class:"col-12 col-lg-8"},xp={class:"clean-card h-100"},wp={class:"card-title-section d-flex justify-content-between align-items-center mb-0 pb-3 border-bottom"},Cp={key:0,class:"badge bg-light text-dark border"},Sp={class:"pt-3"},Tp={class:"col-12 col-lg-4"},Ap={class:"clean-card h-100"},Op={key:2},Pp={class:"modal-dialog modal-dialog-centered modal-sm"},Mp={class:"modal-content border-0 shadow-lg rounded-4"},Ip={class:"modal-body text-center p-4"},Dp={class:"d-grid gap-2"},Up=["disabled"],jp={key:0,class:"spinner-border spinner-border-sm me-1"},Fp={__name:"OrderEditPage",props:{initialOrderId:{type:[String,Number],default:null}},setup(t){const s=S(!1),n=S(!1),l=S(!1),o=t,i=Me({customer:{first_name:"",last_name:"",phone:"",email:""},meta:{currency:"UAH",source:"site",status:"new",payment_status:"unpaid"},items:[],payment:{method:"cod",currency:"UAH",prepay_amount:0,note:""},delivery:{carrier:"nova_poshta",delivery_type:"warehouse",service_type:"",payer:"recipient",ttn:"",city_ref:"",settlement_ref:"",city_name:"",warehouse_ref:"",warehouse_name:"",street_name:"",street_ref:"",building:"",apartment:"",address_note:"",recipient_name:"",recipient_phone:""},tag_ids:[],comment_internal:""}),a=se(()=>({customer:i.customer,order:{...i.meta,comment_internal:i.comment_internal},items:i.items,payment:i.payment.method==="prepay"?i.payment:{...i.payment,prepay_amount:0},delivery:{...i.delivery,delivery_payer:i.delivery.payer},tag_ids:i.tag_ids})),r=se(()=>i.payment.method==="prepay"?Number(i.payment.prepay_amount||0):0);async function u(){s.value=!0;try{o.initialOrderId?await Bi(o.initialOrderId,a.value):await Ri(a.value),window.location.href="/orders"}catch(m){console.error("  :",m),alert("   .  ' .")}finally{s.value=!1,p()}}function h(){u()}function v(){l.value=!0}function p(){s.value||(l.value=!1)}async function f(){if(o.initialOrderId){n.value=!0;try{const{data:m}=await qi(o.initialOrderId),y=m?.data||m||{};Object.assign(i.customer,{first_name:y.customer?.first_name||"",last_name:y.customer?.last_name||"",phone:y.customer?.phone||"",email:y.customer?.email||""}),Object.assign(i.meta,{currency:y.currency||"UAH",source:y.source||"site",status:y.status||"new",payment_status:y.payment_status||"unpaid"}),i.items=(y.items||[]).map(P=>({id:P.id,product_id:P.product_id,product_variant_id:P.product_variant_id||null,sku:P.sku,title:P.product_title||P.title,size:P.size,qty:P.qty,price:P.price,total:P.total,imageUrl:P.product?.main_photo_path?`/storage/${P.product.main_photo_path}`:""}));const L=y.payment||{};Object.assign(i.payment,{method:L.method||"cod",prepay_amount:L.prepay_amount||0,currency:L.currency||y.currency||"UAH",note:L.note||""});const K=y.delivery||{};Object.assign(i.delivery,{carrier:K.carrier||"nova_poshta",delivery_type:K.delivery_type||"warehouse",service_type:K.service_type||"",payer:K.delivery_payer||"recipient",ttn:K.ttn||"",city_ref:K.city_ref||"",settlement_ref:K.settlement_ref||"",city_name:K.city_name||"",warehouse_ref:K.warehouse_ref||"",warehouse_name:K.warehouse_name||"",street_name:K.street_name||"",street_ref:K.street_ref||"",building:K.building||"",apartment:K.apartment||"",address_note:K.address_note||"",recipient_name:K.recipient_name||"",recipient_phone:K.recipient_phone||""}),i.tag_ids=(y.tags||[]).map(P=>P.id),i.comment_internal=y.comment_internal||""}catch(m){console.error("   ",m)}finally{n.value=!1}}}return o.initialOrderId&&f(),(m,y)=>(c(),d("div",op,[e("div",ip,[e("div",ap,[e("div",null,[e("div",rp,[y[6]||(y[6]=e("a",{href:"/orders",class:"btn btn-icon-back text-muted p-0 me-2"},[e("i",{class:"bi bi-arrow-left fs-5"})],-1)),e("h1",cp,g(t.initialOrderId?` #${t.initialOrderId}`:" "),1)]),y[7]||(y[7]=e("p",{class:"text-muted small mb-0 ms-4 ps-2"},"      .",-1))]),e("div",dp,[y[8]||(y[8]=e("a",{href:"/orders",class:"btn btn-white border shadow-sm"},"  ",-1)),e("button",{class:"btn btn-primary-gradient shadow-sm d-flex align-items-center gap-2 px-4",type:"button",onClick:v,disabled:s.value},[s.value?(c(),d("span",fp)):(c(),d("i",mp)),e("span",null,g(s.value?"":""),1)],8,up)])]),n.value?(c(),d("div",pp,[...y[9]||(y[9]=[e("div",{class:"spinner-border text-primary mb-2"},null,-1),e("div",null," ...",-1)])])):(c(),d("form",{key:1,onSubmit:ge(v,["prevent"])},[e("div",vp,[e("div",bp,[e("div",gp,[y[10]||(y[10]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-sliders text-primary me-2"}),te(" ")],-1)),pe(Ki,{modelValue:i.meta,"onUpdate:modelValue":y[0]||(y[0]=L=>i.meta=L),tagIds:i.tag_ids,"onUpdate:tagIds":y[1]||(y[1]=L=>i.tag_ids=L)},null,8,["modelValue","tagIds"])])]),e("div",hp,[e("div",yp,[y[11]||(y[11]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-person text-purple me-2"}),te(" ")],-1)),pe(Hi,{modelValue:i.customer,"onUpdate:modelValue":y[2]||(y[2]=L=>i.customer=L)},null,8,["modelValue"])])]),e("div",_p,[e("div",$p,[y[12]||(y[12]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-truck text-dark me-2"}),te(" ")],-1)),pe(Ji,{modelValue:i.delivery,"onUpdate:modelValue":y[3]||(y[3]=L=>i.delivery=L)},null,8,["modelValue"])])]),e("div",kp,[e("div",xp,[e("div",wp,[y[13]||(y[13]=e("span",null,[e("i",{class:"bi bi-box-seam text-warning me-2"}),te("")],-1)),i.items.length?(c(),d("span",Cp,g(i.items.length)+" . ",1)):F("",!0)]),e("div",Sp,[pe(Gi,{modelValue:i.items,"onUpdate:modelValue":y[4]||(y[4]=L=>i.items=L),currency:i.meta.currency,"prepay-amount":r.value,"prepay-enabled":i.payment.method==="prepay"},null,8,["modelValue","currency","prepay-amount","prepay-enabled"])])])]),e("div",Tp,[e("div",Ap,[y[14]||(y[14]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-credit-card text-success me-2"}),te(" ")],-1)),pe(kl,{modelValue:i.payment,"onUpdate:modelValue":y[5]||(y[5]=L=>i.payment=L),currency:i.meta.currency},null,8,["modelValue","currency"])])])])],32)),l.value?(c(),d("div",Op,[y[18]||(y[18]=e("div",{class:"modal-backdrop fade show bg-dark bg-opacity-50",style:{"backdrop-filter":"blur(4px)"}},null,-1)),e("div",{class:"modal fade show d-block",tabindex:"-1",onClick:ge(p,["self"])},[e("div",Pp,[e("div",Mp,[e("div",Ip,[y[15]||(y[15]=e("div",{class:"mb-3 d-inline-flex align-items-center justify-content-center rounded-circle bg-primary bg-opacity-10 text-primary",style:{width:"60px",height:"60px"}},[e("i",{class:"bi bi-save fs-2"})],-1)),y[16]||(y[16]=e("h5",{class:"mb-2 fw-bold"}," ?",-1)),y[17]||(y[17]=e("p",{class:"text-muted small mb-4"},"  .       . ",-1)),e("div",Dp,[e("button",{type:"button",class:"btn btn-primary-gradient shadow-sm fw-bold",disabled:s.value,onClick:h},[s.value?(c(),d("span",jp)):F("",!0),te(" "+g(s.value?"...":", "),1)],8,Up),e("button",{type:"button",class:"btn btn-light text-muted fw-medium",onClick:p},"  ")])])])])])])):F("",!0)])]))}},Ep=xe(Fp,[["__scopeId","data-v-6b4514a2"]]),Vp={new:"",confirmed:"",pending:" ",in_process:" ",packed:"",delivered:"",returned:"",in_progress:" ",done:"",completed:"",cancelled:"",shipped:""},Lp={paid:"",unpaid:" ",prepaid:"",prepayment:"",refund:""},Np={pending:"#fcd5b5",in_process:"#c7f2d4",in_progress:"#c7f2d4",confirmed:"#b2ecf7",packed:"#e4e6e9",shipped:"#dcd9ff",delivered:"#c6f1d4",cancelled:"#e4e6e9",canceled:"#e4e6e9",returned:"#ffd6d6"};function Rp(t){return{new:"bg-warning-subtle text-warning-emphasis border-warning-subtle",in_process:"bg-success-subtle text-success-emphasis border-success-subtle",confirmed:"bg-info-subtle text-info-emphasis border-info-subtle",in_progress:"bg-primary-subtle text-primary-emphasis border-primary-subtle",in_work:"bg-primary-subtle text-primary-emphasis border-primary-subtle",pending:"bg-warning-subtle text-warning-emphasis border-warning-subtle",packed:"bg-secondary-subtle text-secondary-emphasis border-secondary-subtle",delivered:"bg-success-subtle text-success-emphasis border-success-subtle",completed:"bg-success-subtle text-success-emphasis border-success-subtle",done:"bg-success-subtle text-success-emphasis border-success-subtle",cancelled:"bg-secondary-subtle text-secondary-emphasis border-secondary-subtle",canceled:"bg-secondary-subtle text-secondary-emphasis border-secondary-subtle",shipped:"bg-indigo-subtle text-indigo-emphasis border-indigo-subtle",returned:"bg-danger-subtle text-danger-emphasis border-danger-subtle"}[t]||"bg-light text-dark border-light-subtle"}function qp(t){const s=String(t).trim(),n=s.match(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/);if(n){const l=n[1],i=`#${l.length===3?l.split("").map(a=>a+a).join(""):l}`;return{color:i,backgroundColor:`${i}1F`,borderColor:`${i}40`}}return{color:s,backgroundColor:s,borderColor:s}}function Qi(t){if(t?.status_color)return qp(t.status_color);const s=Np[t?.status_key];return s?{backgroundColor:s,borderColor:s,color:"#0f172a"}:{}}function Bp(t){return{new:"bi-circle",confirmed:"bi-check-circle",pending:"bi-hourglass-split",packed:"bi-box-seam",delivered:"bi-bag-check",in_progress:"bi-hourglass-split",in_work:"bi-hourglass-split",done:"bi-check2-circle",completed:"bi-check2-circle",canceled:"bi-x-circle",cancelled:"bi-x-circle",shipped:"bi-truck"}[t]||"bi-dot"}function Hp(t){return{paid:"bg-success-subtle text-success-emphasis border-success-subtle",unpaid:"bg-danger-subtle text-danger-emphasis border-danger-subtle",prepayment:"bg-warning-subtle text-warning-emphasis border-warning-subtle",refund:"bg-dark-subtle text-dark-emphasis border-dark-subtle"}[t]||"bg-light text-dark border-light-subtle"}function zp(t){return{paid:"bi-check-circle",unpaid:"bi-x-circle",prepayment:"bi-cash-stack",refund:"bi-arrow-counterclockwise"}[t]||"bi-dot"}function nt(t,s="UAH"){return Number(t??0).toLocaleString("uk-UA",{style:"currency",currency:s})}function Ds(t){if(!t)return"";try{return new Date(t).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}}function Wp(t){if(!t)return"";if(t.startsWith("http"))return t;let s=t.replace(/^\//,"");return s.startsWith("public/")&&(s=s.replace(/^public\//,"")),s.startsWith("storage/")?`/${s}`:`/storage/${s}`}function Kp(t,s="sell"){return _e.post(`/api/orders/${t}/fiscalize`,{type:s})}function Gp(t){return _e.post(`/api/orders/${t}/refund`)}function Xp(t){return _e.get(`/api/orders/${t}/fiscal-status`)}const Jp={class:"fiscal-card-modern h-100"},Qp={class:"card-header-modern"},Yp={class:"d-flex align-items-center gap-2"},Zp={class:"d-flex flex-column",style:{"line-height":"1"}},ev={key:0,class:"header-date"},tv={class:"card-body-modern"},sv={class:"d-flex justify-content-between align-items-center mb-1"},nv={class:"amount-large"},lv={class:"progress-container mb-1"},ov={class:"progress-track"},iv={class:"progress-label"},av={class:"d-flex justify-content-between align-items-center text-xs mt-1"},rv={class:"d-flex align-items-center gap-1 text-success fw-medium"},cv={key:0,class:"text-danger fw-bold"},dv={key:0,class:"receipts-list"},uv={class:"d-flex align-items-center gap-2"},fv={class:"d-flex flex-column",style:{"line-height":"1.1"}},mv={class:"receipt-amount"},pv={class:"receipt-time"},vv=["href"],bv={key:0,class:"error-box"},gv={class:"actions-grid mt-auto pt-2"},hv=["disabled"],yv={class:"d-flex align-items-center gap-2"},_v={class:"d-flex flex-column align-items-start lh-1"},$v={class:"btn-value"},kv=["disabled"],xv={class:"d-flex align-items-center gap-2"},wv={class:"d-flex flex-column align-items-start lh-1"},Cv={class:"btn-label"},Sv={class:"btn-value"},Tv={key:2,class:"d-flex gap-1 w-100"},Av=["disabled"],Ov={key:1,class:"btn-modern btn-loading flex-grow-1",disabled:""},Pv={class:"fiscal-confirm-card"},Mv={class:"fw-bold mb-2"},Iv={class:"confirm-amount"},Dv={class:"amount-large"},Uv={class:"d-flex justify-content-end gap-2 mt-3"},jv=["disabled"],Fv={key:0},Ev={key:1,class:"spinner-border spinner-border-sm"},Vv={__name:"FiscalBlock",props:{orderId:{type:[Number,String],required:!0},receipt:{type:Object,default:null},prepayAmount:{type:[Number,String],default:0},totalAmount:{type:[Number,String],default:0}},setup(t){const s=t,n=Me({receipt:s.receipt,loading:!1,error:""});let l=null;const o=se(()=>n.receipt?.status||"absent"),i=se(()=>["pending","processing"].includes(o.value));se(()=>n.loading);const a=se(()=>n.receipt?.total_order_cents?Number(n.receipt.total_order_cents)/100:parseFloat(s.totalAmount)||0),r=se(()=>n.receipt?.all_success_receipts||[]),u=se(()=>r.value.length>0?r.value.reduce((G,z)=>G+Number(z.amount),0):n.receipt?.already_paid_cents!==void 0?Number(n.receipt.already_paid_cents)/100:o.value==="success"&&n.receipt?.total_amount?Number(n.receipt.total_amount)/100:0),h=se(()=>{const G=a.value-u.value;return G>.05?G:0}),v=se(()=>{if(a.value<=0)return 0;let G=u.value/a.value*100;return Math.min(G,100)}),p=se(()=>h.value<=0&&a.value>0),f=se(()=>parseFloat(s.prepayAmount)||0),m=se(()=>f.value>0&&u.value<.01&&!i.value),y=se(()=>h.value>.05&&!i.value),L=se(()=>u.value>0&&n.receipt?.type!=="return"&&!i.value),K=se(()=>n.loading||i.value),P=se(()=>n.error||n.receipt?.error_message||""),H=se(()=>{const G=r.value[r.value.length-1];return D(G?.created_at||n.receipt?.created_at)}),E=se(()=>p.value?"":{success:"",processing:"...",pending:" ...",error:"",absent:" "}[o.value]||o.value),I=se(()=>p.value?"bi-check-all":o.value==="success"?"bi-check-circle-fill":i.value?"bi-hourglass-split":o.value==="error"?"bi-exclamation-diamond-fill":"bi-circle"),V=se(()=>p.value?"status-success":`status-${o.value}`),Q=S(!1),ee=S("sell"),B=se(()=>K.value),T=se(()=>ee.value==="prepay"?" ?":"  ?"),k=se(()=>ee.value==="prepay"?f.value:h.value);function _(G){return Number(G).toLocaleString("uk-UA",{minimumFractionDigits:2,maximumFractionDigits:2})}function D(G){return G?Ds(G):""}function q(G){return G?new Date(G).toLocaleTimeString("uk-UA",{hour:"2-digit",minute:"2-digit"}):""}async function M(G="sell"){if(!n.loading){n.loading=!0,n.error="";try{const z=G==="return"?Gp(s.orderId):Kp(s.orderId,G),{data:fe}=await z;n.receipt=fe,$()}catch(z){n.error=z.response?.data?.message||z.message||" API"}finally{n.loading=!1}}}function Y(G){ee.value=G,Q.value=!0}function Z(){B.value||(Q.value=!1)}async function U(){await M(ee.value),Q.value=!1}async function O(){try{const{data:G}=await Xp(s.orderId);n.receipt=G,i.value||le()}catch(G){console.error("Polling error:",G)}}function $(){le(),l=setInterval(O,2e3)}function le(){l&&(clearInterval(l),l=null)}return Se(()=>s.receipt,G=>{n.receipt=G,i.value&&$()}),Re(()=>{O()}),bn(le),(G,z)=>(c(),d(de,null,[e("div",Jp,[e("div",Qp,[e("div",Yp,[e("div",{class:W(["status-indicator-ring",V.value])},[...z[3]||(z[3]=[e("div",{class:"status-dot"},null,-1)])],2),e("div",Zp,[z[4]||(z[4]=e("span",{class:"header-title"},"",-1)),H.value?(c(),d("span",ev,g(H.value),1)):F("",!0)])]),e("div",{class:W(["status-badge-pill",V.value])},[e("i",{class:W(["bi",I.value])},null,2),e("span",null,g(E.value),1)],2)]),e("div",tv,[e("div",{class:W(["summary-block",{"is-complete":p.value}])},[e("div",sv,[z[6]||(z[6]=e("span",{class:"label-muted"}," ",-1)),e("span",nv,[te(g(_(a.value))+" ",1),z[5]||(z[5]=e("small",null,"",-1))])]),e("div",lv,[e("div",ov,[e("div",{class:W(["progress-fill",p.value?"bg-success-gradient":"bg-primary-gradient"]),style:Te({width:v.value+"%"})},null,6)]),e("div",iv,g(v.value.toFixed(0))+"%",1)]),e("div",av,[e("div",rv,[z[7]||(z[7]=e("i",{class:"bi bi-check2-circle"},null,-1)),e("span",null,": "+g(_(u.value)),1)]),p.value?F("",!0):(c(),d("div",cv," : "+g(_(h.value)),1))])],2),r.value.length?(c(),d("div",dv,[(c(!0),d(de,null,ve(r.value,fe=>(c(),d("div",{key:fe.id,class:"receipt-item"},[e("div",uv,[z[9]||(z[9]=e("div",{class:"icon-circle bg-success-subtle text-success"},[e("i",{class:"bi bi-receipt"})],-1)),e("div",fv,[e("span",mv,[te(g(_(fe.amount))+" ",1),z[8]||(z[8]=e("small",{class:"text-muted"},"",-1))]),e("span",pv,g(q(fe.created_at)),1)])]),fe.link?(c(),d("a",{key:0,class:"btn-view-receipt",href:fe.link,target:"_blank",title:" "},[...z[10]||(z[10]=[e("i",{class:"bi bi-arrow-up-right"},null,-1)])],8,vv)):F("",!0)]))),128))])):F("",!0),pe(Fe,{name:"fade"},{default:Oe(()=>[P.value?(c(),d("div",bv,[z[11]||(z[11]=e("i",{class:"bi bi-exclamation-triangle-fill flex-shrink-0"},null,-1)),e("span",null,g(P.value),1)])):F("",!0)]),_:1}),e("div",gv,[m.value?(c(),d("button",{key:0,class:"btn-modern btn-prepay",disabled:K.value,onClick:z[0]||(z[0]=fe=>Y("prepay"))},[e("div",yv,[z[13]||(z[13]=e("i",{class:"bi bi-wallet2"},null,-1)),e("div",_v,[z[12]||(z[12]=e("span",{class:"btn-label"},"",-1)),e("span",$v,g(_(f.value)),1)])])],8,hv)):F("",!0),y.value?(c(),d("button",{key:1,class:"btn-modern btn-main",disabled:K.value,onClick:z[1]||(z[1]=fe=>Y("sell"))},[e("div",xv,[z[14]||(z[14]=e("i",{class:"bi bi-printer"},null,-1)),e("div",wv,[e("span",Cv,g(u.value>.01?"":" "),1),e("span",Sv,g(_(h.value)),1)])])],8,kv)):F("",!0),L.value||i.value?(c(),d("div",Tv,[L.value?(c(),d("button",{key:0,class:"btn-modern btn-refund flex-grow-1",disabled:K.value,onClick:z[2]||(z[2]=fe=>Y("return"))},[...z[15]||(z[15]=[e("i",{class:"bi bi-arrow-counterclockwise"},null,-1),e("span",null,"",-1)])],8,Av)):F("",!0),i.value?(c(),d("button",Ov,[...z[16]||(z[16]=[e("i",{class:"bi bi-arrow-repeat spin-icon"},null,-1),e("span",null,"...",-1)])])):F("",!0)])):F("",!0)])])]),(c(),Ne(Ct,{to:"body"},[Q.value?(c(),d("div",{key:0,class:"fiscal-confirm-overlay",onClick:ge(Z,["self"])},[e("div",Pv,[e("h5",Mv,g(T.value),1),z[19]||(z[19]=e("p",{class:"text-muted small mb-3"},"  .     . ",-1)),e("div",Iv,[z[18]||(z[18]=e("span",{class:"label-muted"},":",-1)),e("span",Dv,[te(g(_(k.value))+" ",1),z[17]||(z[17]=e("small",null,"",-1))])]),e("div",Uv,[e("button",{class:"btn btn-light",type:"button",onClick:Z},""),e("button",{class:"btn btn-danger",type:"button",disabled:B.value,onClick:U},[B.value?(c(),d("span",Ev)):(c(),d("span",Fv,", "))],8,jv)])])])):F("",!0)]))],64))}},Lv=xe(Vv,[["__scopeId","data-v-a19f6a6c"]]),Nv={class:"details-wrapper"},Rv={class:"order-summary-bar"},qv={class:"order-summary-left"},Bv={class:"order-id-line"},Hv={class:"summary-number font-monospace"},zv={class:"order-meta-line"},Wv={class:"meta-item"},Kv={class:"order-summary-right"},Gv={key:1,class:"status-dot"},Xv={class:"status-label"},Jv={class:"order-tags-bar"},Qv={class:"tags-col"},Yv={class:"tags-wrapper"},Zv={class:"notes-col"},eb={class:"notes-row"},tb=["onKeydown"],sb=["disabled"],nb={class:"row gx-3 gy-3 mt-1 mt-md-2"},lb={class:"col-12 col-lg-4"},ob={class:"panel-card h-100"},ib={class:"panel-section"},ab={class:"client-card"},rb={class:"avatar-box"},cb={class:"overflow-hidden"},db={class:"fw-bold text-dark text-truncate client-name"},ub={class:"contact-list"},fb={class:"contact-item phone-row"},mb={class:"d-flex align-items-center gap-2"},pb={class:"font-monospace fw-medium text-dark"},vb={class:"d-flex align-items-center"},bb={key:0,class:"copy-feedback"},gb={key:0,class:"social-row mt-1"},hb=["href"],yb=["href"],_b={key:1,class:"contact-item"},$b={class:"text-truncate"},kb={key:0,class:"comment-box mt-2"},xb={class:"fst-italic text-dark small comment-text"},wb={class:"panel-section"},Cb={class:"section-header"},Sb={class:"d-flex align-items-center gap-2"},Tb={class:"carrier-badge"},Ab={class:"delivery-status-box mb-2"},Ob={class:"d-flex justify-content-between align-items-center mb-1"},Pb={class:"fw-bold delivery-status-text"},Mb=["disabled"],Ib={key:0,class:"extra-small text-muted"},Db={class:"address-block"},Ub={class:"copy-anchor"},jb={key:0,class:"copy-toast-bubble"},Fb={class:"address-row"},Eb={class:"text-dark fw-medium"},Vb={class:"address-row align-items-start"},Lb={class:"text-secondary small"},Nb={key:0,class:"address-row align-items-start"},Rb={class:"text-secondary small"},qb={key:0},Bb={key:1},Hb={class:"address-row mt-2 pt-2 border-top"},zb={class:"text-dark small fw-bold"},Wb={class:"address-row"},Kb={class:"text-dark small fw-bold"},Gb={class:"ttn-section mt-3"},Xb={class:"ttn-display"},Jb={class:"font-monospace fw-bold text-dark flex-grow-1 text-center ttn-number"},Qb={class:"d-flex gap-2"},Yb=["disabled"],Zb=["disabled"],eg={key:0,class:"spinner-border spinner-border-sm me-2"},tg={key:1,class:"bi bi-magic me-2"},sg={class:"col-12 col-lg-8"},ng={class:"panel-card h-100 p-0 d-flex flex-column"},lg={class:"products-header d-flex justify-content-between align-items-center border-bottom"},og={class:"badge bg-secondary bg-opacity-10 text-secondary count-badge"},ig={class:"table-responsive"},ag={class:"table align-middle mb-0 clean-table"},rg={class:"ps-3 ps-md-4"},cg={class:"product-thumb-lg"},dg=["src"],ug={key:1,class:"bi bi-image text-muted fs-6"},fg={class:"fw-bold text-dark text-break item-sku"},mg={class:"small text-muted text-break item-title"},pg={class:"text-center"},vg={key:0,class:"badge bg-light text-dark border fw-normal size-badge"},bg={key:1,class:"text-muted small"},gg={class:"text-center fw-bold text-dark small"},hg={class:"text-end text-muted small"},yg={class:"text-end fw-bold pe-3 pe-md-4 text-dark small"},_g={class:"products-footer mt-auto"},$g={class:"fiscal-block-wrapper"},kg={class:"fiscal-scale"},xg={class:"totals-wrapper"},wg={class:"calc-group"},Cg={class:"calc-row"},Sg={class:"fw-bold text-dark value-small"},Tg={key:0,class:"calc-row mt-1"},Ag={class:"fw-bold text-success value-small"},Og={class:"total-box mt-2"},Pg={class:"d-flex justify-content-between align-items-end w-100"},Mg={class:"total-amount text-primary fw-800 lh-1"},Ig={__name:"OrderDetails",props:{order:{type:Object,required:!0}},emits:["open-tags","open-statuses","copy-ttn","generate-ttn","print-ttn","cancel-ttn","refresh-delivery","save-comment"],setup(t,{emit:s}){const n=t,l=s,o=S(n.order.comment||""),i=se(()=>{const f=(n.order.comment||"").trim(),m=(o.value||"").trim();return f!==m}),a=()=>{const f=(o.value||"").trim();l("save-comment",f===""?null:f)};Se(()=>n.order.comment,f=>{o.value=f||""});const r=S(!1),u=S(!1),h=se(()=>(n.order.phone||"").replace(/\D/g,"")),v=async()=>{if(n.order.phone)try{await navigator.clipboard.writeText(n.order.phone),r.value=!0,setTimeout(()=>{r.value=!1},2e3)}catch(f){console.error("Failed to copy",f)}},p=async()=>{const f=n.order.city_name||"",m=n.order.address||"",y=[f,m].filter(Boolean).join(`
`).trim();if(y)try{await navigator.clipboard.writeText(y),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch(L){console.error("Failed to copy address",L)}};return(f,m)=>(c(),d("div",Nv,[e("div",Rv,[e("div",qv,[e("div",Bv,[m[9]||(m[9]=e("span",{class:"summary-label"},"",-1)),e("span",Hv,"#"+g(t.order.order_number),1)]),e("div",zv,[e("span",Wv,[m[10]||(m[10]=e("i",{class:"bi bi-clock-history me-1 text-muted"},null,-1)),te(" "+g(Ae(Ds)(t.order.created_at)),1)]),t.order.source_name?(c(),d("span",{key:0,class:"meta-item source-pill",style:Te(t.order.source_color?{color:t.order.source_color,borderColor:t.order.source_color+"40",backgroundColor:t.order.source_color+"10"}:{})},[t.order.source_icon?(c(),d("i",{key:0,class:W([t.order.source_icon,"me-1"])},null,2)):F("",!0),te(" "+g(t.order.source_name),1)],4)):F("",!0)])]),e("div",Kv,[e("button",{class:"status-pill-btn",style:Te(Ae(Qi)(t.order)),onClick:m[0]||(m[0]=ge(y=>f.$emit("open-statuses"),["prevent","stop"]))},[t.order.status_icon?(c(),d("i",{key:0,class:W([t.order.status_icon,"me-1"])},null,2)):(c(),d("span",Gv)),e("span",Xv,g(t.order.status),1),m[11]||(m[11]=e("i",{class:"bi bi-chevron-down ms-1 opacity-50",style:{"font-size":"0.75em"}},null,-1))],4),e("span",{class:W(["payment-pill",Ae(Hp)(t.order.payment_status)])},[e("i",{class:W(["bi me-1",Ae(zp)(t.order.payment_status)])},null,2),te(" "+g(t.order.payment_status_label),1)],2)])]),e("div",Jv,[e("div",Qv,[m[13]||(m[13]=e("span",{class:"label-text"},"",-1)),e("div",Yv,[(c(!0),d(de,null,ve(t.order.tags,y=>(c(),d("span",{key:y.id,class:W(["tag-chip","tag-"+y.color])},[e("i",{class:W("bi "+y.icon)},null,2),te(" "+g(y.name),1)],2))),128)),e("button",{class:"btn-add-tag",onClick:m[1]||(m[1]=ge(y=>f.$emit("open-tags"),["stop"]))},[...m[12]||(m[12]=[e("i",{class:"bi bi-plus-lg me-1"},null,-1),te("  ",-1)])])])]),e("div",Zv,[m[14]||(m[14]=e("span",{class:"label-text"},"",-1)),e("div",eb,[ue(e("input",{"onUpdate:modelValue":m[2]||(m[2]=y=>o.value=y),class:"note-input",type:"text",placeholder:"  ...",onClick:m[3]||(m[3]=ge(()=>{},["stop"])),onKeydown:$l(ge(a,["stop","prevent"]),["enter"])},null,40,tb),[[he,o.value]]),e("button",{class:"btn-save-note",type:"button",disabled:!i.value,onClick:ge(a,["stop"])}," OK ",8,sb)])])]),e("div",nb,[e("div",lb,[e("div",ob,[e("div",ib,[m[22]||(m[22]=Fs('<div class="section-header" data-v-41b5dfd3><div class="d-flex align-items-center gap-2" data-v-41b5dfd3><span class="section-title" data-v-41b5dfd3></span></div><button class="btn-icon-soft" title=" " data-v-41b5dfd3><i class="bi bi-box-arrow-up-right" data-v-41b5dfd3></i></button></div>',1)),e("div",ab,[e("div",rb,g(t.order.client?t.order.client.charAt(0).toUpperCase():"?"),1),e("div",cb,[e("div",db,g(t.order.client||""),1),m[15]||(m[15]=e("div",{class:"small text-muted",style:{"font-size":"0.75rem"}},"",-1))])]),e("div",ub,[e("div",fb,[e("div",mb,[m[16]||(m[16]=e("i",{class:"bi bi-telephone"},null,-1)),e("span",pb,g(t.order.phone||""),1)]),e("div",vb,[r.value?(c(),d("span",bb,"!")):F("",!0),e("button",{class:"btn-copy-sm",onClick:v,title:" "},[...m[17]||(m[17]=[e("i",{class:"bi bi-clipboard"},null,-1)])])])]),t.order.phone?(c(),d("div",gb,[e("a",{href:`viber://chat?number=%2B${h.value}`,class:"btn-social btn-viber",target:"_blank"},[...m[18]||(m[18]=[e("i",{class:"bi bi-telephone-fill"},null,-1),te(" Viber ",-1)])],8,hb),e("a",{href:`tg://resolve?phone=${h.value}`,class:"btn-social btn-telegram"},[...m[19]||(m[19]=[e("i",{class:"bi bi-telegram"},null,-1),te(" Telegram ",-1)])],8,yb)])):F("",!0),t.order.email?(c(),d("div",_b,[m[20]||(m[20]=e("i",{class:"bi bi-envelope"},null,-1)),e("span",$b,g(t.order.email),1)])):F("",!0)]),t.order.comment?(c(),d("div",kb,[m[21]||(m[21]=e("i",{class:"bi bi-chat-left-text-fill text-warning me-2 mt-1"},null,-1)),e("span",xb,g(t.order.comment),1)])):F("",!0)]),m[37]||(m[37]=e("div",{class:"section-divider"},null,-1)),e("div",wb,[e("div",Cb,[e("div",Sb,[m[24]||(m[24]=e("span",{class:"section-title"},"",-1)),e("span",Tb,[m[23]||(m[23]=e("i",{class:"bi bi-truck me-1"},null,-1)),te(" "+g(t.order.delivery_carrier||""),1)])])]),e("div",Ab,[e("div",Ob,[e("div",{class:"d-flex align-items-center gap-2",style:Te({color:t.order.delivery_status_color||"#64748b"})},[t.order.delivery_status_icon?(c(),d("i",{key:0,class:W(["bi",t.order.delivery_status_icon])},null,2)):F("",!0),e("span",Pb,g(t.order.delivery_status||" "),1)],4),e("button",{class:"btn-refresh",disabled:t.order.refreshingDelivery,onClick:m[4]||(m[4]=ge(y=>f.$emit("refresh-delivery"),["stop"])),title:""},[e("i",{class:W(["bi bi-arrow-clockwise",{spin:t.order.refreshingDelivery}])},null,2)],8,Mb)]),t.order.delivery_status_updated_at?(c(),d("div",Ib," : "+g(Ae(Ds)(t.order.delivery_status_updated_at)),1)):F("",!0)]),e("div",Db,[e("div",Ub,[e("button",{class:"btn-copy-icon",type:"button",onClick:p,title:" "},[...m[25]||(m[25]=[e("i",{class:"bi bi-clipboard"},null,-1)])]),pe(Fe,{name:"fade-pop"},{default:Oe(()=>[u.value?(c(),d("span",jb,"")):F("",!0)]),_:1})]),e("div",Fb,[m[26]||(m[26]=e("i",{class:"bi bi-geo-alt-fill text-muted"},null,-1)),e("span",Eb,g(t.order.city_name||""),1)]),e("div",Vb,[m[27]||(m[27]=e("i",{class:"bi bi-building text-muted mt-1"},null,-1)),e("span",Lb,g(t.order.address||""),1)]),t.order.delivery_type==="courier"?(c(),d("div",Nb,[m[29]||(m[29]=e("i",{class:"bi bi-house-door text-muted mt-1"},null,-1)),e("span",Rb,[m[28]||(m[28]=te("   ",-1)),t.order.building?(c(),d("span",qb,"  . "+g(t.order.building),1)):F("",!0),t.order.apartment?(c(),d("span",Bb,", . "+g(t.order.apartment),1)):F("",!0)])])):F("",!0),e("div",Hb,[m[30]||(m[30]=e("span",{class:"text-muted small me-1"},":",-1)),e("span",zb,g(t.order.delivery_payer||""),1)]),e("div",Wb,[m[31]||(m[31]=e("span",{class:"text-muted small me-1"}," :",-1)),e("span",Kb,g(t.order.payment_method_label||""),1)])]),e("div",Gb,[t.order.ttn?(c(),d(de,{key:0},[e("div",Xb,[m[33]||(m[33]=e("i",{class:"bi bi-upc-scan text-muted ms-2"},null,-1)),e("span",Jb,g(t.order.ttn),1),e("button",{class:"btn-copy",onClick:m[5]||(m[5]=ge(y=>f.$emit("copy-ttn"),["stop"]))},[...m[32]||(m[32]=[e("i",{class:"bi bi-clipboard"},null,-1)])])]),e("div",Qb,[e("button",{class:"btn-action-light flex-grow-1",onClick:m[6]||(m[6]=ge(y=>f.$emit("print-ttn"),["stop"]))},[...m[34]||(m[34]=[e("i",{class:"bi bi-printer"},null,-1),te("  ",-1)])]),e("button",{class:"btn-action-light text-danger flex-grow-1",onClick:m[7]||(m[7]=ge(y=>f.$emit("cancel-ttn"),["stop"])),disabled:t.order.loadingTtn},[...m[35]||(m[35]=[e("i",{class:"bi bi-trash"},null,-1),te("  ",-1)])],8,Yb)])],64)):(c(),d("button",{key:1,class:"btn-create-ttn",onClick:m[8]||(m[8]=ge(y=>f.$emit("generate-ttn"),["stop"])),disabled:t.order.loadingTtn},[t.order.loadingTtn?(c(),d("span",eg)):(c(),d("i",tg)),m[36]||(m[36]=te("   ",-1))],8,Zb))])])])]),e("div",sg,[e("div",ng,[e("div",lg,[m[38]||(m[38]=e("div",{class:"d-flex align-items-center gap-2"},[e("i",{class:"bi bi-bag-check text-primary"}),e("span",{class:"products-title"},"")],-1)),e("span",og,g(t.order.items?.length||0)+" . ",1)]),e("div",ig,[e("table",ag,[m[39]||(m[39]=e("thead",null,[e("tr",null,[e("th",{class:"ps-3 ps-md-4",style:{width:"56px"}},""),e("th",{style:{"min-width":"160px"}},""),e("th",{class:"text-center"},""),e("th",{class:"text-center"},"-"),e("th",{class:"text-end"},""),e("th",{class:"text-end pe-3 pe-md-4"},"")])],-1)),e("tbody",null,[(c(!0),d(de,null,ve(t.order.items,y=>(c(),d("tr",{key:y.id},[e("td",rg,[e("div",cg,[y.photo?(c(),d("img",{key:0,src:y.photo,alt:"product"},null,8,dg)):(c(),d("i",ug))])]),e("td",null,[e("div",fg,g(y.sku),1),e("div",mg,g(y.title),1)]),e("td",pg,[y.size?(c(),d("span",vg,g(y.size),1)):(c(),d("span",bg,""))]),e("td",gg,g(y.qty),1),e("td",hg,g(Ae(nt)(y.price,t.order.currency)),1),e("td",yg,g(Ae(nt)(y.total,t.order.currency)),1)]))),128))])])]),e("div",_g,[e("div",$g,[m[40]||(m[40]=e("div",{class:"sub-section-header"},[e("span",{class:"sub-section-title"},[e("i",{class:"bi bi-receipt-cutoff me-2"}),te(" ")])],-1)),e("div",kg,[pe(Lv,{"order-id":t.order.id,receipt:t.order.latestFiscalReceipt,"prepay-amount":t.order.prepay_amount,"total-amount":t.order.total},null,8,["order-id","receipt","prepay-amount","total-amount"])])]),e("div",xg,[m[44]||(m[44]=e("div",{class:"sub-section-header"},[e("span",{class:"sub-section-title"},[e("i",{class:"bi bi-calculator me-2"}),te(" ")])],-1)),e("div",wg,[e("div",Cg,[m[41]||(m[41]=e("span",{class:"text-muted label-small"}," ",-1)),e("span",Sg,g(Ae(nt)(t.order.total,t.order.currency)),1)]),t.order.prepay_amount?(c(),d("div",Tg,[m[42]||(m[42]=e("span",{class:"text-success label-small d-flex align-items-center"},[e("i",{class:"bi bi-check-all me-1"}),te(" ")],-1)),e("span",Ag," -"+g(Ae(nt)(t.order.prepay_amount,t.order.currency)),1)])):F("",!0)]),e("div",Og,[e("div",Pg,[m[43]||(m[43]=e("span",{class:"total-label text-muted text-uppercase fw-bold"},"   ",-1)),e("span",Mg,g(Ae(nt)(Math.max(0,t.order.total-(t.order.prepay_amount||0)),t.order.currency)),1)])])])])])])])]))}},Dg=xe(Ig,[["__scopeId","data-v-41b5dfd3"]]),Ug={key:0,class:"d-flex flex-column align-items-center justify-content-center p-5 text-muted"},jg={key:1,class:"empty-state p-5 text-center"},Fg={key:2,class:"orders-container"},Eg={class:"table-responsive-wrapper"},Vg={class:"table align-middle orders-table mb-0"},Lg=["onClick"],Ng={class:"text-center ps-3 cell-expand"},Rg={class:"cell-id"},qg={class:"order-id"},Bg={class:"cell-client"},Hg={class:"d-flex flex-column justify-content-center mobile-align-start",style:{"min-height":"40px"}},zg={class:"d-flex align-items-center gap-2 mb-1"},Wg=["title","onClick"],Kg=["title"],Gg={class:"cell-tags"},Xg={class:"tags-wrapper"},Jg=["title"],Qg={class:"cell-phone"},Yg={class:"phone-text"},Zg={key:0,class:"comment-snippet"},eh={class:"cell-status"},th={class:"cell-products"},sh={class:"product-stack hover-fan"},nh=["src"],lh={key:1,class:"no-photo"},oh={key:0,class:"product-more"},ih={class:"text-end pe-3 cell-fiscal"},ah=["href"],rh={class:"d-flex align-items-center justify-content-between w-100 gap-2"},ch={class:"widget-price"},dh=["href"],uh={class:"d-flex align-items-center justify-content-between w-100 gap-2"},fh={class:"widget-price"},mh=["href"],ph={class:"d-flex align-items-center justify-content-between w-100 gap-2"},vh={class:"widget-price"},bh=["href"],gh={class:"d-flex align-items-center justify-content-between w-100 gap-2"},hh={class:"widget-price"},yh=["onClick"],_h={class:"d-flex align-items-center justify-content-between w-100 gap-2"},$h={class:"widget-price"},kh={class:"widget-label"},xh={class:"cell-delivery"},wh={key:0,class:"delivery-widget"},Ch={class:"d-flex align-items-center gap-2 mb-1"},Sh=["title"],Th=["onClick"],Ah={class:"ttn-number"},Oh=["onClick"],Ph={class:"cell-date"},Mh={class:"date-wrapper"},Ih={class:"date-text"},Dh={class:"alert-icon"},Uh={class:"alert-content"},jh={class:"days-num"},Fh={class:"text-end pe-3 cell-actions"},Eh={class:"dropdown-menu dropdown-menu-end border-0 shadow-lg p-2 rounded-3 animate slideIn"},Vh=["href"],Lh=["disabled","onClick"],Nh={key:0,class:"details-row"},Rh={colspan:"11",class:"p-0 border-0"},qh={class:"details-wrapper"},Bh={class:"modal-card"},Hh={class:"small fw-semibold mb-3"},zh={__name:"OrdersTable",props:{orders:{type:Array,default:()=>[]},expandedRows:{type:Object,required:!0},deletingId:{type:[Number,String,null],default:null},loading:{type:Boolean,default:!1},holdFilterDays:{type:Number,default:3}},emits:{"toggle-row":null,delete:null,"open-tags":null,"open-statuses":null,"copy-ttn":null,"generate-ttn":null,"print-ttn":null,"cancel-ttn":null,"refresh-delivery":null,"open-customer":null,"quick-fiscalize":null,"save-comment":null},setup(t,{emit:s}){const n=s,l=S(!1),o=S(null),i=v=>{const p=v||"#64748b";return{color:p,borderColor:p+"40"}},a=v=>{o.value=v,l.value=!0},r=()=>{l.value=!1,o.value=null},u=()=>{o.value&&(n("generate-ttn",o.value),r())},h=v=>v>=5?"storage-critical":"storage-warning";return(v,p)=>(c(),d(de,null,[t.loading&&!t.orders.length?(c(),d("div",Ug,[...p[5]||(p[5]=[e("div",{class:"spinner-border text-primary mb-3",role:"status"},null,-1),e("div",{class:"fw-medium"}," ...",-1)])])):t.orders.length?(c(),d("div",Fg,[e("div",Eg,[e("table",Vg,[p[28]||(p[28]=e("thead",null,[e("tr",null,[e("th",{class:"th-w-40"}),e("th",{class:"th-w-70"},"ID"),e("th",{class:"th-w-200"}," / "),e("th",{class:"th-w-110"},""),e("th",{class:"th-w-140"},""),e("th",{class:"th-w-140"},""),e("th",{class:"th-w-150"},""),e("th",{class:"th-w-100"},""),e("th",{class:"th-w-180"},""),e("th",{class:"th-w-120"},""),e("th",{class:"th-w-50"})])],-1)),e("tbody",null,[(c(!0),d(de,null,ve(t.orders,f=>(c(),d(de,{key:f.id},[e("tr",{class:W(["order-row",{"row-expanded":t.expandedRows.has(f.id)}]),onClick:m=>v.$emit("toggle-row",f.id)},[e("td",Ng,[e("button",{class:W(["btn-expand",{active:t.expandedRows.has(f.id)}]),type:"button"},[...p[7]||(p[7]=[e("i",{class:"bi bi-chevron-right"},null,-1)])],2)]),e("td",Rg,[e("span",qg,"#"+g(f.id),1)]),e("td",Bg,[e("div",Hg,[e("div",zg,[e("button",{type:"button",class:"client-name btn btn-link p-0 text-start",title:f.client,onClick:ge(m=>v.$emit("open-customer",f),["stop"])},g(f.client),9,Wg),f.customer_orders_count>1?(c(),d("div",{key:0,class:W(["loyalty-pill",f.customer_orders_count>5?"is-vip":"is-repeat"]),"data-bs-toggle":"tooltip",title:` ${f.customer_orders_count}-  `},[e("i",{class:W(["bi",f.customer_orders_count>5?"bi-trophy-fill":"bi-bag-check-fill"])},null,2),e("span",null,g(f.customer_orders_count),1)],10,Kg)):F("",!0)]),f.source_name?(c(),d("div",{key:0,class:"source-tag",style:Te(i(f.source_color))},[f.source_icon?(c(),d("i",{key:0,class:W([f.source_icon,"source-icon"])},null,2)):F("",!0),te(" "+g(f.source_name),1)],4)):F("",!0)])]),e("td",Gg,[e("div",Xg,[(c(!0),d(de,null,ve(f.tags,m=>(c(),d("span",{key:m.id,class:W(["tag-pill","tag-"+m.color]),title:m.name},[p[8]||(p[8]=e("span",{class:"tag-dot"},null,-1)),te(" "+g(m.name),1)],10,Jg))),128))])]),e("td",Qg,[e("span",Yg,g(f.phone),1),f.comment?(c(),d("div",Zg,[p[9]||(p[9]=e("i",{class:"bi bi-chat-left-text-fill me-1"},null,-1)),te(" "+g(f.comment),1)])):F("",!0)]),e("td",eh,[e("div",{class:W(["status-badge",f.status_color?"":Ae(Rp)(f.status_key)]),style:Te(Ae(Qi)(f))},[e("i",{class:W(["bi",f.status_icon||Ae(Bp)(f.status_key)])},null,2),e("span",null,g(f.status),1)],6)]),e("td",th,[e("div",sh,[(c(!0),d(de,null,ve(f.items.slice(0,4),(m,y)=>(c(),d("div",{key:m.id,class:"product-thumb",style:Te({zIndex:10-y})},[m.photo?(c(),d("img",{key:0,src:m.photo,alt:"Item"},null,8,nh)):(c(),d("div",lh,[...p[10]||(p[10]=[e("i",{class:"bi bi-image"},null,-1)])]))],4))),128)),f.items.length>4?(c(),d("div",oh," +"+g(f.items.length-4),1)):F("",!0)])]),e("td",ih,[f.latestFiscalReceipt?.status==="success"&&f.latestFiscalReceipt?.type==="return"?(c(),d("a",{key:0,href:f.latestFiscalReceipt?.check_link,target:"_blank",class:"fiscal-widget widget-return text-decoration-none",title:"  ",onClick:p[0]||(p[0]=ge(()=>{},["stop"]))},[e("div",rh,[e("span",ch,g(Ae(nt)(f.total,f.currency)),1),p[11]||(p[11]=e("i",{class:"bi bi-arrow-counterclockwise widget-icon"},null,-1))]),p[12]||(p[12]=e("div",{class:"widget-label"},"",-1))],8,ah)):f.latestFiscalReceipt?.status==="success"&&f.latestFiscalReceipt?.type==="sell"&&(f.payment_status==="paid"||f.paid_amount&&f.paid_amount>=f.total)?(c(),d("a",{key:1,href:f.latestFiscalReceipt?.check_link,target:"_blank",class:"fiscal-widget widget-success glass-effect text-decoration-none",title:"  ",onClick:p[1]||(p[1]=ge(()=>{},["stop"]))},[e("div",uh,[e("span",fh,g(Ae(nt)(f.total,f.currency)),1),p[13]||(p[13]=e("div",{class:"widget-icon-box"},[e("i",{class:"bi bi-check-lg",style:{"font-size":"0.75rem"}})],-1))]),p[14]||(p[14]=e("div",{class:"widget-label"},"",-1))],8,dh)):f.latestFiscalReceipt?.status==="success"&&f.latestFiscalReceipt?.type==="sell"&&f.prepay_amount>0?(c(),d("a",{key:2,href:f.latestFiscalReceipt?.check_link,target:"_blank",class:"fiscal-widget widget-partial text-decoration-none",title:"  ",onClick:p[2]||(p[2]=ge(()=>{},["stop"]))},[e("div",ph,[e("span",vh,g(Ae(nt)(f.prepay_amount,f.currency)),1),p[15]||(p[15]=e("div",{class:"widget-icon-box"},[e("i",{class:"bi bi-pie-chart-fill",style:{"font-size":"0.65rem"}})],-1))]),p[16]||(p[16]=e("div",{class:"widget-label"},"",-1))],8,mh)):f.latestFiscalReceipt?.status==="success"&&f.latestFiscalReceipt?.type==="sell"?(c(),d("a",{key:3,href:f.latestFiscalReceipt?.check_link,target:"_blank",class:"fiscal-widget widget-success glass-effect text-decoration-none",title:"",onClick:p[3]||(p[3]=ge(()=>{},["stop"]))},[e("div",gh,[e("span",hh,g(Ae(nt)(f.total,f.currency)),1),p[17]||(p[17]=e("div",{class:"widget-icon-box"},[e("i",{class:"bi bi-check-lg",style:{"font-size":"0.75rem"}})],-1))]),p[18]||(p[18]=e("div",{class:"widget-label"},"",-1))],8,bh)):(c(),d("div",{key:4,class:W(["fiscal-widget widget-empty",{"widget-error":f.latestFiscalReceipt?.status==="error"}]),title:",  ",role:"button",onClick:ge(m=>v.$emit("quick-fiscalize",f),["stop"])},[e("div",_h,[e("span",$h,g(Ae(nt)(f.total,f.currency)),1),p[19]||(p[19]=e("i",{class:"bi bi-receipt widget-icon-muted"},null,-1))]),e("div",kh,g(f.latestFiscalReceipt?.status==="error"?"":" "),1)],10,yh))]),e("td",xh,[f.ttn?(c(),d("div",wh,[e("div",Ch,[f.delivery_status_icon?(c(),d("i",{key:0,class:W(["bi",f.delivery_status_icon]),style:Te([{color:f.delivery_status_color},{"font-size":"0.8rem"}])},null,6)):F("",!0),e("span",{class:"delivery-status-text text-truncate",style:Te({color:f.delivery_status_color||"#475569"}),title:f.delivery_status},g(f.delivery_status),13,Sh)]),e("div",{class:"d-flex align-items-center gap-2 ttn-row",onClick:ge(m=>v.$emit("copy-ttn",f.ttn),["stop"]),title:" "},[p[20]||(p[20]=e("i",{class:"bi bi-upc-scan text-muted",style:{"font-size":"0.85rem"}},null,-1)),e("span",Ah,g(f.ttn),1),p[21]||(p[21]=e("i",{class:"bi bi-copy ttn-copy-icon"},null,-1))],8,Th)])):(c(),d("div",{key:1,class:"delivery-widget delivery-empty",role:"button",onClick:ge(m=>a(f),["stop"]),title:" "},[...p[22]||(p[22]=[e("div",{class:"d-flex align-items-center justify-content-center gap-2 text-muted"},[e("i",{class:"bi bi-box-seam"}),e("span",null," ")],-1)])],8,Oh))]),e("td",Ph,[e("div",Mh,[e("span",Ih,g(Ae(Ds)(f.created_at)),1),f.delivery_status_code==="at_warehouse"&&f.delivery_hold_days>=3?(c(),d("div",{key:0,class:W(["storage-alert",h(f.delivery_hold_days)])},[e("div",Dh,[e("i",{class:W(["bi",f.delivery_hold_days>=5?"bi-fire":"bi-hourglass-split"])},null,2)]),e("div",Uh,[e("span",jh,g(f.delivery_hold_days)+" .",1),p[23]||(p[23]=e("span",{class:"days-label"},"",-1))])],2)):F("",!0)])]),e("td",Fh,[e("div",{class:"dropdown",onClick:p[4]||(p[4]=ge(()=>{},["stop"]))},[p[27]||(p[27]=e("button",{class:"btn-action","data-bs-toggle":"dropdown"},[e("i",{class:"bi bi-three-dots"})],-1)),e("ul",Eh,[e("li",null,[e("a",{class:"dropdown-item rounded-2",href:`/orders/${f.id}/edit`},[...p[24]||(p[24]=[e("i",{class:"bi bi-pencil me-2 text-primary"},null,-1),te(" ",-1)])],8,Vh)]),p[26]||(p[26]=e("li",null,[e("hr",{class:"dropdown-divider my-1"})],-1)),e("li",null,[e("button",{class:"dropdown-item rounded-2 text-danger",type:"button",disabled:t.deletingId===f.id,onClick:ge(m=>v.$emit("delete",f),["stop"])},[p[25]||(p[25]=e("i",{class:"bi bi-trash me-2"},null,-1)),te(" "+g(t.deletingId===f.id?"...":""),1)],8,Lh)])])])])],10,Lg),t.expandedRows.has(f.id)?(c(),d("tr",Nh,[e("td",Rh,[e("div",qh,[pe(Dg,{order:f,onOpenTags:m=>v.$emit("open-tags",f),onOpenStatuses:m=>v.$emit("open-statuses",f),onCopyTtn:m=>v.$emit("copy-ttn",f.ttn),onGenerateTtn:m=>v.$emit("generate-ttn",f),onPrintTtn:m=>v.$emit("print-ttn",f),onCancelTtn:m=>v.$emit("cancel-ttn",f),onRefreshDelivery:m=>v.$emit("refresh-delivery",f),onSaveComment:m=>v.$emit("save-comment",{order:f,comment:m})},null,8,["order","onOpenTags","onOpenStatuses","onCopyTtn","onGenerateTtn","onPrintTtn","onCancelTtn","onRefreshDelivery","onSaveComment"])])])])):F("",!0)],64))),128))])])])])):(c(),d("div",jg,[...p[6]||(p[6]=[e("div",{class:"empty-icon mb-3"},[e("i",{class:"bi bi-inbox"})],-1),e("h5",{class:"fw-bold text-dark"}," ",-1),e("p",{class:"text-secondary mb-0"},"  .   .",-1)])])),l.value?(c(),d("div",{key:3,class:"modal-backdrop-custom",onClick:ge(r,["self"])},[e("div",Bh,[p[29]||(p[29]=e("h5",{class:"fw-bold mb-2"}," ?",-1)),p[30]||(p[30]=e("p",{class:"text-muted small mb-3"},"        ? ",-1)),e("div",Hh," : "+g(o.value?.order_number||o.value?.id||""),1),e("div",{class:"d-flex justify-content-end gap-2"},[e("button",{class:"btn btn-light",type:"button",onClick:r},""),e("button",{class:"btn btn-primary",type:"button",onClick:u}," ,  ")])])])):F("",!0)],64))}},Wh=xe(zh,[["__scopeId","data-v-7c689ee0"]]),Kh={class:"topbar sticky-top"},Gh={class:"toolbar-header px-4 py-3"},Xh={class:"d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3"},Jh={class:"d-flex align-items-center gap-2 w-100 w-md-auto"},Qh={class:"search-wrapper w-100 w-md-auto"},Yh=["value"],Zh={class:"toolbar-filters px-4 pb-3"},e1={class:"filters-container d-flex flex-wrap align-items-start justify-content-between gap-3"},t1={class:"d-flex flex-wrap gap-2 status-scroll-area"},s1=["onClick"],n1={key:0,class:"special-filter-zone"},l1={class:"alert-toggle-wrapper"},o1={class:"toggle-icon-box"},i1={key:0,class:"bi bi-fire"},a1={key:1,class:"bi bi-hourglass-split"},r1={class:"toggle-content"},c1={key:0,class:"days-dropdown-menu"},d1={class:"days-grid"},u1=["onClick"],f1={__name:"OrdersTopbar",props:{search:{type:String,default:""},statusChips:{type:Array,default:()=>[]},isStatusActive:{type:Function,required:!0},holdFilterEnabled:{type:Boolean,default:!1},holdFilterActive:{type:Boolean,default:!1},holdFilterDays:{type:Number,default:4}},emits:["update:search","search","toggle-status","toggle-hold","update:hold-days"],setup(t,{emit:s}){const n=s,l=S(!1);function o(h){const v=h.target.value;n("update:search",v),n("search",v)}function i(){l.value=!l.value}function a(){l.value=!1}function r(h){n("update:hold-days",h),l.value=!1}const u={mounted(h,v){h.clickOutsideEvent=function(p){h===p.target||h.contains(p.target)||v.value(p)},document.body.addEventListener("click",h.clickOutsideEvent)},unmounted(h){document.body.removeEventListener("click",h.clickOutsideEvent)}};return(h,v)=>(c(),d("header",Kh,[e("div",Gh,[e("div",Xh,[v[3]||(v[3]=e("div",{class:"d-none d-md-block"},null,-1)),e("div",Jh,[e("div",Qh,[v[1]||(v[1]=e("i",{class:"bi bi-search search-icon"},null,-1)),e("input",{value:t.search,onInput:o,type:"text",class:"form-control search-input",placeholder:" (, , )..."},null,40,Yh)]),v[2]||(v[2]=e("a",{href:"/orders/create",class:"btn btn-create shadow-sm"},[e("i",{class:"bi bi-plus-lg"}),e("span",{class:"d-none d-sm-inline ms-1"},"")],-1))])])]),e("div",Zh,[e("div",e1,[e("div",t1,[(c(!0),d(de,null,ve(t.statusChips,p=>(c(),d("button",{key:p.value,class:W(["filter-chip",{active:t.isStatusActive(p.value)}]),style:Te(t.isStatusActive(p.value)&&p.color?{backgroundColor:p.color,borderColor:p.color,color:"#fff",boxShadow:`0 4px 12px ${p.color}40`}:{}),onClick:f=>h.$emit("toggle-status",p.value)},[p.icon?(c(),d("i",{key:0,class:W(`bi ${p.icon}`),style:Te(!t.isStatusActive(p.value)&&p.color?{color:p.color}:{})},null,6)):F("",!0),e("span",null,g(p.label),1)],14,s1))),128))]),t.holdFilterEnabled?(c(),d("div",n1,[v[7]||(v[7]=e("div",{class:"divider-vertical"},null,-1)),ue((c(),d("div",l1,[e("button",{class:W(["alert-toggle-btn",{"is-active":t.holdFilterActive}]),onClick:v[0]||(v[0]=p=>h.$emit("toggle-hold")),title:" ,     "},[e("div",o1,[pe(Fe,{name:"icon-swap",mode:"out-in"},{default:Oe(()=>[t.holdFilterActive?(c(),d("i",i1)):(c(),d("i",a1))]),_:1})]),e("div",r1,[v[4]||(v[4]=e("span",{class:"toggle-label"}," ",-1)),e("div",{class:"toggle-sub-interactive",onClick:ge(i,["stop"])},[e("span",null," "+g(t.holdFilterDays)+" .",1),e("i",{class:W(["bi bi-caret-down-fill ms-1",{"rotate-180":l.value}])},null,2)])]),v[5]||(v[5]=e("div",{class:"toggle-switch-ui"},null,-1))],2),pe(Fe,{name:"dropdown-fade"},{default:Oe(()=>[l.value?(c(),d("div",c1,[v[6]||(v[6]=e("div",{class:"dropdown-header"}," ",-1)),e("div",d1,[(c(),d(de,null,ve([3,4,5,6,7,10],p=>e("button",{key:p,class:W(["day-option",{selected:t.holdFilterDays===p}]),onClick:ge(f=>r(p),["stop"])},g(p)+"  ",11,u1)),64))])])):F("",!0)]),_:1})])),[[u,a]])])):F("",!0)])])]))}},m1=xe(f1,[["__scopeId","data-v-f4bcf132"]]),p1={class:"pagination-wrapper"},v1={class:"pagination-info"},b1={class:"text-muted small fw-medium"},g1={class:"fw-bold text-dark"},h1={class:"fw-bold text-dark"},y1={class:"fw-bold text-dark"},_1={class:"per-page-select"},$1=["value"],k1=["value"],x1={key:0,class:"pagination-nav"},w1={class:"pagination mb-0 gap-1"},C1=["disabled"],S1=["onClick"],T1={key:1,class:"page-btn page-ellipsis"},A1=["disabled"],O1={__name:"OrdersPagination",props:{meta:{type:Object,required:!0},perPage:{type:Number,default:30},perPageOptions:{type:Array,default:()=>[15,30,60]}},emits:["change-page","update:per-page"],setup(t,{emit:s}){const n=t,l=s,o=se(()=>{const u=Number(n.meta.current_page||1),h=Number(n.meta.last_page||1);if(h<=1)return[1];if(h<=7)return Array.from({length:h},(m,y)=>y+1);const v=[1],p=Math.max(2,u-1),f=Math.min(h-1,u+1);p>2&&v.push("...");for(let m=p;m<=f;m+=1)v.push(m);return f<h-1&&v.push("..."),v.push(h),v}),i=se(()=>Number(n.meta.last_page||1)>1);function a(u){u!==n.meta.current_page&&l("change-page",u)}function r(u){const h=Number(u.target.value)||30;l("update:per-page",h)}return(u,h)=>(c(),d("div",p1,[e("div",v1,[e("div",b1,[h[2]||(h[2]=te("   ",-1)),e("span",g1,g(t.meta.from||0),1),h[3]||(h[3]=te("  ",-1)),e("span",h1,g(t.meta.to||0),1),h[4]||(h[4]=te("  ",-1)),e("span",y1,g(t.meta.total||0),1),h[5]||(h[5]=te("  ",-1))]),e("div",_1,[h[6]||(h[6]=e("span",{class:"per-page-label d-none d-lg-inline"}," ",-1)),e("select",{class:"form-select per-page-input",value:t.perPage,onChange:r},[(c(!0),d(de,null,ve(t.perPageOptions,v=>(c(),d("option",{key:v,value:v},g(v),9,k1))),128))],40,$1)])]),i.value?(c(),d("nav",x1,[e("ul",w1,[e("li",{class:W(["page-item",{disabled:t.meta.current_page===1}])},[e("button",{class:"page-btn",onClick:h[0]||(h[0]=v=>u.$emit("change-page",t.meta.current_page-1)),disabled:t.meta.current_page===1},[...h[7]||(h[7]=[e("i",{class:"bi bi-chevron-left"},null,-1)])],8,C1)],2),(c(!0),d(de,null,ve(o.value,(v,p)=>(c(),d("li",{key:`${v}-${p}`,class:W(["page-item",{active:v===t.meta.current_page,disabled:v==="..."}])},[v!=="..."?(c(),d("button",{key:0,class:W(["page-btn",{"is-active":v===t.meta.current_page}]),onClick:f=>a(v)},g(v),11,S1)):(c(),d("span",T1,""))],2))),128)),e("li",{class:W(["page-item",{disabled:t.meta.current_page===t.meta.last_page}])},[e("button",{class:"page-btn",onClick:h[1]||(h[1]=v=>u.$emit("change-page",t.meta.current_page+1)),disabled:t.meta.current_page===t.meta.last_page},[...h[8]||(h[8]=[e("i",{class:"bi bi-chevron-right"},null,-1)])],8,A1)],2)])])):F("",!0)]))}},Yi=xe(O1,[["__scopeId","data-v-a7b2f70e"]]),P1={key:0},M1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-sm"},I1={class:"modal-content clean-modal"},D1={class:"modal-header border-0 pb-0"},U1={class:"modal-body py-4"},j1={key:0,class:"d-flex flex-column align-items-center justify-content-center py-4 text-muted"},F1={key:1,class:"d-flex flex-column gap-2"},E1=["onClick"],V1={key:0,class:"empty-state"},L1={class:"modal-footer border-0 pt-0 pb-4 px-4"},N1={class:"d-flex gap-2 w-100"},R1=["disabled"],q1={__name:"OrderTagsModal",props:{open:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},availableTags:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","close","save"],setup(t,{emit:s}){const n=t,l=s,o=a=>n.modelValue.includes(a),i=a=>{const r=[...n.modelValue],u=r.indexOf(a);u===-1?r.push(a):r.splice(u,1),l("update:modelValue",r)};return(a,r)=>t.open?(c(),d("div",P1,[r[9]||(r[9]=e("div",{class:"modal-backdrop fade show"},null,-1)),e("div",{class:"modal fade show d-block",tabindex:"-1",onClick:r[3]||(r[3]=ge(u=>a.$emit("close"),["self"]))},[e("div",M1,[e("div",I1,[e("div",D1,[r[5]||(r[5]=e("div",{class:"d-flex flex-column"},[e("h5",{class:"modal-title fw-bold text-dark"}," "),e("span",{class:"text-muted small"},"   ")],-1)),e("button",{type:"button",class:"btn-close-custom",onClick:r[0]||(r[0]=u=>a.$emit("close"))},[...r[4]||(r[4]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",U1,[t.loading?(c(),d("div",j1,[...r[6]||(r[6]=[e("div",{class:"spinner-border text-primary mb-2",role:"status"},null,-1),e("div",{class:"small fw-medium"},"...",-1)])])):(c(),d("div",F1,[(c(!0),d(de,null,ve(t.availableTags,u=>(c(),d("div",{key:u.id,class:W(["tag-option",{"is-selected":o(u.id)}]),onClick:h=>i(u.id)},[e("div",{class:W(["tag-pill","tag-"+(u.color||"gray")]),style:Te(u.color&&u.color.startsWith("#")?{backgroundColor:u.color+"15",color:u.color}:{})},[u.icon?(c(),d("i",{key:0,class:W("bi "+u.icon)},null,2)):F("",!0),e("span",null,g(u.name),1)],6),r[7]||(r[7]=e("div",{class:"checkbox-indicator"},[e("i",{class:"bi bi-check-lg"})],-1))],10,E1))),128)),t.availableTags.length?F("",!0):(c(),d("div",V1,[...r[8]||(r[8]=[e("i",{class:"bi bi-tags text-muted mb-2"},null,-1),e("span",null,"  ",-1)])]))]))]),e("div",L1,[e("div",N1,[e("button",{class:"btn-cancel w-50",type:"button",onClick:r[1]||(r[1]=u=>a.$emit("close"))},"  "),e("button",{class:"btn-save w-50",type:"button",onClick:r[2]||(r[2]=u=>a.$emit("save")),disabled:t.loading},"  ",8,R1)])])])])])])):F("",!0)}},B1=xe(q1,[["__scopeId","data-v-7e3296dc"]]),H1={key:0},z1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-sm"},W1={class:"modal-content clean-modal"},K1={class:"modal-header border-0 pb-0 pt-4 px-4"},G1={class:"modal-body p-4"},X1={key:0,class:"d-flex flex-column align-items-center justify-content-center py-5 text-muted"},J1={key:1,class:"d-flex flex-column gap-2"},Q1=["onClick"],Y1={class:"selection-indicator"},Z1={key:1,class:"bi bi-circle text-muted opacity-25"},ey={key:0,class:"empty-state"},ty={__name:"OrderStatusesModal",props:{open:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},statuses:{type:Array,default:()=>[]},modelValue:{type:[Number,String,null],default:null}},emits:["update:modelValue","close","save"],setup(t,{emit:s}){const n=t,l=s,o=i=>{n.loading||(l("update:modelValue",i),l("save"))};return(i,a)=>t.open?(c(),d("div",H1,[a[6]||(a[6]=e("div",{class:"modal-backdrop fade show"},null,-1)),e("div",{class:"modal fade show d-block",tabindex:"-1",onClick:a[1]||(a[1]=ge(r=>i.$emit("close"),["self"]))},[e("div",z1,[e("div",W1,[e("div",K1,[a[3]||(a[3]=e("div",{class:"d-flex flex-column"},[e("h5",{class:"modal-title fw-bold text-dark"}," "),e("span",{class:"text-muted small"},"    ")],-1)),e("button",{type:"button",class:"btn-close-custom",onClick:a[0]||(a[0]=r=>i.$emit("close"))},[...a[2]||(a[2]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",G1,[t.loading?(c(),d("div",X1,[...a[4]||(a[4]=[e("div",{class:"spinner-border text-primary mb-2",role:"status"},null,-1),e("div",{class:"small fw-medium"}," ...",-1)])])):(c(),d("div",J1,[(c(!0),d(de,null,ve(t.statuses,r=>(c(),d("div",{key:r.id,class:W(["status-option",{"is-selected":t.modelValue===r.id}]),onClick:u=>o(r.id),style:Te(t.modelValue===r.id&&r.color?{borderColor:r.color,backgroundColor:r.color+"08"}:{})},[e("div",{class:"status-pill",style:Te(r.color?{backgroundColor:r.color+"15",color:r.color}:{backgroundColor:"#f1f5f9",color:"#64748b"})},[r.icon?(c(),d("i",{key:0,class:W(["bi",r.icon])},null,2)):F("",!0),e("span",null,g(r.name),1)],4),e("div",Y1,[t.modelValue===r.id?(c(),d("i",{key:0,class:"bi bi-check-circle-fill",style:Te({color:r.color||"#6366f1"})},null,4)):(c(),d("i",Z1))])],14,Q1))),128)),t.statuses.length?F("",!0):(c(),d("div",ey,[...a[5]||(a[5]=[e("i",{class:"bi bi-list-check text-muted mb-2"},null,-1),e("span",null,"  ",-1)])]))]))])])])])])):F("",!0)}},sy=xe(ty,[["__scopeId","data-v-2397306e"]]),ny={key:0,class:"offcanvas-wrapper"},ly={class:"panel-container"},oy={class:"panel-header"},iy={class:"d-flex align-items-center gap-3 w-100 overflow-hidden"},ay={class:"avatar-circle"},ry={key:0},cy={key:1,class:"bi bi-person-fill"},dy={class:"min-w-0 flex-grow-1"},uy={class:"customer-name text-truncate"},fy={class:"customer-meta"},my={class:"id-badge"},py={key:0,class:"phone-display"},vy={class:"panel-body custom-scroll"},by={key:0,class:"state-container"},gy={key:1,class:"state-container text-danger"},hy={class:"small opacity-75 mb-0"},yy={key:2,class:"content-wrapper"},_y={class:"metrics-grid"},$y={class:"metric-card bg-blue"},ky={class:"metric-info"},xy={class:"metric-value"},wy={class:"metric-card bg-green"},Cy={class:"metric-info"},Sy={class:"metric-value"},Ty={class:"section-block"},Ay={class:"contacts-list"},Oy={class:"contact-card"},Py={class:"contact-main"},My={class:"contact-details"},Iy=["href"],Dy={key:1,class:"text-muted small"},Uy={key:0,class:"contact-actions"},jy=["href"],Fy=["href"],Ey={class:"contact-card"},Vy={class:"contact-main"},Ly={class:"contact-details"},Ny=["href"],Ry={key:1,class:"text-muted small"},qy={class:"section-block"},By={class:"d-flex justify-content-between align-items-center mb-3"},Hy={class:"badge bg-secondary-subtle text-secondary rounded-pill",style:{"font-size":"0.7rem"}},zy={key:0,class:"empty-history"},Wy={key:1,class:"orders-list"},Ky=["href"],Gy={class:"order-header"},Xy={class:"d-flex align-items-center gap-2"},Jy={class:"order-id"},Qy={class:"order-date"},Yy={class:"order-total"},Zy={class:"order-footer"},e_={class:"order-location text-truncate"},t_={class:"status-badge"},s_={key:0,class:"templates-overlay"},n_={class:"templates-header"},l_={class:"templates-body custom-scroll"},o_={key:0,class:"text-center py-4 text-muted"},i_={key:1,class:"text-center py-4 text-muted"},a_={class:"template-info"},r_={class:"template-title"},c_={class:"template-text"},d_=["onClick"],u_={key:0,class:"toast-notification"},f_={__name:"CustomerQuickView",props:{open:{type:Boolean,default:!1},data:{type:Object,default:null},loading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["close"],setup(t,{emit:s}){const n=t,l=s,o=se(()=>n.data?.customer||{}),i=se(()=>n.data?.metrics||{}),a=se(()=>n.data?.recent_orders||[]),r=se(()=>[o.value.first_name,o.value.last_name].filter(Boolean).join(" ")||" "),u=se(()=>o.value.phone||""),h=se(()=>o.value.email||""),v=S(!1),p=S([]),f=S(!1),m=S(null),y=B=>B?.replace(/\D/g,""),L=B=>new Intl.NumberFormat("uk-UA",{style:"currency",currency:"UAH",maximumFractionDigits:0}).format(B||0),K=B=>{B&&navigator.clipboard.writeText(B)},P=async()=>{if(!(p.value.length>0)){f.value=!0;try{const B=await we.get("/api/templates-list");p.value=B.data?.data??B.data??[]}catch(B){console.error("   ",B)}finally{f.value=!1}}},H=()=>{v.value=!0,P()},E=se(()=>{const B=a.value.length>0?a.value[0]:null,T={"{{name}}":r.value||" ","{{ttn}}":B?.delivery?.ttn||" ","{{amount}}":B?nt(B.items_sum_total,B.currency):" ","{{price}}":B?nt(B.items_sum_total,B.currency):" ","{{order_id}}":B?.id||" "};return p.value.map(k=>{let _=k.content||"";for(const[D,q]of Object.entries(T))_=_.replaceAll(D,q);return{...k,processedText:_}})}),I=B=>{m.value=B,setTimeout(()=>{m.value=null},2e3)},V=async B=>{try{await navigator.clipboard.writeText(B),I(" ")}catch(T){console.error(" ",T),I(" ")}},Q=(B,T)=>B?B.length<=T?B:`${B.slice(0,T)}...`:"";function ee(){l("close"),v.value=!1}return(B,T)=>(c(),Ne(Ct,{to:"body"},[t.open?(c(),d("div",ny,[e("div",{class:"backdrop",onClick:ee}),e("div",ly,[e("div",oy,[e("div",iy,[e("div",ay,[r.value?(c(),d("span",ry,g(r.value.charAt(0).toUpperCase()),1)):(c(),d("i",cy))]),e("div",dy,[e("div",uy,g(r.value),1),e("div",fy,[e("span",my,"ID: "+g(o.value.id),1),u.value?(c(),d("span",py,[T[3]||(T[3]=e("i",{class:"bi bi-telephone-fill"},null,-1)),te(" "+g(u.value),1)])):F("",!0)])])]),e("button",{type:"button",class:"btn-close-custom",onClick:ee},[...T[4]||(T[4]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",vy,[t.loading?(c(),d("div",by,[...T[5]||(T[5]=[e("div",{class:"spinner-border text-primary mb-3",role:"status"},null,-1),e("div",{class:"text-muted fw-medium"}," ...",-1)])])):t.error?(c(),d("div",gy,[T[6]||(T[6]=e("div",{class:"icon-circle bg-danger-subtle text-danger mb-3"},[e("i",{class:"bi bi-exclamation-triangle-fill fs-4"})],-1)),T[7]||(T[7]=e("h6",{class:"fw-bold"}," ",-1)),e("p",hy,g(t.error),1)])):t.data?(c(),d("div",yy,[e("section",_y,[e("div",$y,[T[9]||(T[9]=e("div",{class:"metric-icon"},[e("i",{class:"bi bi-bag-check-fill"})],-1)),e("div",ky,[T[8]||(T[8]=e("div",{class:"metric-label"},"",-1)),e("div",xy,g(i.value.orders_count??0),1)])]),e("div",wy,[T[11]||(T[11]=e("div",{class:"metric-icon"},[e("i",{class:"bi bi-wallet2"})],-1)),e("div",Cy,[T[10]||(T[10]=e("div",{class:"metric-label"},"",-1)),e("div",Sy,g(L(i.value.total_spent)),1)])])]),e("section",Ty,[T[21]||(T[21]=e("h6",{class:"section-title"},"",-1)),e("div",Ay,[e("div",Oy,[e("div",Py,[T[13]||(T[13]=e("div",{class:"icon-box text-primary bg-primary-subtle"},[e("i",{class:"bi bi-telephone-fill"})],-1)),e("div",My,[T[12]||(T[12]=e("div",{class:"contact-type"},"",-1)),u.value?(c(),d("a",{key:0,href:`tel:${u.value}`,class:"contact-value"},g(u.value),9,Iy)):(c(),d("span",Dy,""))])]),u.value?(c(),d("div",Uy,[e("a",{href:`viber://chat?number=${y(u.value)}`,class:"action-btn btn-viber",title:"Viber"},[...T[14]||(T[14]=[e("i",{class:"bi bi-chat-fill"},null,-1)])],8,jy),e("a",{href:`tg://resolve?domain=${y(u.value)}`,class:"action-btn btn-telegram",title:"Telegram"},[...T[15]||(T[15]=[e("i",{class:"bi bi-telegram"},null,-1)])],8,Fy),e("button",{class:"action-btn btn-copy",onClick:T[0]||(T[0]=k=>K(u.value)),title:""},[...T[16]||(T[16]=[e("i",{class:"bi bi-copy"},null,-1)])])])):F("",!0)]),e("div",Ey,[e("div",Vy,[T[18]||(T[18]=e("div",{class:"icon-box text-warning bg-warning-subtle"},[e("i",{class:"bi bi-envelope-fill"})],-1)),e("div",Ly,[T[17]||(T[17]=e("div",{class:"contact-type"},"Email",-1)),h.value?(c(),d("a",{key:0,href:`mailto:${h.value}`,class:"contact-value"},g(h.value),9,Ny)):(c(),d("span",Ry,""))])]),h.value?(c(),d("button",{key:0,class:"action-btn btn-copy ms-auto",onClick:T[1]||(T[1]=k=>K(h.value))},[...T[19]||(T[19]=[e("i",{class:"bi bi-copy"},null,-1)])])):F("",!0)])]),e("button",{class:"btn btn-light w-100 d-flex align-items-center justify-content-center gap-2 py-2 border text-primary fw-medium mt-3",onClick:H},[...T[20]||(T[20]=[e("i",{class:"bi bi-chat-text-fill"},null,-1),te("    ",-1)])])]),e("section",qy,[e("div",By,[T[22]||(T[22]=e("h6",{class:"section-title mb-0"}," ",-1)),e("span",Hy,"  "+g(a.value.length),1)]),a.value.length?(c(),d("div",Wy,[(c(!0),d(de,null,ve(a.value,k=>(c(),d("a",{key:k.id,href:`/orders/${k.id}/edit`,class:"order-card"},[e("div",Gy,[e("div",Xy,[e("span",Jy,"#"+g(k.id),1),e("span",Qy,g(Ae(Ds)(k.created_at)),1)]),e("div",Yy,g(Ae(nt)(k.items_sum_total,k.currency)),1)]),e("div",Zy,[e("div",e_,[T[24]||(T[24]=e("i",{class:"bi bi-geo-alt-fill"},null,-1)),te(" "+g(k.delivery?.city_name||""),1)]),e("span",t_,g(k.statusRef?.name||k.status),1)])],8,Ky))),128))])):(c(),d("div",zy,[...T[23]||(T[23]=[e("i",{class:"bi bi-inbox"},null,-1),e("span",null,"  ",-1)])]))])])):F("",!0)]),v.value?(c(),d("div",s_,[e("div",n_,[T[26]||(T[26]=e("h6",{class:"mb-0 fw-bold"}," ",-1)),e("button",{class:"btn-close-custom sm",onClick:T[2]||(T[2]=k=>v.value=!1)},[...T[25]||(T[25]=[e("i",{class:"bi bi-arrow-right"},null,-1)])])]),e("div",l_,[f.value?(c(),d("div",o_,[...T[27]||(T[27]=[e("div",{class:"spinner-border spinner-border-sm mb-2"},null,-1),e("div",null,"...",-1)])])):E.value.length===0?(c(),d("div",i_,"  .    . ")):(c(!0),d(de,{key:2},ve(E.value,k=>(c(),d("div",{key:k.id,class:"template-card"},[e("div",a_,[e("div",r_,g(k.title),1),e("div",c_,g(Q(k.processedText,80)),1)]),e("button",{class:"btn-copy-template",onClick:_=>V(k.processedText)},[...T[28]||(T[28]=[e("i",{class:"bi bi-clipboard-check"},null,-1),te("  ",-1)])],8,d_)]))),128))])])):F("",!0),pe(Fe,{name:"toast"},{default:Oe(()=>[m.value?(c(),d("div",u_,[T[29]||(T[29]=e("i",{class:"bi bi-check-circle-fill"},null,-1)),te(" "+g(m.value),1)])):F("",!0)]),_:1})])])):F("",!0)]))}},m_=xe(f_,[["__scopeId","data-v-dc41adb4"]]),p_={class:"workspace"},v_={class:"toast-container position-fixed top-50 start-50 translate-middle p-3",style:{"z-index":"1080"}},b_={class:"d-flex"},g_={class:"toast-body"},h_={class:"card border-0 shadow-sm overflow-hidden"},y_={__name:"OrderListPage",setup(t){const s=S([]),n=S(new Set),l=S(!1),o=S(null),i=S(!1),a=S(!1),r=S(""),u=S(null),h=S(!1),v=S(!1),p=S(null),f=S([]),m=S([]),y=S(!1),L=S(!1),K=S([]),P=S(null),H=S(null),E=Me({type:"success",message:""}),I=S({current_page:1,last_page:1,total:0}),V=[3,4,5,6],Q=S(3),ee=S(!1),B=Me({search:"",statuses:[],payment_status:"",delivery_hold_days:null,page:1,per_page:30}),T=[15,30,60];let k;const _=S([{value:"",label:"",icon:"bi-grid",color:null}]);async function D(x){if(!x.loadingTtn){x.loadingTtn=!0;try{const ne=(x?.delivery?.delivery_type||x?.delivery_type||"warehouse")==="courier"?`/orders/${x.id}/generate-ttn-courier`:`/orders/${x.id}/generate-ttn`,ce=await(await fetch(ne,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content,Accept:"application/json"}})).json();if(ce.success||ce.ttn){const ye=ce.ttn||ce.data[0].IntDocNumber,ke=ce.ref||ce.data[0].Ref;x.ttn=ye,x.ttn_ref=ke,alert(` ${ye}  !`)}else{const ye=ce.errors?JSON.stringify(ce.errors):ce.message||" API";alert("   : "+ye)}}catch(R){console.error(R),alert("    ")}finally{x.loadingTtn=!1}}}async function q(x){if(x.ttn&&confirm(" ,        ?")){x.loadingTtn=!0;try{(await we.post(`/orders/${x.id}/cancel-ttn`)).data.success&&(x.ttn=null,x.ttn_ref=null,alert("  "))}catch(R){console.error(R),alert(R.response?.data?.message||"   ")}finally{x.loadingTtn=!1}}}async function M(x){if(x.ttn)try{const R=await we.get(`/orders/${x.id}/print-ttn`);R.data.success&&R.data.print_url?window.open(R.data.print_url,"_blank"):alert("     ")}catch(R){console.error(R),alert("   ")}}async function Y(x){if(!(!x?.id||x.refreshingDelivery)){x.refreshingDelivery=!0;try{const R=document.querySelector('meta[name="csrf-token"]')?.content,ae=(await we.post(`/orders/${x.id}/track-delivery`,{},R?{headers:{"X-CSRF-TOKEN":R}}:void 0)).data||{};x.delivery_status=ae.delivery_status_label||x.delivery_status,x.delivery_status_code=ae.delivery_status_code||x.delivery_status_code,x.delivery_status_updated_at=ae.delivery_status_updated_at||x.delivery_status_updated_at,x.last_tracked_at=ae.last_tracked_at||x.last_tracked_at,ae.warehouse_entered_at?(x.delivery_status_entered_at=ae.warehouse_entered_at,x.delivery_hold_days=O(ae.warehouse_entered_at)):x.delivery_status_code!=="at_warehouse"&&(x.delivery_hold_days=null,x.delivery_status_entered_at="")}catch(R){console.error("    ",R),alert(R.response?.data?.message||"    ")}finally{x.refreshingDelivery=!1}}}async function Z(){l.value=!0;try{const{data:x}=await Hc({page:B.page,per_page:B.per_page,search:B.search||void 0,status_ids:B.statuses?.length?B.statuses.join(","):void 0,payment_status:B.payment_status||void 0,delivery_hold_days:B.delivery_hold_days||void 0}),R=x.data||x?.data?.data||[];s.value=R.map(U);const ne=x.meta||x?.data?.meta||x||{};I.value={current_page:ne.current_page??1,last_page:ne.last_page??1,total:ne.total??s.value.length,from:ne.from??0,to:ne.to??0}}catch(x){console.error(x)}finally{l.value=!1}}function U(x){const R=x.customer||{},ne=x.delivery||{};let ae=x.payment;Array.isArray(ae)&&(ae=ae[0]),ae=ae||{};const ce=x.statusRef||x.status_ref||{},ye=x.source||{},ke=x.latest_fiscal_receipt||x.latestFiscalReceipt||null,Ie=ne.delivery_status_updated_at||"",at=(ne.active_warehouse_status||ne.latest_warehouse_status||null)?.entered_at||""||Ie,dt=at?O(at):null;return{...x,customer_id:x.customer_id||R.id||null,order_number:x.order_number||x.id,client:R.full_name||[R.first_name,R.last_name].filter(Boolean).join(" ")||"",customer_orders_count:Number(R.orders_count??1),phone:R.phone||"",email:R.email||"",source_name:ye.name||x.source||"",source_icon:ye.icon?`bi ${ye.icon}`:"",source_color:ye.color||"",status_key:ce.code||x.status||"new",status:ce.name||Vp[x.status]||x.status||"",status_icon:ce.icon||"",status_color:ce.color||"",payment_status:x.payment_status,payment_status_label:Lp[x.payment_status]||"",tags:x.tags||[],items:(x.items||[]).map(Ze=>({...Ze,title:Ze.product_title||Ze.title||"",size:Ze.size||"",photo:Wp(Ze.product?.main_photo_url||Ze.product?.main_photo_path),total:Number(Ze.total??Number(Ze.qty||0)*Number(Ze.price||0))})),total:Number(x.items_sum_total??x.total_sum??0),currency:x.currency||"UAH",ttn:ne.ttn||"",loadingTtn:!1,refreshingDelivery:!1,address:(ne.delivery_type==="courier"?[ne.city_name,ne.street_name].filter(Boolean).join(", "):ne.warehouse_name)||"",city_name:ne.city_name||"",delivery_status:ne.delivery_status_label||"",delivery_status_code:ne.delivery_status_code||"",delivery_status_updated_at:Ie,delivery_status_color:ne.delivery_status_color||"",delivery_status_icon:ne.delivery_status_icon||"",delivery_carrier:ne.carrier==="nova_poshta"?" ":ne.carrier||"",delivery_payer:ne.delivery_payer==="sender"?"":"",delivery_type:ne.delivery_type||"warehouse",street_name:ne.street_name||"",building:ne.building||"",apartment:ne.apartment||"",prepay_amount:Number(x.prepay_amount??ae.prepay_amount??ae.prepayment??0),payment_method_label:ae.method==="cod"?" ":ae.method==="card"?"  ":ae.method==="prepay"?" ":"",comment:x.comment_internal||"",created_at:x.created_at,latestFiscalReceipt:ke,delivery_hold_days:dt}}function O(x){const R=new Date(x);if(Number.isNaN(R.getTime()))return null;const ne=new Date,ae=new Date(ne.getFullYear(),ne.getMonth(),ne.getDate()),ce=new Date(R.getFullYear(),R.getMonth(),R.getDate()),ye=ae.getTime()-ce.getTime();return Math.max(0,Math.floor(ye/(1e3*60*60*24)))}function $(x){Q.value=x,ee.value&&(B.delivery_hold_days=x,B.page=1,Z())}function le(x){B.per_page=x,B.page=1,Z()}function G(){ee.value=!ee.value,B.delivery_hold_days=ee.value?Q.value:null,B.page=1,Z()}function z(){clearTimeout(k),k=setTimeout(()=>{B.page=1,Z()},300)}function fe(x){return x?(Array.isArray(x)?x:[x]).some(ne=>B.statuses.includes(ne)):!B.statuses.length}function Le(x){if(!x)B.statuses=[];else{const R=new Set(B.statuses),ne=Array.isArray(x)?x:[x];ne.every(ce=>R.has(ce))?ne.forEach(ce=>R.delete(ce)):ne.forEach(ce=>R.add(ce)),B.statuses=Array.from(R)}B.page=1,Z()}function qe(x){x<1||x>I.value.last_page||(B.page=x,Z())}async function Be(x){if(!(!x||typeof navigator>"u"||!navigator.clipboard))try{await navigator.clipboard.writeText(x)}catch(R){console.error("   ",R)}}async function me(x){x&&(p.value=x,m.value=x.tags.map(R=>R.id),h.value=!0,f.value.length||await X())}async function X(){v.value=!0;try{const{data:x}=await zi(),R=x?.data||x||[];f.value=Array.isArray(R)?R:[]}catch(x){console.error("   ",x),f.value=[]}finally{v.value=!1}}function be(){h.value=!1,p.value=null,m.value=[]}async function ie(){if(p.value)try{const{data:x}=await Wc(p.value.id,m.value),R=x?.data||x||[];p.value.tags=R;const ne=s.value.findIndex(ae=>ae.id===p.value.id);ne!==-1&&(s.value[ne].tags=R),be()}catch(x){console.error("   ",x),alert("   ")}}async function A({order:x,comment:R}){if(!x?.id)return;const ne=typeof R=="string"?R.trim():"",ae=ne===""?null:ne;try{const{data:ce}=await Gc(x.id,ae),ye=ce?.comment_internal??ae??"";x.comment=ye||"";const ke=s.value.findIndex(Ie=>Ie.id===x.id);ke!==-1&&(s.value[ke].comment=x.comment),E.type="success",E.message=" ",setTimeout(()=>{E.message=""},2500)}catch(ce){console.error("   ",ce),E.type="danger",E.message="   "}}async function b(x){if(!(!x?.id||!window.confirm(`  #${x.order_number||x.id}?`))){o.value=x.id;try{await zc(x.id),s.value=s.value.filter(ne=>ne.id!==x.id),I.value.total=Math.max(0,(I.value.total||1)-1),!s.value.length&&I.value.current_page>1&&(B.page=Math.max(1,B.page-1),await Z())}catch(ne){console.error("   ",ne),alert("   ")}finally{o.value=null}}}async function w(x){x&&(P.value=x,H.value=x.status_id||null,y.value=!0,K.value.length||await J())}async function J(){L.value=!0;try{const{data:x}=await Wi({type:"order"}),R=x?.data||x||[];K.value=Array.isArray(R)?R:[];const ne=new Set(["cancelled","canceled","packing"]),ae=new Set(["",""]);_.value=[{value:"",label:"",icon:"bi-grid",color:null},...K.value.filter(ce=>!ne.has(ce.code)&&!ae.has(ce.name)).map(ce=>({value:ce.id,label:ce.name,icon:ce.icon,color:ce.color}))]}catch(x){console.error("   ",x),K.value=[]}finally{L.value=!1}}function j(){y.value=!1,P.value=null,H.value=null}async function C(){if(!(!P.value||!H.value))try{const{data:x}=await Kc(P.value.id,H.value),R=x?.data||x||{},ne=s.value.findIndex(ce=>ce.id===P.value.id),ae=ne!==-1?s.value[ne]:P.value;ae.status_id=R.id,ae.status_key=R.code,ae.status=R.name,ae.status_icon=R.icon,ae.status_color=R.color,j()}catch(x){console.error("   ",x),alert("   ")}}async function N(x){if(x?.customer_id){i.value=!0,a.value=!0,r.value="",u.value=null;try{const{data:R}=await Qc(x.customer_id);u.value=R?.data||R||null}catch(R){console.error("   ",R),r.value=R.response?.data?.message||"    "}finally{a.value=!1}}}function re(){i.value=!1}function oe(x){if(n.value.has(x)){n.value=new Set;return}n.value=new Set([x])}return Re(Z),Re(J),(x,R)=>(c(),d("section",p_,[e("div",v_,[E.message?(c(),d("div",{key:0,class:W(["toast show",`text-bg-${E.type}`]),style:{opacity:"0.9"},role:"alert","aria-live":"assertive","aria-atomic":"true"},[e("div",b_,[e("div",g_,g(E.message),1),e("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","aria-label":"Close",onClick:R[0]||(R[0]=ne=>E.message="")})])],2)):F("",!0)]),pe(m1,{search:B.search,"onUpdate:search":R[1]||(R[1]=ne=>B.search=ne),"status-chips":_.value,"is-status-active":fe,"hold-filter-enabled":!0,"hold-filter-active":ee.value,"hold-filter-days":Q.value,"hold-filter-options":V,onSearch:z,onToggleStatus:Le,onToggleHold:G,"onUpdate:holdDays":$},null,8,["search","status-chips","hold-filter-active","hold-filter-days"]),e("div",h_,[pe(Wh,{orders:s.value,"expanded-rows":n.value,"deleting-id":o.value,loading:l.value,"hold-filter-days":Q.value,onToggleRow:oe,onDelete:b,onOpenTags:me,onOpenStatuses:w,onCopyTtn:Be,onGenerateTtn:D,onPrintTtn:M,onCancelTtn:q,onRefreshDelivery:Y,onOpenCustomer:N,onSaveComment:A},null,8,["orders","expanded-rows","deleting-id","loading","hold-filter-days"]),pe(Yi,{meta:I.value,"per-page":B.per_page,"per-page-options":T,onChangePage:qe,"onUpdate:perPage":le},null,8,["meta","per-page"])]),pe(B1,{modelValue:m.value,"onUpdate:modelValue":R[2]||(R[2]=ne=>m.value=ne),open:h.value,loading:v.value,"available-tags":f.value,onClose:be,onSave:ie},null,8,["modelValue","open","loading","available-tags"]),pe(sy,{modelValue:H.value,"onUpdate:modelValue":R[3]||(R[3]=ne=>H.value=ne),open:y.value,loading:L.value,statuses:K.value,onClose:j,onSave:C},null,8,["modelValue","open","loading","statuses"]),pe(m_,{open:i.value,data:u.value,loading:a.value,error:r.value,onClose:re},null,8,["open","data","loading","error"])]))}},__=xe(y_,[["__scopeId","data-v-6e8ac5f2"]]),$_={class:"container-fluid p-0 p-md-4"},k_={class:"clean-card overflow-hidden"},x_={class:"p-4 border-bottom"},w_={class:"d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3"},C_={class:"d-flex flex-column gap-3 w-100"},S_={class:"d-flex gap-3 w-100 flex-wrap"},T_={class:"search-wrapper w-100",style:{"max-width":"400px"}},A_={class:"category-wrapper",style:{"max-width":"260px"}},O_=["value"],P_={class:"table-responsive"},M_={class:"table align-middle mb-0 clean-table"},I_={class:"ps-4"},D_={class:"product-thumb"},U_=["src"],j_={key:1,class:"bi bi-image text-muted fs-5"},F_=["title"],E_={key:0,class:"small text-muted product-desc-wrap"},V_={class:"font-monospace text-secondary small bg-light px-2 py-1 rounded border"},L_={class:"text-dark small fw-medium"},N_={class:"text-dark small fw-medium"},R_={class:"text-center"},q_={class:"text-end"},B_={class:"fw-bold text-dark"},H_={class:"text-end pe-4"},z_=["href"],W_=["onClick"],K_={key:0},G_={key:0,class:"d-flex align-items-center justify-content-between p-4 border-top bg-light bg-opacity-10"},X_={class:"text-muted small d-none d-sm-block"},J_={class:"fw-bold text-dark"},Q_={class:"fw-bold text-dark"},Y_={class:"fw-bold text-dark"},Z_={class:"pagination mb-0 gap-1"},e0={class:"page-item disabled"},t0={class:"page-link page-info border-0 bg-transparent text-dark fw-bold"},s0={class:"modal-card"},n0={class:"small fw-semibold mb-3"},l0={class:"d-flex justify-content-end gap-2"},o0=["disabled"],i0={key:0},a0={key:1,class:"spinner-border spinner-border-sm"},r0={__name:"ProductListPage",setup(t){const s=S([]),n=S(""),l=S(!1),o=S([]),i=S(""),a=S(!1),r=Me({current_page:1,last_page:1,total:0,per_page:150}),u=S(!1),h=S(null),v=S(!1);let p=null;const f=async(I=1)=>{l.value=!0;try{const{data:V}=await _e.get("/products",{headers:{Accept:"application/json"},params:{q:n.value||void 0,category:i.value||void 0,page:I,per_page:r.per_page}}),Q=V||{},ee=Array.isArray(Q?.data)?Q.data:Array.isArray(Q)?Q:[];s.value=ee.map(B=>({...B,imageUrl:B?.main_photo_path?`/storage/${B.main_photo_path}`:"",category_name:B?.category?.name||B.category||"",color_name:B?.color?.name||"",stock_qty:Array.isArray(B.variants)?B.variants.reduce((T,k)=>T+Number(k.stock_qty||0),0):B.stock_qty})),Q?.current_page&&(r.current_page=Q.current_page,r.last_page=Q.last_page,r.total=Q.total,r.per_page=Q.per_page)}catch(V){console.error("   ",V)}finally{l.value=!1}},m=async()=>{if(!a.value){a.value=!0;try{const{data:I}=await _e.get("/products/categories",{headers:{Accept:"application/json"}});o.value=Array.isArray(I)?I:[]}catch(I){console.error("   ",I),o.value=[]}finally{a.value=!1}}},y=I=>{I<1||I>r.last_page||f(I)},L=()=>{p&&clearTimeout(p),p=setTimeout(()=>f(1),300)},K=(I,V="UAH")=>I==null?"":new Intl.NumberFormat("uk-UA",{style:"currency",currency:V}).format(I),P=I=>{h.value=I,u.value=!0},H=()=>{v.value||(u.value=!1,h.value=null)},E=async()=>{if(!(!h.value||v.value)){v.value=!0;try{await _e.post(`/products/${h.value.id}`,{_method:"DELETE"},{headers:{Accept:"application/json"}}),s.value=s.value.filter(I=>I.id!==h.value.id),r.total=Math.max(0,(r.total||1)-1)}catch(I){console.error("   ",I),alert("   ")}finally{v.value=!1,H()}}};return Re(f),Re(m),ps(()=>{p&&clearTimeout(p)}),(I,V)=>(c(),d("div",$_,[e("div",k_,[e("div",x_,[e("div",w_,[e("div",C_,[V[7]||(V[7]=Fs('<div class="d-flex align-items-center justify-content-between" data-v-0acc15e4><h1 class="h5 fw-bold text-dark m-0 d-flex align-items-center gap-2" data-v-0acc15e4><i class="bi bi-box-seam text-primary" data-v-0acc15e4></i>  </h1><a href="/products/create" class="btn btn-primary d-md-none btn-sm shadow-sm" data-v-0acc15e4><i class="bi bi-plus-lg" data-v-0acc15e4></i></a></div>',1)),e("div",S_,[e("div",T_,[V[5]||(V[5]=e("i",{class:"bi bi-search search-icon"},null,-1)),ue(e("input",{"onUpdate:modelValue":V[0]||(V[0]=Q=>n.value=Q),type:"text",class:"form-control search-input",placeholder:"  , SKU...",onInput:L},null,544),[[he,n.value,void 0,{trim:!0}]])]),e("div",A_,[ue(e("select",{"onUpdate:modelValue":V[1]||(V[1]=Q=>i.value=Q),class:"form-select category-select",onChange:V[2]||(V[2]=Q=>f(1))},[V[6]||(V[6]=e("option",{value:""}," ",-1)),(c(!0),d(de,null,ve(o.value,Q=>(c(),d("option",{key:Q.id,value:Q.id},g(Q.name),9,O_))),128))],544),[[Yt,i.value]])])])]),V[8]||(V[8]=e("a",{href:"/products/create",class:"btn btn-create d-none d-md-flex shadow-sm"},[e("i",{class:"bi bi-plus-lg me-2"}),e("span",null," ")],-1))])]),e("div",P_,[e("table",M_,[V[12]||(V[12]=e("thead",null,[e("tr",null,[e("th",{class:"ps-4",style:{width:"80px"}},""),e("th",{style:{"min-width":"280px"}}," "),e("th",{style:{"min-width":"110px"}},"SKU ()"),e("th",{style:{"min-width":"110px"}},""),e("th",{style:{"min-width":"120px"}},""),e("th",{class:"text-center",style:{"min-width":"100px"}},""),e("th",{class:"text-end",style:{"min-width":"120px"}},""),e("th",{class:"text-end pe-4",style:{width:"100px"}},"")])],-1)),e("tbody",{class:W({"opacity-50":l.value})},[(c(!0),d(de,null,ve(s.value,Q=>(c(),d("tr",{key:Q.id,class:"product-row"},[e("td",I_,[e("div",D_,[Q.imageUrl?(c(),d("img",{key:0,src:Q.imageUrl,alt:""},null,8,U_)):(c(),d("i",j_))])]),e("td",null,[e("div",{class:"fw-bold text-dark product-title-wrap",title:Q.title},g(Q.title),9,F_),Q.description?(c(),d("div",E_,g(Q.description),1)):F("",!0)]),e("td",null,[e("span",V_,g(Q.sku||""),1)]),e("td",null,[e("span",L_,g(Q.category_name||""),1)]),e("td",null,[e("span",N_,g(Q.color_name||""),1)]),e("td",R_,[e("span",{class:W(["badge-stock",Q.stock_qty>0?"stock-ok":"stock-low"])},[e("i",{class:W(["bi",Q.stock_qty>0?"bi-check-circle-fill":"bi-exclamation-circle-fill"])},null,2),te(" "+g(Q.stock_qty??"0")+" . ",1)],2)]),e("td",q_,[e("span",B_,g(K(Q.sale_price,Q.currency)),1)]),e("td",H_,[e("a",{href:`/products/${Q.id}/edit`,class:"btn-icon-action",title:""},[...V[9]||(V[9]=[e("i",{class:"bi bi-pencil"},null,-1)])],8,z_),e("button",{class:"btn-icon-action btn-icon-danger ms-1",type:"button",title:"",onClick:ee=>P(Q)},[...V[10]||(V[10]=[e("i",{class:"bi bi-trash"},null,-1)])],8,W_)])]))),128)),s.value.length===0&&!l.value?(c(),d("tr",K_,[...V[11]||(V[11]=[e("td",{colspan:"8",class:"text-center py-5"},[e("div",{class:"empty-state"},[e("div",{class:"empty-icon mb-3"},[e("i",{class:"bi bi-box-seam"})]),e("h6",{class:"fw-bold text-dark"},"  "),e("p",{class:"text-muted small"},"       .")])],-1)])])):F("",!0)],2)])]),r.last_page>1?(c(),d("div",G_,[e("div",X_,[V[13]||(V[13]=te("  ",-1)),e("span",J_,g((r.current_page-1)*r.per_page+1),1),V[14]||(V[14]=te(" - ",-1)),e("span",Q_,g(Math.min(r.current_page*r.per_page,r.total)),1),V[15]||(V[15]=te("  ",-1)),e("span",Y_,g(r.total),1)]),e("nav",null,[e("ul",Z_,[e("li",{class:W(["page-item",{disabled:r.current_page<=1}])},[e("button",{class:"page-link page-btn",onClick:V[3]||(V[3]=Q=>y(r.current_page-1))},[...V[16]||(V[16]=[e("i",{class:"bi bi-chevron-left"},null,-1)])])],2),e("li",e0,[e("span",t0,g(r.current_page),1)]),e("li",{class:W(["page-item",{disabled:r.current_page>=r.last_page}])},[e("button",{class:"page-link page-btn",onClick:V[4]||(V[4]=Q=>y(r.current_page+1))},[...V[17]||(V[17]=[e("i",{class:"bi bi-chevron-right"},null,-1)])])],2)])])])):F("",!0)]),u.value?(c(),d("div",{key:0,class:"modal-backdrop-custom",onClick:ge(H,["self"])},[e("div",s0,[V[18]||(V[18]=e("h5",{class:"fw-bold mb-2"}," ?",-1)),V[19]||(V[19]=e("p",{class:"text-muted small mb-3"},"      ?     . ",-1)),e("div",n0,' : "'+g(h.value?.title||"")+'" ',1),e("div",l0,[e("button",{class:"btn btn-light",type:"button",onClick:H},""),e("button",{class:"btn btn-danger",type:"button",disabled:v.value,onClick:E},[v.value?(c(),d("span",a0)):(c(),d("span",i0,", "))],8,o0)])])])):F("",!0)]))}},c0=xe(r0,[["__scopeId","data-v-0acc15e4"]]),d0={class:"container-fluid p-0 p-md-4"},u0={class:"mx-auto",style:{"max-width":"1200px"}},f0={class:"d-flex flex-column flex-sm-row align-items-start align-items-sm-center justify-content-between gap-3 mb-4"},m0={class:"d-flex align-items-center gap-2 mb-1"},p0={class:"h4 fw-bold text-dark m-0"},v0={class:"d-flex gap-2"},b0=["disabled"],g0={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},h0={key:1,class:"bi bi-check-lg"},y0={class:"row g-4"},_0={class:"col-lg-8"},$0={class:"clean-card mb-4"},k0={class:"mb-4"},x0={key:0,class:"invalid-feedback"},w0={class:"row g-3 mb-4"},C0={class:"col-md-4"},S0={class:"position-relative"},T0=["value"],A0={class:"col-md-4"},O0={class:"position-relative"},P0=["value"],M0={class:"col-md-4"},I0={class:"form-text text-end"},D0={class:"clean-card mb-4"},U0={class:"row g-4"},j0={class:"col-md-4"},F0={class:"col-md-4"},E0={class:"input-group input-group-modern"},V0={class:"input-group-text bg-transparent border-0 text-muted"},L0={class:"col-md-4"},N0={class:"input-group input-group-modern focused-group"},R0={class:"input-group-text bg-transparent border-0 text-muted"},q0={class:"row g-4"},B0={class:"col-md-6"},H0=["readonly"],z0={class:"col-md-6"},W0={class:"clean-card mb-4"},K0={class:"table-responsive"},G0={class:"table table-sm align-middle mb-0"},X0=["onUpdate:modelValue"],J0=["onUpdate:modelValue"],Q0=["onUpdate:modelValue"],Y0={class:"text-center"},Z0=["onUpdate:modelValue"],e$={class:"text-end"},t$=["onClick"],s$={key:0},n$={class:"col-lg-4"},l$={class:"clean-card mb-4"},o$={key:0,class:"image-preview-wrapper"},i$=["src"],a$={class:"overlay"},r$={key:1,class:"placeholder-content"},c$={class:"clean-card"},d$={class:"row g-3"},u$={class:"col-12"},f$={class:"input-group input-group-modern input-group-sm"},m$={class:"form-label-custom text-truncate"},p$={class:"input-group input-group-modern input-group-sm"},v$=["onUpdate:modelValue","step"],b$={key:0,class:"modal-backdrop fade show bg-dark bg-opacity-50"},g$={class:"modal-dialog modal-lg modal-dialog-centered"},h$={class:"modal-content border-0 shadow-lg rounded-4 overflow-hidden"},y$={class:"modal-body p-4"},_$={class:"row align-items-center"},$$={class:"col-md-5 text-center mb-3 mb-md-0"},k$={class:"bg-light rounded-4 d-flex align-items-center justify-content-center overflow-hidden",style:{height:"300px"}},x$=["src"],w$={key:1,class:"bi bi-image text-muted",style:{"font-size":"4rem"}},C$={class:"col-md-7"},S$={class:"badge bg-primary bg-opacity-10 text-primary mb-2"},T$={class:"fw-bold text-dark mb-2"},A$={class:"fs-4 fw-bold text-success mb-3"},O$={class:"d-flex gap-3 mb-4"},P$={class:"border rounded px-3 py-1 bg-light"},M$={class:"fw-bold text-dark"},I$={class:"border rounded px-3 py-1 bg-light"},D$={class:"fw-bold text-dark"},U$={class:"text-muted small"},j$={key:2,class:"modal-backdrop fade show bg-dark bg-opacity-50"},F$={key:3,class:"modal fade show d-block",tabindex:"-1"},E$={class:"modal-dialog modal-dialog-centered modal-sm"},V$={class:"modal-content border-0 shadow-lg rounded-4"},L$={class:"modal-body text-center p-4"},N$={class:"d-grid gap-2"},R$={__name:"ProductFormPage",props:{initialProduct:{type:Object,default:null}},setup(t){const s=t,n=S(!1),l=S(null),o=S(null),i=S([]),a=S([]),r=S(!1),u=S(!1),h=S(s.initialProduct?.main_photo_path?`/storage/${s.initialProduct.main_photo_path}`:""),v=S(!1),p=S(!1),f=Me({id:s.initialProduct?.id??null,title:s.initialProduct?.title??"",category_id:s.initialProduct?.category_id??"",color_id:s.initialProduct?.color_id??"",weight_g:s.initialProduct?.weight_g??null,length_cm:s.initialProduct?.length_cm??null,width_cm:s.initialProduct?.width_cm??null,height_cm:s.initialProduct?.height_cm??null,cost_price:s.initialProduct?.cost_price??null,sale_price:s.initialProduct?.sale_price??null,currency:s.initialProduct?.currency??"UAH",sku:s.initialProduct?.sku??"",stock_qty:s.initialProduct?.stock_qty??null,min_stock:s.initialProduct?.min_stock??null,description:s.initialProduct?.description??"",main_photo_path:s.initialProduct?.main_photo_path??"",variants:Array.isArray(s.initialProduct?.variants)?s.initialProduct.variants.map(Z=>({local_id:`v-${Z.id}`,id:Z.id,size:Z.size||"",sku:Z.sku||"",stock_qty:Number(Z.stock_qty||0),is_active:Z.is_active!==!1})):[]}),m=Me({title:""}),y=[{key:"weight_g",label:"",unit:"",step:1},{key:"length_cm",label:"",unit:"",step:.1},{key:"width_cm",label:"",unit:"",step:.1},{key:"height_cm",label:"",unit:"",step:.1}],L=se(()=>!!f.id),K=se(()=>f.currency||"UAH"),P=se(()=>{const Z=f.title?.trim()||" ",O=i.value.find(fe=>fe.id===f.category_id)?.name||" ",$=f.description?.trim()||" ",le=f.sale_price!==null&&f.sale_price!==void 0&&f.sale_price!==""?`${f.sale_price} ${K.value}`:"0.00",G=f.sku?.trim()||"",z=f.stock_qty!==null&&f.stock_qty!==void 0&&f.stock_qty!==""?`${f.stock_qty} .`:"0";return{title:Z,category:O,description:$,price:le,sku:G,stock:z}}),H=()=>{f.variants.length&&(f.stock_qty=f.variants.reduce((Z,U)=>Z+Number(U.stock_qty||0),0))},E=()=>{f.variants.push({local_id:`v-new-${Date.now()}-${Math.random().toString(16).slice(2)}`,size:"",sku:"",stock_qty:0,is_active:!0})},I=Z=>{f.variants.splice(Z,1),H()},V=async()=>{if(!r.value){r.value=!0;try{const{data:Z}=await _e.get("/products/categories",{headers:{Accept:"application/json"}});i.value=Array.isArray(Z)?Z:[]}catch(Z){console.error("   ",Z),i.value=[]}finally{r.value=!1}}},Q=async()=>{if(!u.value){u.value=!0;try{const{data:Z}=await _e.get("/products/colors",{headers:{Accept:"application/json"}});a.value=Array.isArray(Z)?Z:[]}catch(Z){console.error("   ",Z),a.value=[]}finally{u.value=!1}}};Se(()=>f.variants.map(Z=>[Z.size,Z.sku,Z.stock_qty,Z.is_active]),()=>{H()},{deep:!0});function ee(){l.value?.click()}function B(Z){const U=Z.target.files?.[0];U&&(o.value=U,h.value=URL.createObjectURL(U))}function T(Z){const U=Z.dataTransfer.files?.[0];U&&(o.value=U,h.value=URL.createObjectURL(U))}function k(){o.value=null,h.value=""}function _(){p.value=!0}function D(){p.value=!1}function q(){return m.title="",(!f.title||!f.title.trim())&&(m.title="  "),!m.title}function M(){q()&&(v.value=!0)}async function Y(){v.value=!1,n.value=!0;try{const Z=new FormData;Object.entries(f).forEach(([U,O])=>{U!=="main_photo_path"&&U!=="variants"&&O!=null&&(typeof O=="string"&&O.trim()===""&&U!=="title"||Z.append(U,O))}),o.value&&Z.append("main_photo",o.value),Z.append("variants",JSON.stringify(f.variants.map(U=>({size:U.size,sku:U.sku,stock_qty:U.stock_qty,is_active:U.is_active})))),f.variants.length&&(H(),Z.set("stock_qty",f.stock_qty||0)),L.value?(Z.append("_method","PUT"),await _e.post(`/products/${f.id}`,Z,{headers:{"Content-Type":"multipart/form-data"}})):await _e.post("/products",Z,{headers:{"Content-Type":"multipart/form-data"}}),window.location.href="/products"}catch(Z){console.error("Save error",Z),alert("  ")}finally{n.value=!1}}return V(),Q(),(Z,U)=>(c(),d("div",d0,[e("div",u0,[e("div",f0,[e("div",null,[e("div",m0,[U[13]||(U[13]=e("a",{href:"/products",class:"btn btn-icon-back text-muted p-0 me-2"},[e("i",{class:"bi bi-arrow-left fs-5"})],-1)),e("h1",p0,g(L.value?" ":" "),1)]),U[14]||(U[14]=e("p",{class:"text-muted small mb-0 ms-4 ps-2"}," ,     .",-1))]),e("div",v0,[e("button",{type:"button",onClick:_,class:"btn btn-white border shadow-sm"},[...U[15]||(U[15]=[e("i",{class:"bi bi-eye me-2 text-secondary"},null,-1),e("span",{class:"d-none d-md-inline"},"",-1)])]),e("button",{onClick:M,disabled:n.value,class:"btn btn-primary-gradient shadow-sm d-flex align-items-center gap-2 px-4"},[n.value?(c(),d("span",g0)):(c(),d("i",h0)),e("span",null,g(n.value?"...":""),1)],8,b0)])]),e("form",{onSubmit:ge(M,["prevent"])},[e("div",y0,[e("div",_0,[e("div",$0,[U[23]||(U[23]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-info-circle text-primary me-2"}),te("  ")],-1)),e("div",k0,[U[16]||(U[16]=e("label",{class:"form-label-custom"}," ",-1)),ue(e("input",{"onUpdate:modelValue":U[0]||(U[0]=O=>f.title=O),type:"text",class:W(["form-control form-control-modern",{"is-invalid":m.title}]),placeholder:":  Nike Air Max"},null,2),[[he,f.title,void 0,{trim:!0}]]),m.title?(c(),d("div",x0,g(m.title),1)):F("",!0)]),e("div",w0,[e("div",C0,[U[18]||(U[18]=e("label",{class:"form-label-custom"},"",-1)),e("div",S0,[ue(e("select",{"onUpdate:modelValue":U[1]||(U[1]=O=>f.category_id=O),class:"form-select form-select-modern"},[U[17]||(U[17]=e("option",{disabled:"",value:""}," ...",-1)),(c(!0),d(de,null,ve(i.value,O=>(c(),d("option",{key:O.id,value:O.id},g(O.name),9,T0))),128))],512),[[Yt,f.category_id]])])]),e("div",A0,[U[20]||(U[20]=e("label",{class:"form-label-custom"},"",-1)),e("div",O0,[ue(e("select",{"onUpdate:modelValue":U[2]||(U[2]=O=>f.color_id=O),class:"form-select form-select-modern"},[U[19]||(U[19]=e("option",{disabled:"",value:""}," ...",-1)),(c(!0),d(de,null,ve(a.value,O=>(c(),d("option",{key:O.id,value:O.id},g(O.name),9,P0))),128))],512),[[Yt,f.color_id]])])]),e("div",M0,[U[21]||(U[21]=e("label",{class:"form-label-custom"},"SKU ()",-1)),ue(e("input",{"onUpdate:modelValue":U[3]||(U[3]=O=>f.sku=O),type:"text",class:"form-control form-control-modern",placeholder:"AUT-001"},null,512),[[he,f.sku,void 0,{trim:!0}]])])]),e("div",null,[U[22]||(U[22]=e("label",{class:"form-label-custom"},"",-1)),ue(e("textarea",{"onUpdate:modelValue":U[4]||(U[4]=O=>f.description=O),rows:"4",class:"form-control form-control-modern",placeholder:"  , ..."},null,512),[[he,f.description,void 0,{trim:!0}]]),e("div",I0,g(f.description.length)+" ",1)])]),e("div",D0,[U[30]||(U[30]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-currency-dollar text-success me-2"}),te("   ")],-1)),e("div",U0,[e("div",j0,[U[25]||(U[25]=e("label",{class:"form-label-custom"},"",-1)),ue(e("select",{"onUpdate:modelValue":U[5]||(U[5]=O=>f.currency=O),class:"form-select form-select-modern"},[...U[24]||(U[24]=[e("option",{value:"UAH"},"UAH ()",-1),e("option",{value:"USD"},"USD ($)",-1),e("option",{value:"EUR"},"EUR ()",-1)])],512),[[Yt,f.currency]])]),e("div",F0,[U[26]||(U[26]=e("label",{class:"form-label-custom"}," ",-1)),e("div",E0,[ue(e("input",{"onUpdate:modelValue":U[6]||(U[6]=O=>f.cost_price=O),type:"number",min:"0",step:"0.01",class:"form-control border-0",placeholder:"0.00"},null,512),[[he,f.cost_price,void 0,{number:!0}]]),e("span",V0,g(f.currency),1)])]),e("div",L0,[U[27]||(U[27]=e("label",{class:"form-label-custom"}," ",-1)),e("div",N0,[ue(e("input",{"onUpdate:modelValue":U[7]||(U[7]=O=>f.sale_price=O),type:"number",min:"0",step:"0.01",class:"form-control border-0 fw-bold",placeholder:"0.00"},null,512),[[he,f.sale_price,void 0,{number:!0}]]),e("span",R0,g(f.currency),1)])])]),U[31]||(U[31]=e("hr",{class:"border-light my-4"},null,-1)),e("div",q0,[e("div",B0,[U[28]||(U[28]=e("label",{class:"form-label-custom"},"  ",-1)),ue(e("input",{"onUpdate:modelValue":U[8]||(U[8]=O=>f.stock_qty=O),type:"number",min:"0",step:"1",class:"form-control form-control-modern",readonly:f.variants.length>0,placeholder:"0"},null,8,H0),[[he,f.stock_qty,void 0,{number:!0}]])]),e("div",z0,[U[29]||(U[29]=e("label",{class:"form-label-custom"},".  ( )",-1)),ue(e("input",{"onUpdate:modelValue":U[9]||(U[9]=O=>f.min_stock=O),type:"number",min:"0",step:"1",class:"form-control form-control-modern",placeholder:"0"},null,512),[[he,f.min_stock,void 0,{number:!0}]])])])]),e("div",W0,[U[36]||(U[36]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-ui-checks-grid text-primary me-2"}),te(" () ")],-1)),e("div",K0,[e("table",G0,[U[34]||(U[34]=e("thead",null,[e("tr",{class:"text-muted text-uppercase small"},[e("th",{style:{width:"25%"}},""),e("th",{style:{width:"35%"}},"SKU"),e("th",{style:{width:"20%"}},""),e("th",{style:{width:"10%"}},""),e("th",{style:{width:"10%"}})])],-1)),e("tbody",null,[(c(!0),d(de,null,ve(f.variants,(O,$)=>(c(),d("tr",{key:O.local_id},[e("td",null,[ue(e("input",{"onUpdate:modelValue":le=>O.size=le,type:"text",class:"form-control form-control-modern form-control-sm",placeholder:"38-39"},null,8,X0),[[he,O.size,void 0,{trim:!0}]])]),e("td",null,[ue(e("input",{"onUpdate:modelValue":le=>O.sku=le,type:"text",class:"form-control form-control-modern form-control-sm",placeholder:"SKU-38-39"},null,8,J0),[[he,O.sku,void 0,{trim:!0}]])]),e("td",null,[ue(e("input",{"onUpdate:modelValue":le=>O.stock_qty=le,type:"number",min:"0",step:"1",class:"form-control form-control-modern form-control-sm",placeholder:"0"},null,8,Q0),[[he,O.stock_qty,void 0,{number:!0}]])]),e("td",Y0,[ue(e("input",{"onUpdate:modelValue":le=>O.is_active=le,type:"checkbox",class:"form-check-input"},null,8,Z0),[[an,O.is_active]])]),e("td",e$,[e("button",{type:"button",class:"btn btn-light btn-sm",onClick:le=>I($)},[...U[32]||(U[32]=[e("i",{class:"bi bi-trash"},null,-1)])],8,t$)])]))),128)),f.variants.length?F("",!0):(c(),d("tr",s$,[...U[33]||(U[33]=[e("td",{colspan:"5",class:"text-center text-muted small py-3"},"   ",-1)])]))])])]),e("div",{class:"mt-3"},[e("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:E},[...U[35]||(U[35]=[e("i",{class:"bi bi-plus-lg me-1"},null,-1),te("  ",-1)])])])])]),e("div",n$,[e("div",l$,[U[40]||(U[40]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-image text-purple me-2"}),te("  ")],-1)),e("div",{class:W(["upload-area",{"has-image":h.value}]),onClick:ee,onDragover:U[10]||(U[10]=ge(()=>{},["prevent"])),onDrop:ge(T,["prevent"])},[h.value?(c(),d("div",o$,[e("img",{src:h.value,class:"uploaded-img"},null,8,i$),e("div",a$,[e("button",{onClick:ge(k,["stop"]),type:"button",class:"btn btn-danger btn-sm rounded-circle shadow"},[...U[37]||(U[37]=[e("i",{class:"bi bi-trash"},null,-1)])]),U[38]||(U[38]=e("button",{type:"button",class:"btn btn-light btn-sm rounded-pill shadow px-3 mt-2 fw-medium"},"  ",-1))])])):(c(),d("div",r$,[...U[39]||(U[39]=[Fs('<div class="icon-circle mb-3" data-v-fa6ec411><i class="bi bi-cloud-arrow-up text-primary fs-4" data-v-fa6ec411></i></div><div class="fw-bold text-dark mb-1" data-v-fa6ec411> </div><div class="small text-muted mb-3" data-v-fa6ec411>Drag &amp; drop  </div><div class="badge bg-light text-secondary border fw-normal" data-v-fa6ec411>JPG, PNG, WEBP</div>',4)])])),e("input",{ref_key:"fileInput",ref:l,type:"file",class:"d-none",accept:"image/*",onChange:B},null,544)],34)]),e("div",c$,[U[43]||(U[43]=e("div",{class:"card-title-section"},[e("i",{class:"bi bi-box-seam text-warning me-2"}),te(" ")],-1)),e("div",d$,[e("div",u$,[U[42]||(U[42]=e("label",{class:"form-label-custom"},"",-1)),e("div",f$,[ue(e("input",{"onUpdate:modelValue":U[11]||(U[11]=O=>f.weight_g=O),type:"number",class:"form-control border-0",placeholder:"0"},null,512),[[he,f.weight_g,void 0,{number:!0}]]),U[41]||(U[41]=e("span",{class:"input-group-text border-0 bg-transparent text-muted"},"",-1))])]),(c(!0),d(de,null,ve(y.slice(1),O=>(c(),d("div",{class:"col-4",key:O.key},[e("label",m$,g(O.label),1),e("div",p$,[ue(e("input",{"onUpdate:modelValue":$=>f[O.key]=$,type:"number",step:O.step,class:"form-control border-0 px-1 text-center",placeholder:"0"},null,8,v$),[[he,f[O.key],void 0,{number:!0}]])])]))),128))]),U[44]||(U[44]=e("div",{class:"mt-3 small text-muted fst-italic"},[e("i",{class:"bi bi-info-circle me-1"}),te("     ")],-1))])])])],32)]),p.value?(c(),d("div",b$)):F("",!0),p.value?(c(),d("div",{key:1,class:"modal fade show d-block",tabindex:"-1",onClick:ge(D,["self"])},[e("div",g$,[e("div",h$,[e("div",{class:"modal-header border-bottom-0"},[U[45]||(U[45]=e("h5",{class:"modal-title fw-bold"}," ",-1)),e("button",{type:"button",class:"btn-close",onClick:D})]),e("div",y$,[e("div",_$,[e("div",$$,[e("div",k$,[h.value?(c(),d("img",{key:0,src:h.value,class:"img-fluid",style:{"max-height":"100%","object-fit":"contain"}},null,8,x$)):(c(),d("i",w$))])]),e("div",C$,[e("span",S$,g(P.value.category),1),e("h3",T$,g(P.value.title),1),e("div",A$,g(P.value.price),1),e("div",O$,[e("div",P$,[U[46]||(U[46]=e("small",{class:"text-muted d-block"},"SKU",-1)),e("span",M$,g(P.value.sku),1)]),e("div",I$,[U[47]||(U[47]=e("small",{class:"text-muted d-block"},"",-1)),e("span",D$,g(P.value.stock),1)])]),e("p",U$,g(P.value.description),1)])])]),e("div",{class:"modal-footer border-top-0"},[e("button",{type:"button",class:"btn btn-light border rounded-3",onClick:D},"")])])])])):F("",!0),v.value?(c(),d("div",j$)):F("",!0),v.value?(c(),d("div",F$,[e("div",E$,[e("div",V$,[e("div",L$,[U[48]||(U[48]=e("div",{class:"mb-3 d-inline-flex align-items-center justify-content-center rounded-circle bg-success bg-opacity-10 text-success",style:{width:"60px",height:"60px"}},[e("i",{class:"bi bi-check-lg fs-2"})],-1)),U[49]||(U[49]=e("h5",{class:"mb-2 fw-bold"}," ?",-1)),U[50]||(U[50]=e("p",{class:"text-muted small mb-4"},"     .",-1)),e("div",N$,[e("button",{type:"button",class:"btn btn-primary-gradient shadow-sm",onClick:Y},""),e("button",{type:"button",class:"btn btn-light text-muted",onClick:U[12]||(U[12]=O=>v.value=!1)},"")])])])])])):F("",!0)]))}},q$=xe(R$,[["__scopeId","data-v-fa6ec411"]]);function B$(t=1){return we.get("/api/chat/list",{params:{page:t}})}function H$(){return we.get("/api/chat/funnel")}function z$(t,s=null){return we.get(`/api/chat/conversations/by-customer/${t}`,{params:s?{platform:s}:{}})}function W$(){return we.get("/api/chat/tags")}function Zi(t,s){return we.patch(`/api/chat/conversations/${t}/stage`,{stage:s})}function K$(t,s){return we.patch(`/api/chat/conversations/${t}/tags`,{tag_ids:s})}function vo(t){return we.get(`/api/chat/${t}/messages`)}function G$(t){return t instanceof FormData?we.post("/api/chat/send",t,{headers:{"Content-Type":"multipart/form-data"}}):we.post("/api/chat/send",t)}function X$(t){return we.post("/api/chat/mark-read",{customer_id:t})}function J$(t){return we.post(`/api/chat/${t}/sync`)}function Q$(t,s){return we.get(`/api/chat/threads/${t}/messages/updates`,{params:{since_id:s}}).then(n=>n.data)}function Y$(){return we.get("/api/chat/templates")}function ea(){return we.get("/api/saved-files")}function ta(t){return we.post("/api/saved-files",t,{headers:{"Content-Type":"multipart/form-data"}})}function Z$(t){return we.delete(`/api/saved-files/${t}`)}function ek(){const t=S([]),s=S(null),n=S([]),l=S(!1),o=S(!1),i=S(!1),a=S(!1),r=S(""),u=S(1),h=S(1);let v=null;const p=se(()=>t.value.find(ee=>ee.customer_id===s.value)||null);async function f(ee=1){if(ee===1)l.value=!0;else{if(o.value)return;o.value=!0}r.value="";try{const{data:B}=await B$(ee),T=B?.data||B||[];ee===1?t.value=T:t.value=[...t.value,...T],u.value=B?.current_page||ee,h.value=B?.last_page||ee}catch(B){console.error("    ",B),r.value="    "}finally{l.value=!1,o.value=!1}}function m(){u.value>=h.value||f(u.value+1)}async function y(ee){if(ee&&s.value!==ee){H(),s.value=ee,n.value=[],r.value="",l.value=!0;try{const{data:B}=await vo(ee);n.value=B?.data||B||[],X$(ee).catch(()=>{}),t.value=t.value.map(T=>T.customer_id===ee?{...T,unread_count:0}:T),P(ee)}catch(B){console.error("   ",B),r.value="   "}finally{l.value=!1}}}async function L(ee){if(!ee?.customer_id||!ee?.text&&(!ee?.files||!ee.files.length)&&(!ee?.remote_urls||!ee.remote_urls.length))return;i.value=!0,r.value="";const B=`temp-${Date.now()}`,T=[],k=[],_=ee.files||[],D=ee.remote_urls||[];_.length?_.forEach((q,M)=>{const Y=URL.createObjectURL(q),Z={id:`${B}-${M}`,text:M===0&&ee.text||null,direction:"outbound",created_at:new Date().toISOString(),attachments:[{type:q.type?.startsWith("image/")?"image":"file",url:Y}],status:"sending",is_read:!0};T.push(Z),k.push(Z.id)}):(T.push({id:B,text:ee.text||null,direction:"outbound",created_at:new Date().toISOString(),attachments:[],status:"sending",is_read:!0}),k.push(B)),D.length&&D.forEach((q,M)=>{const Y={id:`${B}-remote-${M}`,text:_.length===0&&M===0&&ee.text||null,direction:"outbound",created_at:new Date().toISOString(),attachments:[{type:"image",url:q}],status:"sending",is_read:!0};T.push(Y),k.push(Y.id)}),n.value=[...n.value,...T];try{const q=new FormData;q.append("customer_id",ee.customer_id),ee.text&&q.append("text",ee.text),_.length&&_.forEach(U=>q.append("files[]",U)),D.length&&D.forEach(U=>q.append("remote_urls[]",U));const{data:M}=await G$(q),Y=M?.data||M,Z=Array.isArray(Y)?Y:[Y];if(n.value=n.value.map(U=>{const O=k.indexOf(U.id);return O===-1?U:Z[O]||U}),Z.length<k.length){const U=k.slice(Z.length);n.value=n.value.filter(O=>!U.includes(O.id))}t.value=t.value.map(U=>U.customer_id===ee.customer_id?{...U,last_message:Z[0]?.text||ee.text||"",last_message_time:Z[0]?.created_at||new Date().toISOString()}:U)}catch(q){console.error("   ",q),r.value="   "}finally{i.value=!1}}async function K(ee){if(ee){a.value=!0;try{await J$(ee);const{data:B}=await vo(ee);n.value=B?.data||B||[],await f()}catch(B){console.error("   ",B),r.value="   "}finally{a.value=!1}}}function P(ee){H();const B=async()=>{if(s.value!==ee)return;const T=[...n.value].reverse().find(_=>!String(_.id).startsWith("temp-")),k=T?T.id:0;try{const _=await Q$(ee,k),D=_?.messages||[];D.length&&D.forEach(q=>{if(n.value.find(Z=>Z.id===q.id))return;const Y=n.value.find(Z=>String(Z.id).startsWith("temp-")&&Z.direction==="outbound"&&q.direction==="outbound"&&Z.text===q.text);Y?(Y.id=q.id,Y.created_at=q.created_at,Y.status="sent",q.attachments&&q.attachments.length&&(Y.attachments=q.attachments)):n.value.push(q)}),_?.thread&&E(_.thread)}catch(_){console.warn("Polling skip:",_.message)}s.value===ee&&(v=setTimeout(B,3e3))};B()}function H(){v&&(clearTimeout(v),v=null)}function E(ee){const B=t.value.findIndex(T=>T.customer_id===ee.id);B!==-1&&(t.value[B]={...t.value[B],last_message:ee.last_message_text,last_message_time:ee.last_message_at})}async function I(ee,B){if(ee)try{const{data:T}=await Zi(ee,B);t.value=t.value.map(k=>k.conversation_id===ee?{...k,stage:T?.stage??B??null}:k)}catch(T){console.error("    ",T),r.value="    "}}async function V(ee,B,T=null){if(ee){T&&(t.value=t.value.map(k=>k.conversation_id===ee?{...k,tags:T}:k));try{const{data:k}=await K$(ee,B),_=k?.data||[];t.value=t.value.map(D=>D.conversation_id===ee?{...D,tags:_}:D)}catch(k){console.error("    ",k),r.value="    "}}}async function Q(ee,B=null){if(!ee)return null;const T=t.value.find(k=>k.customer_id!==ee?!1:B?k.platform===B:!0);if(T)return T;try{const{data:k}=await z$(ee,B),_=k?.data||null;if(_)return t.value=[_,...t.value],_}catch(k){console.error("    ",k)}return null}return{conversations:t,activeChatId:s,activeChat:p,messages:n,isLoading:l,isLoadingMore:o,isSending:i,isSyncing:a,error:r,currentPage:u,lastPage:h,fetchConversations:f,loadMoreConversations:m,selectChat:y,sendMessage:L,forceSync:K,startPolling:P,stopPolling:H,getConversationTags:W$,updateStage:I,updateTags:V,ensureConversation:Q}}const tk=["data-view"],sk={class:"chat-container"},nk={class:"chat-sidebar"},lk={class:"sidebar-inner"},ok={class:"chat-thread"},ik={class:"thread-inner"},ak={class:"chat-profile"},rk={class:"profile-inner"},ck={__name:"ChatLayout",props:{viewMode:{type:String,default:"list"}},setup(t){return(s,n)=>(c(),d("div",{class:"chat-wrapper","data-view":t.viewMode},[e("div",sk,[e("aside",nk,[e("div",lk,[Pn(s.$slots,"sidebar",{},void 0)])]),e("main",ok,[e("div",ik,[Pn(s.$slots,"thread",{},void 0)])]),e("aside",ak,[e("div",rk,[Pn(s.$slots,"profile",{},void 0)])])])],8,tk))}},dk=xe(ck,[["__scopeId","data-v-051e5c13"]]),uk={class:"avatar-container"},fk=["src"],mk={class:"platform-badge"},pk={class:"info-container"},vk={class:"info-row-top"},bk={class:"chat-name"},gk={class:"meta-right"},hk={class:"chat-time"},yk={class:"info-row-bottom"},_k={class:"chat-preview"},$k={key:0,class:"unread-count"},kk={key:0,class:"info-row-tags"},xk={key:0,class:"tag-chip tag-chip-more"},wk={__name:"ChatSidebarItem",props:{item:{type:Object,required:!0},isActive:{type:Boolean,default:!1}},emits:["select"],setup(t){const s=t,n=se(()=>s.item.platform==="instagram"?"bi bi-instagram instagram-icon":"bi bi-messenger messenger-icon"),l=se(()=>s.item.platform==="instagram"?"bg-instagram":"bg-messenger"),o=se(()=>{const p=s.item.stage||"";return{new:"",waiting_reply:"",order_confirmed:"",done:"",closed:""}[p]||""}),i=se(()=>{const p=s.item.stage||"";return p?`stage-${p}`:""}),a=se(()=>s.item.tags||[]),r=se(()=>a.value.slice(0,2)),u=se(()=>Math.max(0,a.value.length-2)),h=p=>{if(!p)return{};const f=p.startsWith("#")&&p.length===4?`#${p.slice(1).split("").map(m=>m+m).join("")}`:p;return f.startsWith("#")&&f.length===7?{backgroundColor:`${f}1a`,color:f,borderColor:`${f}33`}:{color:f,borderColor:f}},v=se(()=>{if(!s.item.last_message_time)return"";const p=new Date(s.item.last_message_time),f=new Date;return p.getDate()===f.getDate()&&p.getMonth()===f.getMonth()&&p.getFullYear()===f.getFullYear()?p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):p.toLocaleDateString("uk-UA",{day:"2-digit",month:"short"})});return(p,f)=>(c(),d("button",{type:"button",class:W(["chat-item",{"is-active":t.isActive,"is-unread":t.item.unread_count>0}]),onClick:f[0]||(f[0]=m=>p.$emit("select",t.item))},[e("div",uk,[t.item.customer_avatar?(c(),d("img",{key:0,src:t.item.customer_avatar,class:"avatar-img",alt:"User"},null,8,fk)):(c(),d("div",{key:1,class:W(["avatar-placeholder",l.value])},g((t.item.customer_name||"?").charAt(0).toUpperCase()),3)),e("div",mk,[e("i",{class:W(n.value)},null,2)])]),e("div",pk,[e("div",vk,[e("h4",bk,g(t.item.customer_name||" "),1),e("div",gk,[o.value?(c(),d("span",{key:0,class:W(["stage-badge",i.value])},g(o.value),3)):F("",!0),e("span",hk,g(v.value),1)])]),e("div",yk,[e("p",_k,g(t.item.last_message||""),1),t.item.unread_count>0?(c(),d("span",$k,g(t.item.unread_count>99?"99+":t.item.unread_count),1)):F("",!0)]),r.value.length?(c(),d("div",kk,[(c(!0),d(de,null,ve(r.value,m=>(c(),d("span",{key:m.id,class:"tag-chip",style:Te(h(m.color))},g(m.name),5))),128)),u.value?(c(),d("span",xk," +"+g(u.value),1)):F("",!0)])):F("",!0)])],2))}},Ck=xe(wk,[["__scopeId","data-v-21e86923"]]),Sk={class:"chat-sidebar-inner"},Tk={key:0,class:"chat-sidebar-empty"},Ak={key:1,class:"chat-sidebar-loading"},Ok={__name:"ChatSidebar",props:{conversations:{type:Array,default:()=>[]},activeChatId:{type:[Number,String,null],default:null},isLoadingMore:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},disableScroll:{type:Boolean,default:!1}},emits:["select","load-more"],setup(t,{emit:s}){const n=t,l=s;function o(i){if(!n.hasMore||n.isLoadingMore||n.disableScroll)return;const{scrollTop:a,clientHeight:r,scrollHeight:u}=i.target;a+r>=u-50&&l("load-more")}return(i,a)=>(c(),d("div",Sk,[e("div",{class:"chat-sidebar-list custom-scrollbar",onScroll:o},[(c(!0),d(de,null,ve(t.conversations,r=>(c(),Ne(Ck,{key:r.customer_id,item:r,"is-active":r.customer_id===t.activeChatId,onSelect:u=>i.$emit("select",r)},null,8,["item","is-active","onSelect"]))),128)),t.conversations.length?F("",!0):(c(),d("div",Tk,[...a[0]||(a[0]=[e("div",{class:"empty-icon-wrapper"},[e("i",{class:"bi bi-chat-left-text"})],-1),e("p",null,"  ",-1)])])),t.isLoadingMore?(c(),d("div",Ak,[...a[1]||(a[1]=[e("div",{class:"spinner"},null,-1)])])):F("",!0)],32)]))}},Pk=xe(Ok,[["__scopeId","data-v-6ea6bccf"]]),Mk={class:"chat-message-bubble"},Ik={key:0,class:"reply-wrapper"},Dk={key:0,class:"reply-media"},Uk={key:0,class:"reply-video-placeholder"},jk={key:1,class:"reply-image"},Fk=["src"],Ek={class:"reply-content"},Vk={class:"reply-author"},Lk={class:"reply-text"},Nk={key:1,class:"message-attachments"},Rk={key:0,class:"attachment-img-wrapper"},qk={key:0,class:"attachment-spinner"},Bk={key:1,class:"attachment-error"},Hk=["src","onLoad","onError","onClick"],zk=["href"],Wk={key:2,class:"message-text"},Kk={class:"chat-message-time"},Gk={key:0,class:"ms-1 status-icon"},Xk={__name:"ChatMessage",props:{message:{type:Object,required:!0},isMine:{type:Boolean,default:!1}},emits:["image-click"],setup(t){const s=t,n=y=>!y||typeof y!="string"?"":y.startsWith("http")?y:y.startsWith("chat/")?`/${y}`:(y.startsWith("/chat/"),y),l=se(()=>Array.isArray(s.message.attachments)&&s.message.attachments.length>0),o=se(()=>l.value?s.message.attachments.map(y=>{let L=y?.payload?.url||y?.url||(typeof y=="string"?y:"");const K=n(L),P=typeof K=="string"&&K.match(/\.(jpeg|jpg|gif|png|webp|bmp)($|\?)/i);return{type:y?.type==="image"||P?"image":"file",url:K}}):[]),i=S([]);Se(o,y=>{i.value=y.map(()=>({loading:!0,error:!1}))},{immediate:!0});const a=y=>i.value[y]?.loading!==!1,r=y=>i.value[y]?.error===!0,u=y=>{i.value[y]&&(i.value[y].loading=!1)},h=y=>{i.value[y]&&(i.value[y].loading=!1,i.value[y].error=!0)},v=se(()=>s.message.reply_to?.attachments?.length>0),p=se(()=>{if(!v.value)return!1;const y=s.message.reply_to.attachments[0],L=y?.url||"";return y?.type==="video"||typeof L=="string"&&L.match(/\.(mp4|mov|webm)($|\?)/i)}),f=se(()=>s.message.created_at?new Date(s.message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""),m=se(()=>s.message.status==="sending"?"bi-clock":s.message.is_read||s.message.status==="read"?"bi-check2-all":"bi-check2");return(y,L)=>(c(),d("div",{class:W(["chat-message",{mine:t.isMine}])},[e("div",Mk,[t.message.reply_to?(c(),d("div",Ik,[v.value?(c(),d("div",Dk,[p.value?(c(),d("div",Uk,[...L[0]||(L[0]=[e("i",{class:"bi bi-play-circle-fill"},null,-1)])])):(c(),d("div",jk,[e("img",{src:n(t.message.reply_to.attachments[0].url),alt:"Reply attachment",loading:"lazy"},null,8,Fk)]))])):F("",!0),e("div",Ek,[e("span",Vk,g(t.message.reply_to.direction==="outbound"?"":""),1),e("span",Lk,g(t.message.reply_to.text||""),1)])])):F("",!0),l.value?(c(),d("div",Nk,[(c(!0),d(de,null,ve(o.value,(K,P)=>(c(),d(de,{key:P},[K.type==="image"?(c(),d("div",Rk,[a(P)?(c(),d("div",qk)):r(P)?(c(),d("div",Bk,[...L[1]||(L[1]=[e("i",{class:"bi bi-image"},null,-1)])])):F("",!0),e("img",{src:K.url,alt:"attachment",loading:"lazy",class:W({"is-loading":a(P)}),onLoad:H=>u(P),onError:H=>h(P),onClick:H=>y.$emit("image-click",K.url)},null,42,Hk)])):(c(),d("a",{key:1,href:K.url,target:"_blank",class:"attachment-file"},[...L[2]||(L[2]=[e("i",{class:"bi bi-paperclip"},null,-1),e("span",null," ",-1)])],8,zk))],64))),128))])):F("",!0),t.message.text?(c(),d("div",Wk,g(t.message.text),1)):F("",!0)]),e("div",Kk,[te(g(f.value)+" ",1),t.isMine?(c(),d("span",Gk,[e("i",{class:W(["bi",m.value])},null,2)])):F("",!0)])],2))}},Jk=xe(Xk,[["__scopeId","data-v-89a7fb84"]]),Qk={class:"templates-modal"},Yk={class:"templates-header"},Zk={class:"header-actions"},ex={class:"templates-list custom-scrollbar"},tx={key:0,class:"state-msg"},sx={key:1,class:"state-msg text-gray-400"},nx=["onClick"],lx={class:"template-info"},ox={class:"template-title"},ix={class:"template-preview"},ax={__name:"ChatTemplates",setup(t){const s=S([]),n=S(!1);return Re(async()=>{n.value=!0;try{const{data:l}=await Y$();s.value=l.data||l||[]}catch(l){console.error(l)}finally{n.value=!1}}),(l,o)=>(c(),Ne(Ct,{to:"body"},[pe(Fe,{name:"templates-fade"},{default:Oe(()=>[e("div",{class:"templates-overlay",onClick:o[1]||(o[1]=ge(i=>l.$emit("close"),["self"]))},[e("div",Qk,[e("div",Yk,[o[4]||(o[4]=e("h4",{class:"title"}," ",-1)),e("div",Zk,[o[3]||(o[3]=e("a",{href:"/templates/create",target:"_blank",class:"add-link"},"+ ",-1)),e("button",{type:"button",class:"close-btn",onClick:o[0]||(o[0]=i=>l.$emit("close"))},[...o[2]||(o[2]=[e("i",{class:"bi bi-x-lg"},null,-1)])])])]),e("div",ex,[n.value?(c(),d("div",tx,[...o[5]||(o[5]=[e("div",{class:"spinner"},null,-1)])])):s.value.length===0?(c(),d("div",sx,"   ")):(c(!0),d(de,{key:2},ve(s.value,i=>(c(),d("div",{key:i.id,class:"template-item",onClick:a=>l.$emit("select",i.content)},[o[6]||(o[6]=e("div",{class:"template-icon"},[e("i",{class:"bi bi-card-text"})],-1)),e("div",lx,[e("div",ox,g(i.title),1),e("div",ix,g(i.content),1)])],8,nx))),128))])])])]),_:1})]))}},rx=xe(ax,[["__scopeId","data-v-28b895f3"]]),cx={class:"gallery-modal"},dx={class:"header"},ux={class:"header-actions"},fx={class:"upload-btn"},mx={class:"grid-container custom-scrollbar"},px={key:0,class:"state-msg"},vx={key:1,class:"state-msg text-gray-400"},bx=["onClick"],gx=["src"],hx={key:1,class:"video-placeholder"},yx={key:0,class:"footer"},_x={__name:"ChatGallery",emits:["confirm","close"],setup(t,{emit:s}){const n=s,l=S([]),o=S([]),i=S(!1),a=async()=>{i.value=!0;try{const{data:v}=await ea();l.value=v?.data||v||[]}finally{i.value=!1}},r=async v=>{if(!v.target.files.length)return;const p=new FormData;p.append("file",v.target.files[0]),await ta(p),await a(),v.target.value=""},u=v=>{o.value.includes(v.id)?o.value=o.value.filter(p=>p!==v.id):o.value.push(v.id)},h=()=>{const v=l.value.filter(p=>o.value.includes(p.id));n("confirm",v),o.value=[],n("close")};return Re(a),(v,p)=>(c(),Ne(Ct,{to:"body"},[pe(Fe,{name:"gallery-fade"},{default:Oe(()=>[e("div",{class:"gallery-overlay",onClick:p[1]||(p[1]=ge(f=>n("close"),["self"]))},[e("div",cx,[e("div",dx,[p[4]||(p[4]=e("h4",null,"",-1)),e("div",ux,[e("label",fx,[p[2]||(p[2]=e("i",{class:"bi bi-plus-lg"},null,-1)),e("input",{type:"file",hidden:"",onChange:r,accept:"image/*,video/*"},null,32)]),e("button",{type:"button",class:"close-btn",onClick:p[0]||(p[0]=f=>n("close"))},[...p[3]||(p[3]=[e("i",{class:"bi bi-x-lg"},null,-1)])])])]),e("div",mx,[i.value?(c(),d("div",px,[...p[5]||(p[5]=[e("div",{class:"spinner"},null,-1)])])):l.value.length===0?(c(),d("div",vx,"  ")):(c(!0),d(de,{key:2},ve(l.value,f=>(c(),d("div",{key:f.id,class:W(["grid-item",{selected:o.value.includes(f.id)}]),onClick:m=>u(f)},[f.type==="image"?(c(),d("img",{key:0,src:f.url,loading:"lazy"},null,8,gx)):(c(),d("div",hx,[...p[6]||(p[6]=[e("i",{class:"bi bi-play-circle-fill"},null,-1)])])),p[7]||(p[7]=e("div",{class:"check-overlay"},[e("i",{class:"bi bi-check-lg"})],-1))],10,bx))),128))]),o.value.length>0?(c(),d("div",yx,[e("button",{class:"confirm-btn",onClick:h},"  ("+g(o.value.length)+") ",1)])):F("",!0)])])]),_:1})]))}},$x=xe(_x,[["__scopeId","data-v-6c85a50d"]]),kx={class:"chat-input-wrapper"},xx={key:0,class:"file-preview-area"},wx=["title"],Cx=["src"],Sx={key:1,class:"bi bi-file-earmark-text file-icon"},Tx=["onClick"],Ax={class:"chat-input-main-row"},Ox={class:"input-area"},Px=["disabled","onKeydown"],Mx=["disabled","title"],Ix={key:0,class:"bi bi-send-fill send-icon"},Dx={class:"chat-tools"},Ux={class:"relative-container"},jx={class:"relative-container"},Fx={class:"input-footer"},Ex={key:0,class:"error-text"},Vx={key:1,class:"hint-text mobile-hide"},Lx=5*1024*1024,Nx={__name:"ChatInput",props:{disabled:{type:Boolean,default:!1}},emits:["send"],setup(t,{emit:s}){const n=s,l=S(""),o=S([]),i=S(""),a=S(null),r=S(null),u=S(!1),h=S(!1),v=se(()=>l.value.trim().length>0||o.value.length>0);function p(){a.value.click()}function f(E){const I=Array.from(E.target.files||[]);I.length&&(i.value="",I.forEach(V=>{if(V.size>Lx){i.value=` ${V.name}  ( 5 )`;return}const Q=V.type.startsWith("image/")?URL.createObjectURL(V):"";o.value.push({id:`${Date.now()}_${Math.random().toString(16).slice(2)}`,file:V,previewUrl:Q,isImage:V.type.startsWith("image/"),isRemote:!1})}),a.value.value="")}function m(E){const I=o.value[E];I?.previewUrl&&I.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(I.previewUrl),o.value.splice(E,1)}function y(E){l.value=(l.value?l.value+" ":"")+E,u.value=!1,r.value&&(r.value.focus(),setTimeout(K,0))}function L(E){E.forEach(I=>{o.value.push({id:`remote-${I.id}`,file:{name:I.filename},previewUrl:I.url,isImage:I.type==="image",isRemote:!0,remoteUrl:I.url})}),h.value=!1,r.value&&(r.value.focus(),setTimeout(K,0))}function K(){const E=r.value;E&&(E.style.height="auto",E.style.height=Math.min(E.scrollHeight,150)+"px")}function P(){n("send",{text:"",files:[],remote_urls:[]})}function H(){if(!v.value)return;const E=o.value.filter(V=>!V.isRemote).map(V=>V.file),I=o.value.filter(V=>V.isRemote).map(V=>V.remoteUrl);n("send",{text:l.value.trim(),files:E,remote_urls:I}),l.value="",o.value.forEach(V=>{V.previewUrl&&V.previewUrl.startsWith("blob:")&&URL.revokeObjectURL(V.previewUrl)}),o.value=[],i.value="",r.value&&(r.value.style.height="auto",r.value.focus())}return(E,I)=>{const V=dr("click-outside");return c(),d("div",kx,[o.value.length?(c(),d("div",xx,[(c(!0),d(de,null,ve(o.value,(Q,ee)=>(c(),d("div",{key:Q.id,class:"file-badge"},[e("div",{class:"file-info",title:Q.file.name},[Q.isImage?(c(),d("img",{key:0,src:Q.previewUrl,class:"file-thumb",alt:"preview"},null,8,Cx)):(c(),d("i",Sx))],8,wx),e("button",{type:"button",class:"remove-btn",onClick:B=>m(ee)},[...I[5]||(I[5]=[e("i",{class:"bi bi-x"},null,-1)])],8,Tx)]))),128))])):F("",!0),e("form",{class:W(["chat-input-bar-container",{"has-error":i.value}]),onSubmit:ge(H,["prevent"])},[e("div",Ax,[e("div",Ox,[ue(e("textarea",{"onUpdate:modelValue":I[0]||(I[0]=Q=>l.value=Q),class:"chat-textarea custom-scrollbar",rows:"1",placeholder:" ...",disabled:t.disabled,onKeydown:$l(ge(H,["ctrl","prevent"]),["enter"]),onInput:K,ref_key:"textareaRef",ref:r},null,40,Px),[[he,l.value]])]),e("button",{class:"action-btn",type:"submit",disabled:t.disabled,title:v.value?"":" "},[v.value?(c(),d("i",Ix)):(c(),d("i",{key:1,class:"bi bi-hand-thumbs-up-fill like-icon",onClick:ge(P,["prevent"])}))],8,Mx)]),e("div",Dx,[e("div",Ux,[h.value?(c(),Ne($x,{key:0,onConfirm:L,onClose:I[1]||(I[1]=Q=>h.value=!1)})):F("",!0),e("button",{type:"button",class:W(["tool-btn",{active:h.value}]),title:"",onClick:I[2]||(I[2]=Q=>h.value=!h.value)},[...I[6]||(I[6]=[e("i",{class:"bi bi-handbag"},null,-1)])],2)]),e("button",{type:"button",class:W(["tool-btn",{active:o.value.length}]),onClick:p,title:" "},[...I[7]||(I[7]=[e("i",{class:"bi bi-paperclip"},null,-1)])],2),e("input",{type:"file",ref_key:"fileInputRef",ref:a,style:{display:"none"},onChange:f,accept:"image/*",multiple:""},null,544),e("div",jx,[u.value?ue((c(),Ne(rx,{key:0,onSelect:y,onClose:I[3]||(I[3]=Q=>u.value=!1)},null,512)),[[V,()=>u.value=!1]]):F("",!0),e("button",{type:"button",class:W(["tool-btn",{active:u.value}]),title:" ",onClick:I[4]||(I[4]=Q=>u.value=!u.value)},[...I[8]||(I[8]=[e("i",{class:"bi bi-chat-square-dots"},null,-1)])],2)])])],34),e("div",Fx,[i.value?(c(),d("span",Ex,g(i.value),1)):(c(),d("span",Vx,"Enter   , Ctrl+Enter  "))])])}}},Rx=xe(Nx,[["__scopeId","data-v-37e5e9d2"]]),qx={class:"chat-thread-wrapper"},Bx={class:"chat-thread-header"},Hx={class:"header-left-group"},zx={class:"chat-thread-user"},Wx={class:"chat-thread-avatar"},Kx=["src"],Gx={key:1,class:"chat-thread-avatar-fallback"},Xx={class:"chat-thread-meta"},Jx={class:"chat-thread-title"},Qx={class:"meta-row"},Yx={key:0,class:"chat-thread-platform"},Zx={key:1,class:"chat-time-separator"},ew={class:"chat-thread-actions"},tw={class:"stage-control"},sw=["disabled"],nw=["value"],lw=["disabled"],ow={key:0,class:"tag-count"},iw=["disabled"],aw={key:0,class:"chat-loading"},rw={key:1,class:"chat-thread-empty"},cw={key:0},dw={class:"modal-dialog modal-dialog-centered modal-sm"},uw={class:"modal-content border-0 shadow-lg rounded-4 overflow-hidden"},fw={class:"modal-body px-4 py-3"},mw={key:0,class:"text-center py-4"},pw={key:1,class:"d-flex flex-column gap-2"},vw=["onClick"],bw={key:0,class:"bi bi-check-lg text-primary"},gw={key:0,class:"text-muted small fst-italic"},hw={__name:"ChatThread",props:{activeChat:{type:Object,default:null},conversationTags:{type:Array,default:()=>[]},tagsLoading:{type:Boolean,default:!1},messages:{type:Array,default:()=>[]},isSending:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},isSyncing:{type:Boolean,default:!1}},emits:["send","force-sync","open-list","open-profile","update-stage","update-tags"],setup(t,{emit:s}){const n=t,l=s,o=S(null),i=S(!1),a=S([]),r=S(""),u=[{value:"",label:" "},{value:"new",label:""},{value:"waiting_reply",label:" "},{value:"order_confirmed",label:" "},{value:"done",label:""},{value:"closed",label:""}],h=se(()=>(n.activeChat?.tags||[]).map(P=>P.id));function v(){o.value&&(o.value.scrollTop=o.value.scrollHeight)}const p=()=>{a.value=[...h.value],i.value=!0},f=()=>{i.value=!1},m=P=>{const H=a.value.indexOf(P);H===-1?a.value.push(P):a.value.splice(H,1)},y=()=>{l("update-tags",{conversationId:n.activeChat?.conversation_id,tagIds:[...a.value]}),f()},L=()=>{l("update-stage",{conversationId:n.activeChat?.conversation_id,stage:r.value||null})},K=P=>{if(!P)return{};const H=P.startsWith("#")&&P.length===4?`#${P.slice(1).split("").map(E=>E+E).join("")}`:P;return H.startsWith("#")&&H.length===7?{backgroundColor:`${H}1a`,color:H,borderColor:`${H}33`}:{color:H,borderColor:H}};return Re(()=>{v()}),Se(()=>n.messages.length,async()=>{await Qt(),v()}),Se(()=>n.activeChat?.stage,P=>{r.value=P??""},{immediate:!0}),Se(()=>n.loading,async P=>{P||(await Qt(),v())}),(P,H)=>(c(),d("div",qx,[e("header",Bx,[e("div",Hx,[e("button",{type:"button",class:"chat-thread-list-btn",title:" ",onClick:H[0]||(H[0]=E=>P.$emit("open-list"))},[...H[5]||(H[5]=[e("i",{class:"bi bi-list"},null,-1)])]),e("div",zx,[e("div",Wx,[t.activeChat?.customer_avatar?(c(),d("img",{key:0,src:t.activeChat.customer_avatar,alt:"avatar"},null,8,Kx)):(c(),d("span",Gx,g((t.activeChat?.customer_name||"?").charAt(0).toUpperCase()),1))]),e("div",Xx,[e("h2",Jx,g(t.activeChat?.customer_name||""),1),e("div",Qx,[t.activeChat?.platform?(c(),d("div",Yx,[e("i",{class:W(t.activeChat.platform==="instagram"?"bi bi-instagram":"bi bi-messenger")},null,2),e("span",null,g(t.activeChat.platform==="instagram"?"Instagram":"Facebook"),1)])):F("",!0),t.activeChat?.last_message_time?(c(),d("span",Zx," "+g(t.activeChat.last_message_time),1)):F("",!0)])])])]),e("div",ew,[e("div",tw,[H[6]||(H[6]=e("span",{class:"stage-label"},"",-1)),ue(e("select",{"onUpdate:modelValue":H[1]||(H[1]=E=>r.value=E),class:"stage-select",disabled:!t.activeChat?.conversation_id,onChange:L},[(c(),d(de,null,ve(u,E=>e("option",{key:E.value,value:E.value},g(E.label),9,nw)),64))],40,sw),[[Yt,r.value]])]),e("button",{type:"button",class:"action-btn-pill",disabled:t.tagsLoading||!t.activeChat?.conversation_id,onClick:p},[H[7]||(H[7]=te("  ",-1)),t.activeChat?.tags?.length?(c(),d("span",ow,"("+g(t.activeChat.tags.length)+")",1)):F("",!0)],8,lw),e("button",{type:"button",class:W(["action-btn-icon",{"is-syncing":t.isSyncing}]),disabled:t.isSyncing||t.loading,title:" ",onClick:H[2]||(H[2]=E=>P.$emit("force-sync"))},[...H[8]||(H[8]=[e("i",{class:"bi bi-arrow-clockwise"},null,-1)])],10,iw),e("button",{type:"button",class:"action-btn-icon",title:" ",onClick:H[3]||(H[3]=E=>P.$emit("open-profile"))},[...H[9]||(H[9]=[e("i",{class:"bi bi-person-circle"},null,-1)])])])]),e("div",{ref_key:"threadBody",ref:o,class:"chat-thread-body"},[t.loading?(c(),d("div",aw,[...H[10]||(H[10]=[e("div",{class:"spinner"},null,-1),e("span",null," ...",-1)])])):t.messages.length?(c(!0),d(de,{key:2},ve(t.messages,E=>(c(),Ne(Jk,{key:E.id,message:E,"is-mine":E.direction==="outbound"},null,8,["message","is-mine"]))),128)):(c(),d("div",rw,"   "))],512),pe(Rx,{disabled:t.isSending||t.loading,onSend:H[4]||(H[4]=E=>P.$emit("send",{...E,customer_id:t.activeChat?.customer_id}))},null,8,["disabled"]),(c(),Ne(Ct,{to:"body"},[i.value?(c(),d("div",cw,[H[13]||(H[13]=e("div",{class:"modal-backdrop fade show bg-dark bg-opacity-25"},null,-1)),e("div",{class:"modal fade show d-block",tabindex:"-1",onClick:ge(f,["self"])},[e("div",dw,[e("div",uw,[e("div",{class:"modal-header border-bottom-0 pb-0 px-4 pt-4"},[H[11]||(H[11]=e("h5",{class:"modal-title fw-bold text-dark fs-5"}," ",-1)),e("button",{type:"button",class:"btn-close shadow-none",onClick:f})]),e("div",fw,[t.tagsLoading?(c(),d("div",mw,[...H[12]||(H[12]=[e("div",{class:"spinner-border text-primary",role:"status"},null,-1)])])):(c(),d("div",pw,[(c(!0),d(de,null,ve(t.conversationTags,E=>(c(),d("div",{key:E.id,class:W(["tag-option",{selected:a.value.includes(E.id)}]),onClick:I=>m(E.id)},[e("span",{class:"tag-chip",style:Te(K(E.color))},[E.icon?(c(),d("i",{key:0,class:W(["bi",E.icon])},null,2)):F("",!0),te(" "+g(E.name),1)],4),a.value.includes(E.id)?(c(),d("i",bw)):F("",!0)],10,vw))),128)),t.conversationTags.length?F("",!0):(c(),d("div",gw,"    "))]))]),e("div",{class:"modal-footer border-top-0 px-4 pb-4 pt-2"},[e("div",{class:"d-grid gap-2 w-100"},[e("button",{type:"button",class:"btn btn-primary fw-bold rounded-3",onClick:y},"  ")])])])])])])):F("",!0)]))]))}},yw=xe(hw,[["__scopeId","data-v-6da1195a"]]),_w={class:"chat-empty-container"},$w={class:"chat-empty-content"},kw={__name:"ChatEmptyState",emits:["open-list"],setup(t){return(s,n)=>(c(),d("div",_w,[e("div",$w,[n[1]||(n[1]=e("div",{class:"chat-empty-icon"},[e("i",{class:"bi bi-chat-left-dots"})],-1)),n[2]||(n[2]=e("h3",{class:"chat-empty-title"}," ",-1)),n[3]||(n[3]=e("p",{class:"chat-empty-subtitle"},"     ,        ",-1)),e("button",{type:"button",class:"chat-empty-button",onClick:n[0]||(n[0]=l=>s.$emit("open-list"))},"   ")])]))}},xw=xe(kw,[["__scopeId","data-v-22e0c730"]]),ww={key:0,class:"modal-window"},Cw={class:"modal-body custom-scrollbar"},Sw={class:"form-section"},Tw={class:"grid-2"},Aw={class:"form-section"},Ow={class:"input-group-modern"},Pw={key:0,class:"spinner-input"},Mw={key:0,class:"dropdown-menu-custom custom-scrollbar"},Iw=["onMousedown"],Dw={class:"item-main"},Uw={class:"item-sub"},jw={key:"warehouse",class:"form-section"},Fw=["disabled"],Ew={key:0,class:"spinner-input"},Vw={key:0,class:"dropdown-menu-custom custom-scrollbar"},Lw=["onMousedown"],Nw={class:"item-main"},Rw={key:"courier",class:"form-section"},qw={class:"input-stack"},Bw={class:"input-group-modern mb-2"},Hw=["disabled"],zw={key:0,class:"spinner-input"},Ww={key:1,class:"dropdown-menu-custom"},Kw={key:0,class:"dropdown-item text-muted small"},Gw=["onMousedown"],Xw={class:"grid-2 small-gap"},Jw={class:"input-group-modern"},Qw={class:"input-group-modern"},Yw={class:"form-section"},Zw={class:"toggle-switch"},e2={class:"modal-footer"},t2=["disabled"],s2={key:0},n2={key:1},l2={__name:"ChatOrderDeliveryModal",props:{open:Boolean,modelValue:{type:Object,default:()=>({})}},emits:["close","save","update:modelValue"],setup(t,{emit:s}){const n=t,l=s,o=S(!1),i=S(!1),a=Me({carrier:"nova_poshta",delivery_type:"warehouse",city_name:"",city_ref:"",settlement_ref:"",warehouse_name:"",warehouse_ref:"",street_name:"",street_ref:"",building:"",apartment:"",address_note:"",payer:"recipient"}),r=S(""),u=S(""),h=S(""),v=S([]),p=S([]),f=S([]),m=S(!1),y=S(!1),L=S(!1),K=S(!1),P=S(!1),H=S(!1);let E,I,V;const Q=Me({city:!1,warehouse:!1,street:!1}),ee=()=>{const G=n.modelValue||{};Object.assign(a,{...a,...G}),Q.city=!0,r.value=a.city_name||"",Q.warehouse=!0,u.value=a.warehouse_name||"",Q.street=!0,h.value=a.street_name||""};Se(()=>n.open,G=>{G&&ee()},{immediate:!0}),Se(()=>n.modelValue,G=>{n.open&&G&&ee()},{deep:!0}),Se(a,()=>{l("update:modelValue",{...a})},{deep:!0});const B=G=>{a.delivery_type=G,G==="courier"?(a.warehouse_ref="",a.warehouse_name="",u.value="",p.value=[]):(a.street_name="",a.street_ref="",a.building="",a.apartment="",h.value="",f.value=[])},T=()=>{o.value||(o.value=!0,setTimeout(()=>{i.value=!0,setTimeout(()=>{l("save",{...a}),k()},600)},600))},k=()=>{o.value&&!i.value||(l("close"),setTimeout(()=>{o.value=!1,i.value=!1},300))};Se(r,G=>{if(Q.city){Q.city=!1;return}if(a.city_name=G,a.city_ref="",a.settlement_ref="",a.street_ref="",E&&clearTimeout(E),!G||G.length<2){v.value=[];return}E=setTimeout(async()=>{K.value=!0;try{const{data:z}=await Xi(G);v.value=z?.data||[]}finally{K.value=!1}},500)}),Se(u,G=>{if(Q.warehouse){Q.warehouse=!1;return}a.warehouse_name=G,I&&clearTimeout(I),a.city_ref&&(I=setTimeout(async()=>{P.value=!0;try{const{data:z}=await Xs({cityRef:a.city_ref,query:G});p.value=z?.data||[]}finally{P.value=!1}},500))});const _=G=>{a.city_ref=G.ref,a.settlement_ref="",a.city_name=G.name,Q.city=!0,r.value=G.name,m.value=!1,a.warehouse_ref="",a.warehouse_name="",u.value="",a.street_ref="",a.street_name="",h.value="",a.delivery_type==="warehouse"&&(Q.warehouse=!1,I=setTimeout(async()=>{const{data:z}=await Xs({cityRef:G.ref,query:""});p.value=z?.data||[]},100))},D=G=>{a.warehouse_ref=G.ref,a.warehouse_name=G.name,Q.warehouse=!0,u.value=G.name,y.value=!1};Se(h,G=>{if(Q.street){Q.street=!1;return}if(a.street_name=G,a.street_ref="",V&&clearTimeout(V),!(!a.city_ref||a.delivery_type!=="courier")){if(!G||G.length<2){f.value=[];return}V=setTimeout(async()=>M(G),500)}});const q=async G=>{P.value=!0;try{const{data:z}=await Xs({cityRef:a.city_ref,query:G});p.value=z?.data||[]}finally{P.value=!1}},M=async G=>{if(!a.city_ref||!G||G.length<2){f.value=[];return}H.value=!0;try{const{data:z}=await zf({cityRef:a.city_ref,query:G,limit:25});f.value=z?.data||[]}finally{H.value=!1}},Y=G=>{a.street_name=G.name,a.street_ref=G.ref||"",Q.street=!0,h.value=G.name,L.value=!1},Z=()=>{y.value=!0,a.city_ref&&!p.value.length&&q("")},U=()=>{L.value=!0},O=()=>setTimeout(()=>m.value=!1,200),$=()=>setTimeout(()=>y.value=!1,200),le=()=>setTimeout(()=>L.value=!1,200);return(G,z)=>(c(),Ne(Ct,{to:"body"},[pe(Fe,{name:"modal-fade"},{default:Oe(()=>[t.open?(c(),d("div",{key:0,class:"modal-backdrop",onClick:ge(k,["self"])},[pe(Fe,{name:"modal-slide"},{default:Oe(()=>[t.open?(c(),d("div",ww,[e("div",{class:"modal-header"},[z[11]||(z[11]=e("div",{class:"header-content"},[e("div",{class:"icon-brand"},[e("i",{class:"bi bi-box-seam-fill"})]),e("div",{class:"title-group"},[e("h3",null," "),e("span",{class:"brand-tag"}," ")])],-1)),e("button",{class:"btn-close",onClick:k},[...z[10]||(z[10]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",Cw,[e("section",Sw,[z[14]||(z[14]=e("label",{class:"section-label"}," ",-1)),e("div",Tw,[e("div",{class:W(["option-card",{active:a.delivery_type==="warehouse"}]),onClick:z[0]||(z[0]=fe=>B("warehouse"))},[...z[12]||(z[12]=[e("div",{class:"card-icon"},[e("i",{class:"bi bi-building"})],-1),e("span",{class:"card-title"}," ",-1),e("i",{class:"bi bi-check-circle-fill check-icon"},null,-1)])],2),e("div",{class:W(["option-card",{active:a.delivery_type==="courier"}]),onClick:z[1]||(z[1]=fe=>B("courier"))},[...z[13]||(z[13]=[e("div",{class:"card-icon"},[e("i",{class:"bi bi-truck"})],-1),e("span",{class:"card-title"},"'",-1),e("i",{class:"bi bi-check-circle-fill check-icon"},null,-1)])],2)])]),e("section",Aw,[z[16]||(z[16]=e("label",{class:"section-label"}," ",-1)),e("div",Ow,[z[15]||(z[15]=e("i",{class:"bi bi-geo-alt input-icon"},null,-1)),ue(e("input",{type:"text",class:"modern-input","onUpdate:modelValue":z[2]||(z[2]=fe=>r.value=fe),onFocus:z[3]||(z[3]=fe=>m.value=!0),onBlur:O,placeholder:"  ..."},null,544),[[he,r.value]]),K.value?(c(),d("div",Pw)):F("",!0),pe(Fe,{name:"fade"},{default:Oe(()=>[m.value&&v.value.length?(c(),d("div",Mw,[(c(!0),d(de,null,ve(v.value,fe=>(c(),d("div",{key:fe.ref,class:"dropdown-item",onMousedown:ge(Le=>_(fe),["prevent"])},[e("div",Dw,g(fe.name),1),e("div",Uw,g(fe.area),1)],40,Iw))),128))])):F("",!0)]),_:1})])]),pe(Fe,{name:"slide-up",mode:"out-in"},{default:Oe(()=>[a.delivery_type==="warehouse"?(c(),d("section",jw,[z[18]||(z[18]=e("label",{class:"section-label"},"  ",-1)),e("div",{class:W(["input-group-modern",{disabled:!a.city_ref}])},[z[17]||(z[17]=e("i",{class:"bi bi-signpost-2 input-icon"},null,-1)),ue(e("input",{type:"text",class:"modern-input","onUpdate:modelValue":z[4]||(z[4]=fe=>u.value=fe),disabled:!a.city_ref,onFocus:Z,onBlur:$,placeholder:"   ..."},null,40,Fw),[[he,u.value]]),P.value?(c(),d("div",Ew)):F("",!0),pe(Fe,{name:"fade"},{default:Oe(()=>[y.value&&p.value.length?(c(),d("div",Vw,[(c(!0),d(de,null,ve(p.value,fe=>(c(),d("div",{key:fe.ref,class:"dropdown-item",onMousedown:ge(Le=>D(fe),["prevent"])},[e("div",Nw,g(fe.name),1)],40,Lw))),128))])):F("",!0)]),_:1})],2)])):(c(),d("section",Rw,[z[20]||(z[20]=e("label",{class:"section-label"}," ",-1)),e("div",qw,[e("div",Bw,[z[19]||(z[19]=e("i",{class:"bi bi-map input-icon"},null,-1)),ue(e("input",{type:"text",class:"modern-input","onUpdate:modelValue":z[5]||(z[5]=fe=>h.value=fe),disabled:!a.city_ref,onFocus:U,onBlur:le,placeholder:" (2+ )"},null,40,Hw),[[he,h.value]]),H.value?(c(),d("div",zw)):F("",!0),L.value&&(f.value.length||H.value)?(c(),d("div",Ww,[H.value?(c(),d("div",Kw,"...")):F("",!0),(c(!0),d(de,null,ve(f.value,fe=>(c(),d("div",{key:fe.ref,class:"dropdown-item",onMousedown:ge(Le=>Y(fe),["prevent"])},g(fe.name),41,Gw))),128))])):F("",!0)]),e("div",Xw,[e("div",Jw,[ue(e("input",{type:"text",class:"modern-input center-text","onUpdate:modelValue":z[6]||(z[6]=fe=>a.building=fe),placeholder:"."},null,512),[[he,a.building]])]),e("div",Qw,[ue(e("input",{type:"text",class:"modern-input center-text","onUpdate:modelValue":z[7]||(z[7]=fe=>a.apartment=fe),placeholder:"."},null,512),[[he,a.apartment]])])])])]))]),_:1}),e("section",Yw,[z[21]||(z[21]=e("label",{class:"section-label"}," ",-1)),e("div",Zw,[e("div",{class:"switch-bg",style:Te({left:a.payer==="recipient"?"4px":"50%"})},null,4),e("button",{type:"button",class:W(["switch-btn",{active:a.payer==="recipient"}]),onClick:z[8]||(z[8]=fe=>a.payer="recipient")},"  ",2),e("button",{type:"button",class:W(["switch-btn",{active:a.payer==="sender"}]),onClick:z[9]||(z[9]=fe=>a.payer="sender")},"  ",2)])]),z[22]||(z[22]=e("div",{class:"mobile-spacer"},null,-1))]),e("div",e2,[e("button",{class:W(["btn-save-primary",{success:i.value}]),disabled:o.value,onClick:T},[i.value?(c(),d("span",n2,[...z[23]||(z[23]=[e("i",{class:"bi bi-check-lg"},null,-1),te(" ",-1)])])):(c(),d("span",s2,""))],10,t2)])])):F("",!0)]),_:1})])):F("",!0)]),_:1})]))}},o2=xe(l2,[["__scopeId","data-v-3251140e"]]),i2={key:0,class:"payment-overlay"},a2={class:"payment-modal"},r2={class:"modal-header"},c2=["disabled"],d2={class:"modal-body"},u2={class:"modal-footer"},f2=["disabled"],m2=["disabled"],p2={key:0},v2={key:1,class:"bi bi-check-circle-fill"},b2={__name:"ChatOrderPaymentModal",props:{open:{type:Boolean,default:!1},modelValue:{type:Object,default:()=>({method:"",prepay_amount:0,currency:"UAH"})}},emits:["close","save","update:modelValue"],setup(t,{emit:s}){const n=t,l=s;let o=Me({method:"",prepay_amount:0,currency:"UAH"});const i=S(!1),a=S(!1);let r=null;const u=p=>{o.method=p?.method||"",o.prepay_amount=Number(p?.prepay_amount||0),o.currency=p?.currency||"UAH"};Se(()=>n.open,p=>{p&&(i.value=!1,a.value=!1,u(n.modelValue))}),Se(()=>n.modelValue,p=>{n.open&&u(p)},{deep:!0,immediate:!0}),Se(()=>o.method,p=>{p!=="prepay"&&(o.prepay_amount=0)}),Se(()=>o.prepay_amount,p=>{p<0&&(o.prepay_amount=0)}),Se(o,()=>{l("update:modelValue",{method:o.method||"",prepay_amount:o.method==="prepay"?Number(o.prepay_amount||0):0,currency:o.currency||"UAH"})},{deep:!0});const h=()=>{i.value||l("close")},v=()=>{if(i.value)return;i.value=!0,a.value=!0;const p={method:o.method||"",prepay_amount:o.method==="prepay"?Number(o.prepay_amount||0):0,currency:o.currency||"UAH"};r=setTimeout(()=>{l("update:modelValue",p),l("save",p),l("close"),i.value=!1},1200)};return bn(()=>{r&&clearTimeout(r)}),(p,f)=>(c(),Ne(Ct,{to:"body"},[pe(Fe,{name:"fade"},{default:Oe(()=>[t.open?(c(),d("div",i2,[e("div",a2,[e("div",r2,[f[2]||(f[2]=e("div",{class:"header-title"},[e("span",{class:"payment-badge"},""),e("h3",null," ")],-1)),e("button",{class:"btn-close",type:"button",disabled:i.value,onClick:h},[...f[1]||(f[1]=[e("i",{class:"bi bi-x-lg"},null,-1)])],8,c2)]),e("div",d2,[pe(kl,{modelValue:Ae(o),"onUpdate:modelValue":f[0]||(f[0]=m=>ze(o)?o.value=m:o=m),currency:"UAH",errors:{}},null,8,["modelValue"])]),e("div",u2,[e("button",{class:"btn-cancel",type:"button",disabled:i.value,onClick:h},"  ",8,f2),e("button",{class:W(["btn-save",{"success-state":a.value}]),type:"button",disabled:i.value,onClick:v},[a.value?(c(),d("i",v2)):(c(),d("span",p2," "))],10,m2)])])])):F("",!0)]),_:1})]))}},g2=xe(b2,[["__scopeId","data-v-420b3c12"]]),h2={class:"order-panel-elite"},y2={class:"elite-header"},_2={class:"header-left-group"},$2={class:"title-stack"},k2={key:0,class:"draft-badge"},x2={class:"panel-scroller custom-scrollbar"},w2={key:0,class:"order-success-view"},C2={class:"success-meta"},S2={key:2,class:"order-flow-container"},T2={class:"flow-section"},A2={class:"cart-items-list"},O2=["src"],P2={class:"card-main"},M2={class:"card-header-row"},I2={class:"p-title"},D2=["onClick"],U2={class:"card-controls-row"},j2={class:"mini-stepper"},F2=["onClick","disabled"],E2={class:"qty"},V2=["onClick"],L2={class:"p-price-total"},N2={class:"flow-section"},R2={class:"delivery-info"},q2={key:0,class:"delivery-details-stack"},B2={class:"delivery-row city-text"},H2={class:"delivery-row point-text"},z2={class:"delivery-row payer-text"},W2={key:1,class:"delivery-placeholder"},K2={class:"flow-section"},G2={class:"delivery-info"},X2={key:0,class:"delivery-details-stack"},J2={class:"delivery-row city-text"},Q2={class:"delivery-row point-text"},Y2={key:1,class:"delivery-placeholder"},Z2={class:"elite-footer"},e4={class:"summary-box"},t4={class:"summary-info"},s4={class:"total-amount-glow"},n4=["disabled"],l4={key:0},o4={key:1,class:"btn-spinner"},i4={class:"picker-window"},a4={class:"picker-header-refined"},r4={class:"picker-search"},c4=["value"],d4={class:"picker-body-list custom-scrollbar"},u4={key:0,class:"picker-loading"},f4={key:1,class:"picker-empty"},m4=["onClick"],p4=["src"],v4={class:"p-data"},b4={class:"p-row"},g4={class:"p-name"},h4={class:"p-price"},y4={class:"p-meta"},_4={class:"p-sku"},$4=["onClick"],k4={key:0,class:"picker-group-variants"},x4=["onClick"],w4={key:0,class:"bi bi-check-lg"},C4={class:"p-data"},S4={class:"p-row"},T4={class:"p-name"},A4={class:"p-price"},O4={class:"p-meta"},P4={class:"p-sku"},M4={class:"picker-footer-refined"},I4=["disabled"],D4="https://via.placeholder.com/96x96?text=%20",U4={__name:"ChatOrderPanel",props:{open:{type:Boolean,default:!1},customer:{type:Object,default:null},orderDraft:{type:Object,required:!0},submitState:{type:Object,default:()=>({status:"idle"})}},emits:["close","submit","minimize","close-success"],setup(t,{emit:s}){const n=t,l=s,o=S(!1),i=S([]),a=S(new Set),r=S(!1),u=S(!1),h=S([]),v=S(""),p=S([]),f=S(!1),m=S(!1),y=async()=>{f.value=!0;try{const{data:me}=await we.get("/products",{params:{category:v.value||void 0,with_variants:!0,per_page:200}}),X=me||{},be=Array.isArray(X?.data)?X.data:Array.isArray(X)?X:[];p.value=qe(be)}catch(me){console.error("Product fetch failed",me),p.value=[]}finally{f.value=!1}},L=async()=>{if(!m.value){m.value=!0;try{const{data:me}=await we.get("/products/categories");h.value=Array.isArray(me)?me:[]}catch(me){console.error("Categories fetch failed",me),h.value=[]}finally{m.value=!1}}};Se(v,()=>{o.value&&y()});const K=se(()=>n.orderDraft.items?.length>0),P=se(()=>n.submitState?.status==="loading"),H=se(()=>n.submitState?.status==="success"),E=se(()=>{if(!n.orderDraft.items?.length)return!1;const me=n.orderDraft.delivery||{};return!(!n.orderDraft.payment?.method||!me.delivery_type||!me.city_ref||me.delivery_type==="warehouse"&&!me.warehouse_ref)}),I=se(()=>(n.orderDraft.items||[]).reduce((me,X)=>me+X.price*X.qty,0)),V=se(()=>!!n.orderDraft.payment?.method),Q={cod:{label:" ",desc:"  "},card:{label:"  IBAN",desc:" "},prepay:{label:" ",desc:" + "}},ee=se(()=>Q[n.orderDraft.payment?.method]?.label||""),B=se(()=>{const me=n.orderDraft.payment?.method;return me?me==="prepay"?` : ${fe(n.orderDraft.payment?.prepay_amount)} `:Q[me]?.desc||"":""}),T=me=>[me.street_name,me.building&&`. ${me.building}`,me.apartment&&`. ${me.apartment}`].filter(Boolean).join(", "),k=()=>{i.value=n.orderDraft.items.map(me=>me.product_variant_id||me.id),v.value="",a.value=new Set,o.value=!0,p.value.length||y(),h.value.length||L()},_=me=>{const X=i.value.indexOf(me.id);X>-1?i.value.splice(X,1):i.value.push(me.id)},D=me=>{const X=new Set(a.value);X.has(me)?X.delete(me):X.add(me),a.value=X},q=me=>a.value.has(me),M=()=>{const me=p.value.filter(X=>i.value.includes(X.id)).map(X=>{const be=n.orderDraft.items.find(A=>(A.product_variant_id||A.id)===X.id),ie=Number(X.sale_price||0);return{id:X.id,product_id:X.product_id||X.id,product_variant_id:X.product_variant_id||null,title:X.title,sku:X.sku,size:X.size||"",price:ie,qty:be?be.qty:1,total:ie*(be?be.qty:1),image:X.main_photo_url||""}});n.orderDraft.items.splice(0,n.orderDraft.items.length,...me),o.value=!1},Y=me=>{n.orderDraft.items.splice(me,1)},Z=()=>{r.value=!0},U=()=>{u.value=!0},O=()=>{l("close")},$=()=>{l("minimize")},le=()=>{E.value&&l("submit")},G=()=>{l("close-success")},z=()=>{const me=n.submitState?.orderId||n.submitState?.orderNumber;me&&(window.location.href=`/orders/${me}`)},fe=me=>Number(me||0).toFixed(2),Le=me=>{const X=Number(me.stock_qty??0),be=Number(me.min_stock??0);return X<=0||be>0&&X<=be},qe=me=>me.flatMap(X=>{const be={product_id:X.id,sale_price:X.sale_price||0,main_photo_url:X.main_photo_url||"",min_stock:X.min_stock??0,base_title:X.title||"",base_sku:X.sku||""};return Array.isArray(X.variants)&&X.variants.length?X.variants.map(ie=>({id:ie.id,product_id:X.id,product_variant_id:ie.id,title:`${X.title}${ie.size?` (${ie.size})`:""}`,sku:ie.sku||X.sku||"",size:ie.size||"",stock_qty:Number(ie.stock_qty||0),...be})):[{id:X.id,product_id:X.id,product_variant_id:null,title:X.title||"",sku:X.sku||"",size:"",stock_qty:Number(X.stock_qty||0),...be}]}),Be=se(()=>{const me=new Map;return p.value.forEach(X=>{const be=me.get(X.product_id)||{product_id:X.product_id,title:X.base_title||X.title||"",sku:X.base_sku||"",sale_price:X.sale_price||0,main_photo_url:X.main_photo_url||"",total_stock:0,variants:[]};be.variants.push(X),be.total_stock+=Number(X.stock_qty||0),me.set(X.product_id,be)}),Array.from(me.values())});return(me,X)=>(c(),Ne(Ct,{to:"body"},[pe(Fe,{name:"fade-overlay"},{default:Oe(()=>[ue(e("div",{class:"ultra-backdrop",onClick:$},null,512),[[Zn,t.open]])]),_:1}),pe(Fe,{name:"slide-premium-elastic"},{default:Oe(()=>[ue(e("div",h2,[e("header",y2,[e("div",_2,[e("div",{class:W(["status-icon-glow",{"has-items":K.value}])},[...X[8]||(X[8]=[e("i",{class:"bi bi-bag-check-fill"},null,-1)])],2),e("div",$2,[X[10]||(X[10]=e("h3",null,"",-1)),K.value?(c(),d("div",k2,[...X[9]||(X[9]=[e("span",{class:"pulse-dot"},null,-1),te("  ",-1)])])):F("",!0)])]),e("div",{class:"header-right-group"},[e("button",{class:"action-circle-btn",onClick:$,title:""},[...X[11]||(X[11]=[e("i",{class:"bi bi-fullscreen-exit"},null,-1)])]),e("button",{class:"action-circle-btn delete",onClick:O,title:""},[...X[12]||(X[12]=[e("i",{class:"bi bi-trash3"},null,-1)])])])]),e("div",x2,[H.value?(c(),d("div",w2,[X[15]||(X[15]=e("div",{class:"success-icon"},[e("i",{class:"bi bi-check-circle-fill"})],-1)),X[16]||(X[16]=e("h4",null," !",-1)),e("div",C2,[e("div",null,[X[13]||(X[13]=te(": ",-1)),e("strong",null,g(t.submitState.orderNumber||t.submitState.orderId),1)]),e("div",null,[X[14]||(X[14]=te(": ",-1)),e("strong",null,g(fe(t.submitState.totalAmount||I.value))+" ",1)])]),e("div",{class:"success-actions"},[e("button",{class:"btn-success-secondary",type:"button",onClick:z},""),e("button",{class:"btn-success-primary",type:"button",onClick:G},"")])])):(c(),Ne(Fe,{key:1,name:"zoom-in"},{default:Oe(()=>[K.value?F("",!0):(c(),d("div",{key:0,class:"empty-state-card",onClick:k},[...X[17]||(X[17]=[e("div",{class:"animated-blob"},[e("i",{class:"bi bi-plus-lg"})],-1),e("h4",null," ",-1),e("p",null,"   ",-1)])]))]),_:1})),K.value&&!H.value?(c(),d("div",S2,[e("section",T2,[e("div",{class:"section-heading"},[X[19]||(X[19]=e("span",null," ",-1)),e("button",{class:"add-more-btn-outlined",onClick:k},[...X[18]||(X[18]=[e("i",{class:"bi bi-plus-circle"},null,-1),te("   ",-1)])])]),e("div",A2,[(c(!0),d(de,null,ve(t.orderDraft.items,(be,ie)=>(c(),d("div",{key:be.id,class:"elite-cart-card"},[e("img",{src:be.image,class:"card-img",alt:"p"},null,8,O2),e("div",P2,[e("div",M2,[e("span",I2,g(be.title),1),e("button",{class:"btn-delete-accessible",onClick:A=>Y(ie)},[...X[20]||(X[20]=[e("i",{class:"bi bi-x-lg"},null,-1)])],8,D2)]),e("div",U2,[e("div",j2,[e("button",{onClick:A=>be.qty>1?be.qty--:null,disabled:be.qty<=1},"",8,F2),e("span",E2,g(be.qty),1),e("button",{onClick:A=>be.qty++},"+",8,V2)]),e("div",L2,[te(g(fe(be.price*be.qty))+" ",1),X[21]||(X[21]=e("b",null,"",-1))])])])]))),128))])]),e("section",N2,[X[26]||(X[26]=e("div",{class:"section-heading"}," ",-1)),e("div",{class:"delivery-trigger-card",onClick:Z},[X[24]||(X[24]=e("div",{class:"delivery-icon"},[e("i",{class:"bi bi-truck"})],-1)),e("div",R2,[X[23]||(X[23]=e("span",{class:"delivery-label-red"}," ",-1)),t.orderDraft.delivery&&t.orderDraft.delivery.city_name?(c(),d("div",q2,[e("div",B2,g(t.orderDraft.delivery.city_name),1),e("div",H2,g(t.orderDraft.delivery.delivery_type==="courier"?T(t.orderDraft.delivery):t.orderDraft.delivery.warehouse_name),1),e("div",z2,[X[22]||(X[22]=te(" : ",-1)),e("span",null,g(t.orderDraft.delivery.payer==="sender"?"":""),1)])])):(c(),d("span",W2,"   ..."))]),X[25]||(X[25]=e("i",{class:"bi bi-chevron-right arrow-icon"},null,-1))])]),e("section",K2,[X[30]||(X[30]=e("div",{class:"section-heading"},"",-1)),e("div",{class:"delivery-trigger-card",onClick:U},[X[28]||(X[28]=e("div",{class:"delivery-icon"},[e("i",{class:"bi bi-cash-stack"})],-1)),e("div",G2,[X[27]||(X[27]=e("span",{class:"delivery-label-red",style:{color:"#10b981"}},"",-1)),V.value?(c(),d("div",X2,[e("div",J2,g(ee.value),1),e("div",Q2,g(B.value),1)])):(c(),d("span",Y2,"  ..."))]),X[29]||(X[29]=e("i",{class:"bi bi-chevron-right arrow-icon"},null,-1))])])])):F("",!0)]),e("footer",Z2,[e("div",e4,[e("div",t4,[X[31]||(X[31]=e("span",null," :",-1)),e("div",s4,g(fe(I.value))+" ",1)]),e("button",{class:"btn-checkout-premium",disabled:!E.value||P.value||H.value,onClick:le},[P.value?(c(),d("span",o4)):(c(),d("span",l4,"")),X[32]||(X[32]=e("div",{class:"shimmer-line"},null,-1))],8,n4)])])],512),[[Zn,t.open]])]),_:1}),pe(Fe,{name:"modal-spring"},{default:Oe(()=>[o.value?(c(),d("div",{key:0,class:"picker-overlay-elite",onClick:X[3]||(X[3]=ge(be=>o.value=!1,["self"]))},[e("div",i4,[e("div",a4,[X[35]||(X[35]=e("div",{class:"picker-title-group"},[e("h4",null," ")],-1)),e("div",r4,[ue(e("select",{"onUpdate:modelValue":X[0]||(X[0]=be=>v.value=be)},[X[33]||(X[33]=e("option",{value:""}," ",-1)),(c(!0),d(de,null,ve(h.value,be=>(c(),d("option",{key:be.id,value:be.id},g(be.name),9,c4))),128))],512),[[Yt,v.value]])]),e("button",{class:"close-picker-btn",onClick:X[1]||(X[1]=be=>o.value=!1)},[...X[34]||(X[34]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",d4,[f.value?(c(),d("div",u4,[...X[36]||(X[36]=[e("div",{class:"spinner-border text-primary"},null,-1),e("span",null," ...",-1)])])):p.value.length?(c(!0),d(de,{key:2},ve(Be.value,be=>(c(),d("div",{key:be.product_id,class:"picker-group"},[e("div",{class:"picker-group-head",onClick:ie=>D(be.product_id)},[e("img",{src:be.main_photo_url||D4,class:"p-img-refined"},null,8,p4),e("div",v4,[e("div",b4,[e("span",g4,g(be.title),1),e("span",h4,g(fe(be.sale_price))+" ",1)]),e("div",y4,[e("span",_4,g(be.sku||""),1),e("span",{class:W(["p-stock",{"low-stock":be.total_stock<=0}])},"  "+g(be.total_stock)+" . ",3)])]),e("button",{type:"button",class:"picker-group-toggle",onClick:ge(ie=>D(be.product_id),["stop"])},[e("i",{class:W(["bi",q(be.product_id)?"bi-chevron-up":"bi-chevron-down"])},null,2)],8,$4)],8,m4),q(be.product_id)?(c(),d("div",k4,[(c(!0),d(de,null,ve(be.variants,ie=>(c(),d("div",{key:ie.id,class:W(["picker-row-modern",{active:i.value.includes(ie.id)}]),onClick:A=>_(ie)},[e("div",{class:W(["cb-modern",{checked:i.value.includes(ie.id)}])},[i.value.includes(ie.id)?(c(),d("i",w4)):F("",!0)],2),e("div",C4,[e("div",S4,[e("span",T4,g(ie.size||" "),1),e("span",A4,g(fe(ie.sale_price))+" ",1)]),e("div",O4,[e("span",P4,g(ie.sku||""),1),e("span",{class:W(["p-stock",{"low-stock":Le(ie)}])},g(ie.stock_qty??0)+" . ",3)])])],10,x4))),128))])):F("",!0)]))),128)):(c(),d("div",f4,"    "))]),e("div",M4,[e("button",{class:"btn-cancel-light",onClick:X[2]||(X[2]=be=>o.value=!1)},""),e("button",{class:"btn-add-highlight",disabled:!i.value.length,onClick:M},"  ("+g(i.value.length)+") ",9,I4)])])])):F("",!0)]),_:1}),pe(o2,{open:r.value,modelValue:t.orderDraft.delivery,"onUpdate:modelValue":X[4]||(X[4]=be=>t.orderDraft.delivery=be),onClose:X[5]||(X[5]=be=>r.value=!1)},null,8,["open","modelValue"]),pe(g2,{open:u.value,modelValue:t.orderDraft.payment,"onUpdate:modelValue":X[6]||(X[6]=be=>t.orderDraft.payment=be),onClose:X[7]||(X[7]=be=>u.value=!1)},null,8,["open","modelValue"])]))}},j4=xe(U4,[["__scopeId","data-v-222bb9a4"]]),F4={class:"right-sidebar"},E4={class:"profile-mobile-header"},V4={class:"header-section"},L4={class:"avatar-wrap"},N4=["src"],R4={key:1,class:"avatar-placeholder"},q4={class:"info"},B4={key:1,class:"name-edit-flow"},H4={class:"inputs-stack"},z4={class:"id-badge"},W4={class:"fields-section"},K4={class:"field-row"},G4={class:"input-col"},X4={key:2,class:"error-text"},J4={class:"field-row"},Q4={class:"input-col"},Y4={class:"action-row"},Z4=["disabled"],e3={key:0,class:"spinner"},t3=["disabled","title"],s3={class:"history-container"},n3={class:"section-header"},l3={key:0,class:"loader-mini"},o3={key:1,class:"counter-badge"},i3={key:0,class:"empty-history"},a3={key:1,class:"orders-list"},r3=["onClick"],c3={class:"header-left"},d3={class:"order-id-row"},u3={class:"id-text"},f3={class:"date-text"},m3={class:"header-right"},p3={class:"price-tag"},v3={class:"order-body-wrapper"},b3={class:"order-body"},g3={class:"info-block"},h3={class:"block-content"},y3={class:"delivery-dest"},_3={key:0,class:"sub-text"},$3={key:0,class:"ttn-row"},k3={class:"ttn-code"},x3={class:"info-block"},w3={class:"products-stack"},C3=["src"],S3={class:"mini-info"},T3={class:"mini-title"},A3={class:"mini-meta"},O3={class:"qty"},P3={key:0,class:"price"},M3=["href"],I3={key:1,class:"empty-state"},D3="https://via.placeholder.com/48x48?text=%20",U3={__name:"ChatCustomerProfile",props:{customer:Object},emits:["close","update-stage"],setup(t,{emit:s}){const n=t,l=s,o=S(!1),i=S(!1),a=S(!1),r=S(!1),u=S(!1),h=S(!1),v=S(null),p=S(!1),f=S([]),m=S(!1),y=S(null),L=Me({}),K=S(!1),P=Me({items:[],delivery:{first_name:"",last_name:"",middle_name:"",phone:"",delivery_type:"warehouse",carrier:"nova_poshta",city_name:"",city_ref:"",settlement_ref:"",warehouse_name:"",warehouse_ref:"",street_name:"",street_ref:"",building:"",apartment:"",address_note:"",payer:"recipient"},payment:{method:"",prepay_amount:0,currency:"UAH"}});function H(){P.items=[],P.delivery={first_name:"",last_name:"",middle_name:"",phone:"",delivery_type:"warehouse",carrier:"nova_poshta",city_name:"",city_ref:"",settlement_ref:"",warehouse_name:"",warehouse_ref:"",street_name:"",street_ref:"",building:"",apartment:"",address_note:"",payer:"recipient"},P.payment={method:"",prepay_amount:0,currency:"UAH"}}const E=Me({show:!1,message:"",type:"success"}),I=Me({status:"idle",orderId:null,orderNumber:null,totalAmount:0}),V=Me({first_name:"",last_name:"",phone:"",email:""}),Q=/^[--' \-]+$/,ee=se(()=>V.first_name.trim().length>=2&&V.last_name.trim().length>=2&&Q.test(V.first_name)&&Q.test(V.last_name)),B=se(()=>/^380\d{9}$/.test(V.phone)),T=se(()=>ee.value&&B.value);Se(()=>V.phone,A=>{if(!A)return;let b=A.replace(/\D/g,"");b.startsWith("0")?b="38"+b:b.startsWith("38")&&!b.startsWith("380")&&(b="380"+b.slice(2)),b.startsWith("3800")&&(b="380"+b.slice(4)),V.phone=b.substring(0,12)});const k=se(()=>n.customer?.id??n.customer?.customer_id??null),_=se(()=>`${V.first_name} ${V.last_name}`.trim()||n.customer?.customer_name||" "),D=se(()=>_.value?_.value[0].toUpperCase():"?"),q=se(()=>n.customer?.fb_profile_pic||n.customer?.customer_avatar||""),M=se(()=>(n.customer?.source||n.customer?.platform)==="instagram"||!!n.customer?.instagram_user_id);Se(()=>n.customer,A=>{A&&(V.first_name=A.first_name||"",V.last_name=A.last_name||"",V.phone=A.phone?A.phone.replace(/\D/g,""):"",V.email=A.email||"",u.value=!!V.phone,h.value=!!V.email,o.value=!1,K.value=!1,H(),k.value&&$(k.value))},{immediate:!0}),Se(k,A=>{A&&$(A)});const Y=(A,b="success")=>{E.message=A,E.type=b,E.show=!0,setTimeout(()=>{E.show=!1},3e3)},Z=()=>{o.value=!0},U=async()=>{u.value=!0,V.phone||(V.phone="380"),await Qt(),v.value?.focus()},O=async()=>{h.value=!0,await Qt()},$=async A=>{m.value=!0;try{const{data:b}=await we.get(`/customers/${A}`),w=b?.data?.recent_orders||[];f.value=w.map(J=>({...J,isOpen:!1}))}catch(b){console.error(b),f.value=[]}finally{m.value=!1}},le=A=>{const b=f.value.find(w=>w.id===A);b&&(b.isOpen=!b.isOpen,b.isOpen&&Qt(()=>{const w=L[A];w&&y.value&&w.scrollIntoView({behavior:"smooth",block:"center"})}))},G=A=>A?new Date(A).toLocaleDateString("uk-UA",{year:"numeric",month:"2-digit",day:"2-digit"}):"",z=A=>{const b=Number(A);return isNaN(b)?"0":new Intl.NumberFormat("uk-UA",{minimumFractionDigits:0,maximumFractionDigits:2}).format(b).replace(/\.00$/,"")},fe=A=>A?.statusRef||A?.status_ref||null,Le=A=>fe(A)?.name||"",qe=async()=>{if(!(!k.value||!T.value)){r.value=!0;try{const b=(await we.put(`/api/customers/${k.value}`,V))?.data?.data;n.customer&&b?Object.assign(n.customer,b):n.customer&&Object.assign(n.customer,V),o.value=!1,Y("   !")}catch(A){console.error(A),Y(" .   .","error")}finally{r.value=!1}}},Be=()=>{X()},me=()=>{I.status="idle",I.orderId=null,I.orderNumber=null,I.totalAmount=0,H(),K.value=!1},X=async()=>{if(!P.items.length){Y("   .","error");return}if(!P.payment?.method){Y("  .","error");return}if(!P.delivery?.delivery_type){Y("  .","error");return}if(!P.delivery?.city_ref){Y("  .","error");return}if(P.delivery.delivery_type==="warehouse"&&!P.delivery.warehouse_ref){Y(" .","error");return}if(!V.phone){Y("  .","error");return}if(p.value)return;p.value=!0,I.status="loading";const A=P.payment?.method||"cod",b=Number(P.payment?.prepay_amount||0),w=A==="card"?"paid":"unpaid",J=(n.customer?.source||n.customer?.platform||"").toLowerCase(),j=J.includes("instagram")||J==="ig"||M.value?"instagram":"facebook",C=P.delivery||{},N=P.items.reduce((oe,x)=>oe+Number(x.price||0)*Number(x.qty||1),0),re={customer:{first_name:V.first_name||"",last_name:V.last_name||"",phone:V.phone||"",email:V.email||""},order:{status:"confirmed",payment_status:w,currency:P.payment?.currency||"UAH",source:j},items:P.items.map(oe=>({product_id:oe.product_id||oe.id||null,product_variant_id:oe.product_variant_id||null,title:oe.title||"",sku:oe.sku||"",size:oe.size||"",qty:Number(oe.qty||1),price:Number(oe.price||0)})),payment:{method:A,prepay_amount:A==="prepay"?b:0,currency:P.payment?.currency||"UAH"},delivery:{carrier:C.carrier||"nova_poshta",delivery_type:C.delivery_type||"warehouse",payer:C.payer||"recipient",city_ref:C.city_ref||"",settlement_ref:C.settlement_ref||"",city_name:C.city_name||"",warehouse_ref:C.warehouse_ref||"",warehouse_name:C.warehouse_name||"",street_name:C.street_name||"",street_ref:C.street_ref||"",building:C.building||"",apartment:C.apartment||"",address_note:C.address_note||"",recipient_name:[C.last_name,C.first_name,C.middle_name].filter(Boolean).join(" "),recipient_phone:C.phone||V.phone||""}};try{const x=(await we.post("/orders",re))?.data?.data||{};Y(" !"),I.status="success",I.orderId=x.id||null,I.orderNumber=x.order_number||x.id||null,I.totalAmount=N,n.customer?.conversation_id&&l("update-stage",{conversationId:n.customer.conversation_id,stage:"done"})}catch(oe){console.error(oe),Y("   .","error"),I.status="idle"}finally{p.value=!1}},be=()=>{K.value=!1},ie=()=>{I.status="idle",I.orderId=null,I.orderNumber=null,I.totalAmount=0,!(P.items.length>0&&!window.confirm("  ?"))&&(H(),K.value=!1)};return(A,b)=>(c(),d("div",F4,[pe(Fe,{name:"toast"},{default:Oe(()=>[E.show?(c(),d("div",{key:0,class:W(["toast-notification",E.type])},[e("i",{class:W(["bi",E.type==="success"?"bi-check-circle-fill":"bi-exclamation-triangle-fill"])},null,2),e("span",null,g(E.message),1)],2)):F("",!0)]),_:1}),k.value?(c(),d("div",{key:0,class:"profile-content custom-scrollbar",ref_key:"profileContainer",ref:y},[e("div",E4,[e("button",{class:"profile-back-btn",type:"button",onClick:b[0]||(b[0]=w=>l("close"))},[...b[11]||(b[11]=[e("i",{class:"bi bi-arrow-left"},null,-1),te("  ",-1)])])]),e("div",V4,[e("div",L4,[q.value?(c(),d("img",{key:0,src:q.value,class:"avatar-img"},null,8,N4)):(c(),d("div",R4,g(D.value),1)),e("div",{class:W(["platform-icon-indicator",[M.value?"ig-bg":"fb-bg",T.value?"glow-green":"glow-red"]])},[e("i",{class:W(["bi",M.value?"bi-instagram":"bi-messenger"])},null,2)],2)]),e("div",q4,[o.value?(c(),d("div",B4,[e("div",H4,[ue(e("input",{"onUpdate:modelValue":b[1]||(b[1]=w=>V.first_name=w),class:"modern-input",placeholder:"' ()"},null,512),[[he,V.first_name]]),ue(e("input",{"onUpdate:modelValue":b[2]||(b[2]=w=>V.last_name=w),class:"modern-input",placeholder:" ()"},null,512),[[he,V.last_name]])]),e("button",{class:"btn-confirm-tick",type:"button",onClick:b[3]||(b[3]=w=>o.value=!1)},[...b[13]||(b[13]=[e("i",{class:"bi bi-check2"},null,-1)])])])):(c(),d("div",{key:0,class:"name-display-wrapper",onClick:Z},[e("span",{class:W(["name-text",{"text-error":!ee.value}])},g(_.value),3),b[12]||(b[12]=e("button",{class:"btn-edit-purple",type:"button"},[e("i",{class:"bi bi-pencil-square"})],-1))])),e("div",z4,"ID: "+g(t.customer.fb_user_id||t.customer.instagram_user_id||k.value),1)]),e("button",{type:"button",class:W(["btn-status-indicator",T.value?"status-ready":"status-attention"]),title:" "},[e("i",{class:W(["bi",T.value?"bi-person-check-fill":"bi-person-x-fill"])},null,2)],2)]),b[30]||(b[30]=e("hr",{class:"divider"},null,-1)),e("div",W4,[e("div",K4,[b[16]||(b[16]=e("div",{class:"icon-col"},[e("i",{class:"bi bi-telephone"})],-1)),e("div",G4,[b[15]||(b[15]=e("label",null,"",-1)),V.phone||u.value?(c(),d("div",{key:0,class:W(["input-group",{"is-focused":i.value,"is-invalid":V.phone&&!B.value}])},[ue(e("input",{"onUpdate:modelValue":b[4]||(b[4]=w=>V.phone=w),class:"simple-input",placeholder:"380XXXXXXXXX",ref_key:"phoneRef",ref:v,type:"tel",onFocus:b[5]||(b[5]=w=>i.value=!0),onBlur:b[6]||(b[6]=w=>i.value=!1)},null,544),[[he,V.phone]])],2)):(c(),d("div",{key:1,class:"add-btn",onClick:U},[...b[14]||(b[14]=[e("i",{class:"bi bi-plus-circle"},null,-1),te("  ",-1)])])),V.phone&&!B.value?(c(),d("small",X4,"  12  (380...)")):F("",!0)])]),e("div",J4,[b[19]||(b[19]=e("div",{class:"icon-col"},[e("i",{class:"bi bi-envelope"})],-1)),e("div",Q4,[b[18]||(b[18]=e("label",null,"E-mail",-1)),V.email||h.value?(c(),d("div",{key:0,class:W(["input-group",{"is-focused":a.value}])},[ue(e("input",{"onUpdate:modelValue":b[7]||(b[7]=w=>V.email=w),class:"simple-input",placeholder:"email@example.com",onFocus:b[8]||(b[8]=w=>a.value=!0),onBlur:b[9]||(b[9]=w=>a.value=!1)},null,544),[[he,V.email]])],2)):(c(),d("div",{key:1,class:"add-btn",onClick:O},[...b[17]||(b[17]=[e("i",{class:"bi bi-plus-circle"},null,-1),te("  email",-1)])]))])]),e("div",Y4,[e("button",{class:"btn-save-modern",onClick:qe,disabled:r.value||!T.value},[r.value?(c(),d("span",e3)):F("",!0),te(" "+g(r.value?"...":" "),1)],8,Z4),e("button",{class:"btn-create-order",type:"button",onClick:b[10]||(b[10]=w=>K.value=!0),disabled:!T.value,title:T.value?" ":"   "},[...b[20]||(b[20]=[e("i",{class:"bi bi-bag-plus"},null,-1),te("  ",-1)])],8,t3)]),e("div",s3,[e("div",n3,[b[21]||(b[21]=e("span",{class:"section-title"}," ",-1)),m.value?(c(),d("span",l3)):f.value.length?(c(),d("span",o3,g(f.value.length),1)):F("",!0)]),!f.value.length&&!m.value?(c(),d("div",i3,[...b[22]||(b[22]=[e("div",{class:"empty-icon"},[e("i",{class:"bi bi-box-seam"})],-1),e("span",null,"  ",-1)])])):(c(),d("div",a3,[(c(!0),d(de,null,ve(f.value,w=>(c(),d("div",{key:w.id,class:W(["order-card",{"is-active":w.isOpen}]),ref_for:!0,ref:J=>{J&&(L[w.id]=J)}},[e("button",{class:"order-header",type:"button",onClick:J=>le(w.id)},[e("div",c3,[e("div",d3,[e("span",u3,"#"+g(w.order_number||w.id),1),e("span",f3,g(G(w.created_at)),1)]),e("div",{class:"status-badge",style:Te({backgroundColor:(fe(w)?.color||"#94a3b8")+"20",color:fe(w)?.color||"#64748b"})},[fe(w)?.icon?(c(),d("i",{key:0,class:W(["bi status-icon",fe(w).icon])},null,2)):F("",!0),te(" "+g(Le(w)),1)],4)]),e("div",m3,[e("div",p3,[te(g(z(w.items_sum_total))+" ",1),b[23]||(b[23]=e("small",null,".",-1))]),b[24]||(b[24]=e("div",{class:"toggle-btn"},[e("i",{class:"bi bi-chevron-down"})],-1))])],8,r3),e("div",v3,[e("div",b3,[e("div",g3,[b[27]||(b[27]=e("div",{class:"block-label"},[e("i",{class:"bi bi-truck"}),te(" ")],-1)),e("div",h3,[e("div",y3,[te(g(w.delivery?.city_name||"/ ")+" ",1),w.delivery?.warehouse_name?(c(),d("div",_3,g(w.delivery?.warehouse_name),1)):F("",!0)]),w.delivery?.ttn?(c(),d("div",$3,[b[25]||(b[25]=e("span",{class:"ttn-label"},":",-1)),e("span",k3,g(w.delivery.ttn),1),b[26]||(b[26]=e("i",{class:"bi bi-copy copy-icon",title:""},null,-1))])):F("",!0)])]),e("div",x3,[b[28]||(b[28]=e("div",{class:"block-label"},[e("i",{class:"bi bi-bag"}),te(" ")],-1)),e("div",w3,[(c(!0),d(de,null,ve(w.items||[],J=>(c(),d("div",{key:J.id,class:"mini-product"},[e("img",{class:"mini-thumb",src:J.product?.main_photo_path?`/storage/${J.product.main_photo_path}`:D3,loading:"lazy"},null,8,C3),e("div",S3,[e("div",T3,g(J.product_title||"  "),1),e("div",A3,[e("span",O3,"x"+g(J.qty),1),J.price?(c(),d("span",P3,g(z(J.price))+" .",1)):F("",!0)])])]))),128))])]),e("a",{href:`/orders/${w.id}`,class:"btn-full-order"},[...b[29]||(b[29]=[e("span",null,"",-1),e("i",{class:"bi bi-arrow-right"},null,-1)])],8,M3)])])],2))),128))]))])])],512)):(c(),d("div",I3,[...b[31]||(b[31]=[e("i",{class:"bi bi-person-bounding-box"},null,-1),e("p",null," ",-1)])])),ue(pe(j4,{open:K.value,customer:t.customer,"order-draft":P,"submit-state":I,onClose:ie,onMinimize:be,onSubmit:Be,onCloseSuccess:me},null,8,["open","customer","order-draft","submit-state"]),[[Zn,K.value]])]))}},j3=xe(U3,[["__scopeId","data-v-86b717c7"]]),F3={class:"p-3 border-b border-gray-200 bg-white"},E3={key:0,class:"p-4 text-center text-gray-400"},V3={__name:"ChatPage",setup(t){const{conversations:s,activeChat:n,activeChatId:l,messages:o,isLoading:i,isLoadingMore:a,isSending:r,isSyncing:u,currentPage:h,lastPage:v,fetchConversations:p,loadMoreConversations:f,selectChat:m,sendMessage:y,forceSync:L,stopPolling:K,getConversationTags:P,updateStage:H,updateTags:E,ensureConversation:I}=ek(),V=S(""),Q=S("list"),ee=S([]),B=S(!1),T=se(()=>{if(!V.value)return s.value;const G=V.value.toLowerCase();return s.value.filter(z=>(z.customer_name||"").toLowerCase().includes(G)||(z.last_message||"").toLowerCase().includes(G))}),k=G=>{m(G.customer_id),Q.value="thread"},_=()=>{f()},D=G=>{y({...G,customer_id:l.value})},q=()=>{L(l.value)},M=()=>{Q.value="list"},Y=()=>{Q.value="profile"},Z=()=>{Q.value="thread"},U=({conversationId:G,stage:z})=>{H(G,z)},O=({conversationId:G,tagIds:z})=>{const fe=ee.value.filter(Le=>z.includes(Le.id));E(G,z,fe)},$=async()=>{B.value=!0;try{const{data:G}=await P();ee.value=G?.data||G||[]}catch(G){console.error("    ",G)}finally{B.value=!1}};Re(()=>{le()}),ps(()=>{K()});const le=async()=>{await p(1),$();const G=new URLSearchParams(window.location.search),z=Number(G.get("customer_id"));if(!z)return;const fe=G.get("platform")||null;await I(z,fe)&&(m(z),Q.value="thread")};return(G,z)=>(c(),Ne(dk,{"view-mode":Q.value},{sidebar:Oe(()=>[e("div",F3,[ue(e("input",{"onUpdate:modelValue":z[0]||(z[0]=fe=>V.value=fe),type:"text",placeholder:" ...",class:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-blue-400"},null,512),[[he,V.value]])]),Ae(i)&&!Ae(s).length?(c(),d("div",E3,[...z[1]||(z[1]=[e("i",{class:"bi bi-arrow-clockwise animate-spin text-2xl"},null,-1)])])):(c(),Ne(Pk,{key:1,conversations:T.value,"active-chat-id":Ae(l),"is-loading-more":Ae(a),"has-more":Ae(h)<Ae(v),"disable-scroll":V.value.length>0,onSelect:k,onLoadMore:_},null,8,["conversations","active-chat-id","is-loading-more","has-more","disable-scroll"]))]),thread:Oe(()=>[Ae(n)?(c(),Ne(yw,{key:0,"active-chat":Ae(n),"conversation-tags":ee.value,"tags-loading":B.value,messages:Ae(o),"is-sending":Ae(r),"is-syncing":Ae(u),loading:Ae(i),onSend:D,onForceSync:q,onOpenList:M,onOpenProfile:Y,onUpdateStage:U,onUpdateTags:O},null,8,["active-chat","conversation-tags","tags-loading","messages","is-sending","is-syncing","loading"])):(c(),Ne(xw,{key:1,onOpenList:M}))]),profile:Oe(()=>[pe(j3,{customer:Ae(n),onClose:Z,onUpdateStage:U},null,8,["customer"])]),_:1},8,["view-mode"]))}},L3={class:"chat-funnel"},N3={class:"funnel-toolbar"},R3={class:"funnel-actions"},q3=["disabled"],B3={key:1,class:"funnel-loading"},H3={key:2,class:"funnel-board"},z3=["onDragover","onDragleave","onDrop"],W3={class:"column-header"},K3={class:"column-count"},G3={class:"column-body"},X3={key:0,class:"column-empty"},J3=["onClick","onKeydown","onDragstart"],Q3={class:"card-top"},Y3={class:"card-name"},Z3={class:"card-time"},eC={class:"card-preview"},tC={class:"card-meta"},sC={key:0,class:"unread-pill"},nC={key:0,class:"card-tags"},lC={key:0,class:"tag-chip tag-more"},oC={__name:"ChatFunnelPage",setup(t){const s=S(""),n=S(!1),l=S({}),o=S(null),i=S(null),a=S(null),r=S(null),u=S({message:"",type:"success"});let h=null;const v=[{key:"new",label:"",color:"#4f46e5",bg:"#eef2ff"},{key:"waiting_reply",label:" ",color:"#92400e",bg:"#fef3c7"},{key:"order_confirmed",label:" ",color:"#1d4ed8",bg:"#dbeafe"},{key:"done",label:"",color:"#166534",bg:"#dcfce7"},{key:"closed",label:"",color:"#475569",bg:"#f1f5f9"}],p=se(()=>{const T=s.value.trim().toLowerCase(),k={};return v.forEach(_=>{const D=l.value[_.key]||[];if(!T){k[_.key]=D;return}k[_.key]=D.filter(q=>(q.customer_name||"").toLowerCase().includes(T)||(q.last_message||"").toLowerCase().includes(T))}),k}),f=async()=>{n.value=!0;try{const{data:T}=await H$();l.value=T?.data||{}}catch(T){console.error("   ",T)}finally{n.value=!1}},m=(T,k)=>{Object.keys(l.value).forEach(D=>{const q=l.value[D]||[],M=q.findIndex(Y=>Y.conversation_id===T.conversation_id);M!==-1&&q.splice(M,1)}),l.value[k]||(l.value[k]=[]),T.stage=k,l.value[k].unshift(T)},y=(T,k,_)=>{k.conversation_id&&(o.value=k.conversation_id,i.value=k,a.value=_,T.dataTransfer.effectAllowed="move")},L=()=>{o.value=null,i.value=null,a.value=null,r.value=null},K=T=>{r.value=T},P=T=>{r.value===T&&(r.value=null)},H=async T=>{if(!i.value||!i.value.conversation_id){L();return}const k=i.value,_=a.value;if(_===T){L();return}m(k,T),L();try{await Zi(k.conversation_id,T),B(" ","success")}catch(D){console.error("   ",D),m(k,_),B("  ","error")}},E=T=>{const k=new URLSearchParams({customer_id:T.customer_id,platform:T.platform});window.location.href=`/messenger?${k.toString()}`},I=T=>T==="instagram"?"bi bi-instagram":"bi bi-messenger",V=T=>T==="instagram"?"platform-instagram":"platform-messenger",Q=T=>{if(!T)return"";const k=new Date(T),_=new Date;return k.getDate()===_.getDate()&&k.getMonth()===_.getMonth()&&k.getFullYear()===_.getFullYear()?k.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):k.toLocaleDateString("uk-UA",{day:"2-digit",month:"short"})},ee=T=>{if(!T)return{};const k=T.startsWith("#")&&T.length===4?`#${T.slice(1).split("").map(_=>_+_).join("")}`:T;return k.startsWith("#")&&k.length===7?{backgroundColor:`${k}1a`,color:k,borderColor:`${k}33`}:{color:k,borderColor:k}},B=(T,k="success")=>{u.value={message:T,type:k},h&&clearTimeout(h),h=setTimeout(()=>{u.value={message:"",type:"success"}},2200)};return Re(()=>{f()}),(T,k)=>(c(),d("section",L3,[e("div",N3,[k[2]||(k[2]=e("div",null,[e("h1",{class:"funnel-title"}," "),e("p",{class:"funnel-subtitle"},"      .")],-1)),e("div",R3,[ue(e("input",{"onUpdate:modelValue":k[0]||(k[0]=_=>s.value=_),type:"text",placeholder:"    ...",class:"funnel-search"},null,512),[[he,s.value]]),e("button",{type:"button",class:"funnel-btn",disabled:n.value,onClick:f},"  ",8,q3),k[1]||(k[1]=e("a",{href:"/messenger",class:"funnel-link"}," ",-1))])]),u.value.message?(c(),d("div",{key:0,class:W(["funnel-toast",`toast-${u.value.type}`])},g(u.value.message),3)):F("",!0),n.value?(c(),d("div",B3,[...k[3]||(k[3]=[e("div",{class:"spinner"},null,-1),e("span",null,"...",-1)])])):(c(),d("div",H3,[(c(),d(de,null,ve(v,_=>e("div",{key:_.key,class:W(["funnel-column",{"is-drop-target":r.value===_.key}]),style:Te({"--stage-color":_.color,"--stage-bg":_.bg}),onDragover:ge(D=>K(_.key),["prevent"]),onDragleave:D=>P(_.key),onDrop:ge(D=>H(_.key),["prevent"])},[e("div",W3,[e("span",null,g(_.label),1),e("span",K3,g(p.value[_.key].length),1)]),e("div",G3,[p.value[_.key].length?F("",!0):(c(),d("div",X3,"   ")),(c(!0),d(de,null,ve(p.value[_.key],D=>(c(),d("div",{key:D.conversation_id||D.customer_id,class:W(["funnel-card",{dragging:o.value===D.conversation_id}]),role:"button",tabindex:"0",draggable:"true",onClick:q=>E(D),onKeydown:$l(q=>E(D),["enter"]),onDragstart:q=>y(q,D,_.key),onDragend:L},[e("div",Q3,[e("span",Y3,g(D.customer_name),1),e("span",Z3,g(Q(D.last_message_time)),1)]),e("div",eC,g(D.last_message||""),1),e("div",tC,[e("span",{class:W(["platform-pill",V(D.platform)])},[e("i",{class:W(I(D.platform))},null,2)],2),D.unread_count>0?(c(),d("span",sC,g(D.unread_count>99?"99+":D.unread_count),1)):F("",!0)]),D.tags?.length?(c(),d("div",nC,[(c(!0),d(de,null,ve(D.tags.slice(0,3),q=>(c(),d("span",{key:q.id,class:"tag-chip",style:Te(ee(q.color))},g(q.name),5))),128)),D.tags.length>3?(c(),d("span",lC," +"+g(D.tags.length-3),1)):F("",!0)])):F("",!0)],42,J3))),128))])],46,z3)),64))]))]))}},iC=xe(oC,[["__scopeId","data-v-992649aa"]]),aC={class:"gallery-page"},rC={class:"gallery-header"},cC={class:"upload-btn"},dC={class:"gallery-grid custom-scrollbar"},uC={key:0,class:"gallery-state"},fC={key:1,class:"gallery-state"},mC={key:2,class:"grid"},pC=["src"],vC={key:1,class:"video-placeholder"},bC={class:"grid-footer"},gC={class:"file-name"},hC=["onClick"],yC={__name:"GalleryPage",setup(t){const s=S([]),n=S(!1),l=async()=>{n.value=!0;try{const{data:a}=await ea();s.value=a?.data||a||[]}finally{n.value=!1}},o=async a=>{const r=a.target;if(!r.files?.length)return;const u=new FormData;u.append("file",r.files[0]),await ta(u),r.value="",await l()},i=async a=>{await Z$(a),s.value=s.value.filter(r=>r.id!==a)};return Re(l),(a,r)=>(c(),d("div",aC,[e("div",rC,[r[2]||(r[2]=e("div",null,[e("h2",null,""),e("p",null,"     ")],-1)),e("label",cC,[r[0]||(r[0]=e("i",{class:"bi bi-plus-lg"},null,-1)),r[1]||(r[1]=te("   ",-1)),e("input",{type:"file",hidden:"",accept:"image/*,video/*",onChange:o},null,32)])]),e("div",dC,[n.value?(c(),d("div",uC,[...r[3]||(r[3]=[e("div",{class:"spinner"},null,-1)])])):s.value.length?(c(),d("div",mC,[(c(!0),d(de,null,ve(s.value,u=>(c(),d("div",{key:u.id,class:"grid-item"},[u.type==="image"?(c(),d("img",{key:0,src:u.url,loading:"lazy"},null,8,pC)):(c(),d("div",vC,[...r[4]||(r[4]=[e("i",{class:"bi bi-play-circle-fill"},null,-1)])])),e("div",bC,[e("span",gC,g(u.filename),1),e("button",{type:"button",class:"delete-btn",onClick:h=>i(u.id)},[...r[5]||(r[5]=[e("i",{class:"bi bi-trash"},null,-1)])],8,hC)])]))),128))])):(c(),d("div",fC,"  "))])]))}},_C=xe(yC,[["__scopeId","data-v-6a50ecbd"]]),$C={class:"workspace"},kC={class:"card border-0 shadow-sm overflow-hidden"},xC={class:"customer-toolbar px-4 py-3 border-bottom"},wC={class:"d-flex flex-column flex-md-row align-items-md-center gap-3"},CC={class:"search-wrapper w-100 w-md-auto"},SC=["value"],TC={key:0,class:"text-muted small"},AC={class:"table-responsive"},OC={class:"table table-hover align-middle mb-0"},PC={class:"ps-4"},MC={class:"fw-semibold text-dark"},IC={class:"text-end pe-4 text-muted"},DC={key:0},UC={__name:"CustomerListPage",setup(t){const s=S([]),n=S(!1),l=S({current_page:1,last_page:1,total:0,from:0,to:0}),o=Me({search:"",page:1,per_page:30}),i=[15,30,60];let a;async function r(){n.value=!0;try{const{data:f}=await Jc({q:o.search||void 0,page:o.page,per_page:o.per_page}),m=f.data||f?.data?.data||[];s.value=m;const y=f.meta||f?.data?.meta||f||{};l.value={current_page:y.current_page??1,last_page:y.last_page??1,total:y.total??s.value.length,from:y.from??0,to:y.to??0}}catch(f){console.error("   ",f)}finally{n.value=!1}}function u(f){const m=f.target.value;o.search=m,clearTimeout(a),a=setTimeout(()=>{o.page=1,r()},300)}function h(f){f<1||f>l.value.last_page||(o.page=f,r())}function v(f){o.per_page=f,o.page=1,r()}function p(f){const m=f.first_name||"",y=f.last_name||"";return[m,y].filter(Boolean).join(" ")||""}return r(),(f,m)=>(c(),d("section",$C,[e("div",kC,[e("div",xC,[e("div",wC,[e("div",CC,[m[0]||(m[0]=e("i",{class:"bi bi-search search-icon"},null,-1)),e("input",{value:o.search,onInput:u,type:"text",class:"form-control search-input",placeholder:" (, , email)..."},null,40,SC)]),n.value?(c(),d("div",TC,"...")):F("",!0)])]),e("div",AC,[e("table",OC,[m[2]||(m[2]=e("thead",{class:"table-light"},[e("tr",null,[e("th",{class:"ps-4"},""),e("th",null,""),e("th",null,"Email"),e("th",{class:"text-end pe-4"},"ID")])],-1)),e("tbody",null,[(c(!0),d(de,null,ve(s.value,y=>(c(),d("tr",{key:y.id},[e("td",PC,[e("div",MC,g(p(y)),1)]),e("td",null,g(y.phone||""),1),e("td",null,g(y.email||""),1),e("td",IC,"#"+g(y.id),1)]))),128)),!n.value&&s.value.length===0?(c(),d("tr",DC,[...m[1]||(m[1]=[e("td",{colspan:"4",class:"text-center text-muted py-4"},"    ",-1)])])):F("",!0)])])]),pe(Yi,{meta:l.value,"per-page":o.per_page,"per-page-options":i,onChangePage:h,"onUpdate:perPage":v},null,8,["meta","per-page"])])]))}},jC=xe(UC,[["__scopeId","data-v-4c8cfe92"]]),FC=async()=>{const{data:t}=await _e.get("/api/finance/checkbox");return t},EC=async t=>{const{data:s}=await _e.post("/finance/checkbox",t);return s},VC=async()=>{const{data:t}=await _e.post("/finance/checkbox/test");return t},LC=async()=>{const{data:t}=await _e.post("/finance/checkbox/shift/open");return t},NC=async()=>{const{data:t}=await _e.post("/finance/checkbox/shift/close");return t},RC=async()=>{const{data:t}=await _e.post("/finance/checkbox/queue/process");return t},qC={class:"finance-page container-fluid py-4"},BC={class:"header-section d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-5"},HC={class:"d-flex align-items-center mt-3 mt-md-0"},zC={key:0,class:"pulse-dot"},WC={class:"fw-semibold"},KC={class:"row g-4"},GC={class:"col-lg-8"},XC={class:"card modern-card h-100"},JC={class:"card-body p-4"},QC={class:"settings-summary d-flex flex-column gap-3"},YC={class:"auth-summary p-3 rounded-3 border border-light-subtle bg-body-secondary bg-opacity-25"},ZC={class:"d-flex align-items-center justify-content-between flex-wrap gap-3"},e5={style:{"min-width":"0"}},t5=["title"],s5={class:"auth-summary p-3 rounded-3 border border-light-subtle bg-body-secondary bg-opacity-25"},n5={class:"d-flex align-items-center justify-content-between"},l5={class:"fw-semibold text-dark"},o5={class:"d-flex align-items-center gap-2"},i5={class:"automation-summary p-3 rounded-3 border border-light-subtle"},a5={class:"automation-grid"},r5={class:"automation-item"},c5={class:"automation-value"},d5={class:"automation-item"},u5={class:"automation-value"},f5={class:"automation-item"},m5={class:"automation-value"},p5={class:"d-flex flex-wrap gap-2 mt-3"},v5={class:"col-lg-4"},b5={class:"card modern-card mb-4 border-0 bg-gradient-primary text-white position-relative overflow-hidden shadow-lg"},g5={class:"card-body position-relative z-1 p-4 d-flex flex-column justify-content-between",style:{"min-height":"280px"}},h5={class:"status-display mb-2"},y5={class:"display-6 fw-bold mb-1"},_5={class:"text-white-50 small mb-0"},$5={class:"d-grid gap-2 mt-4"},k5=["disabled"],x5={key:0,class:"spinner-border spinner-border-sm me-2"},w5={key:1,class:"bi bi-activity me-2"},C5={class:"row g-2"},S5={class:"col-6"},T5=["disabled"],A5={class:"col-6"},O5=["disabled"],P5={class:"card modern-card border-0 shadow-sm"},M5={class:"card-body p-4"},I5={class:"text-center py-4 bg-light rounded-4 mb-3 position-relative overflow-hidden"},D5={key:0,class:"position-absolute top-0 start-0 w-100 h-100"},U5={class:"display-3 fw-bold text-dark lh-1"},j5=["disabled"],F5={class:"row g-4 mt-2"},E5={class:"col-12"},V5={class:"card modern-card"},L5={class:"card-header-clean p-4 border-bottom border-light d-flex flex-wrap align-items-center justify-content-between gap-3"},N5={class:"text-muted small"},R5={class:"badge bg-light text-dark"},q5={class:"card-body p-4"},B5={class:"chart-scroll"},H5={class:"chart-inner"},z5=["viewBox"],W5={class:"chart-grid"},K5=["y1","y2"],G5=["d"],X5=["d"],J5={class:"chart-axis"},Q5={class:"row g-4 mt-2"},Y5={class:"col-12"},Z5={class:"card modern-card"},e8={class:"card-header-clean p-4 border-bottom border-light d-flex flex-wrap align-items-center justify-content-between gap-3"},t8={class:"mb-1 fw-bold text-dark"},s8={class:"text-muted small"},n8={class:"fw-semibold text-dark"},l8={class:"d-flex align-items-center gap-2"},o8={class:"badge bg-light text-dark"},i8=["disabled"],a8={class:"card-body p-0"},r8={key:0,class:"p-4 text-muted"},c8={key:1,class:"table-responsive"},d8={class:"table table-hover align-middle mb-0 receipts-table"},u8={class:"text-muted small"},f8={class:"text-end fw-semibold"},m8={class:"text-end"},p8=["href"],v8={key:1,class:"text-muted"},b8={class:"modal-card modal-card-lg"},g8={class:"row g-4 mb-4"},h8={class:"col-12"},y8={class:"input-group-modern"},_8={class:"col-12"},$8=["placeholder"],k8={key:0,class:"valid-icon"},x8={class:"col-md-6"},w8={class:"input-group-modern"},C8={class:"col-md-6"},S8=["placeholder"],T8={key:0,class:"valid-icon"},A8={class:"row g-4"},O8={class:"col-md-4"},P8={class:"time-card p-3 rounded-3 bg-success-subtle border border-success-subtle"},M8={class:"col-md-4"},I8={class:"time-card p-3 rounded-3 bg-danger-subtle border border-danger-subtle"},D8={class:"col-md-4"},U8={class:"time-card p-3 rounded-3 bg-primary-subtle border border-primary-subtle"},j8={class:"bg-body-secondary bg-opacity-50 rounded-4 p-4 mt-4"},F8={class:"d-flex justify-content-between align-items-center mb-3"},E8={class:"form-check form-switch"},V8={class:"d-flex justify-content-between align-items-center"},L8={class:"form-check form-switch"},N8={class:"d-flex justify-content-end gap-2 mt-4"},R8=["disabled"],q8={key:0,class:"spinner-border spinner-border-sm me-2"},Bs=240,Fn=90,En=12,B8={__name:"FinancePage",setup(t){const s=Me({save:!1,test:!1,shift:!1,queue:!1}),n=Me({type:"",message:""}),l=S("unknown"),o=S(" "),i=S(0),a=S(!1),r=S(!1),u=S(!1),h=S([]),v=S(""),p=S(0),f=S([]),m=Me({api_url:"",license_key:"",login:"",password:"",open_time:"08:00",close_time:"23:00",queue_process_time:"08:30",enabled:!0,queue_enabled:!0}),y=se(()=>{switch(l.value){case"opened":return" ";case"closed":return" ";case"error":return"";default:return""}}),L=se(()=>{switch(l.value){case"opened":return"bg-success-subtle text-success border border-success-subtle";case"closed":return"bg-danger-subtle text-danger border border-danger-subtle";case"error":return"bg-warning-subtle text-warning-emphasis";default:return"bg-secondary-subtle text-secondary"}}),K=se(()=>{switch(l.value){case"opened":return"bi-unlock-fill";case"closed":return"bi-lock-fill";case"error":return"bi-exclamation-triangle-fill";default:return"bi-question-circle-fill"}}),P=Fn-En,H=Fn-En*2,E=Bs/23,I=se(()=>nt(Number(p.value||0)/100)),V=se(()=>h.value.length),Q=se(()=>{if(!v.value)return"";const ie=new Date(v.value);return Number.isNaN(ie.getTime())?v.value:ie.toLocaleDateString("uk-UA",{day:"2-digit",month:"long",year:"numeric"})}),ee=se(()=>Array.from({length:24},(ie,A)=>`${String(A).padStart(2,"0")}:00`)),B=se(()=>{if(Array.isArray(f.value)&&f.value.length===24)return f.value.map(A=>Number(A)||0);const ie=Array.from({length:24},()=>0);return h.value.forEach(A=>{if(!A?.created_at)return;const b=new Date(A.created_at);Number.isNaN(b.getTime())||(ie[b.getHours()]+=1)}),ie}),T=se(()=>Math.max(...B.value,1)),k=se(()=>B.value.map((ie,A)=>{const b=E*A,w=P-ie/T.value*H;return{x:b,y:w}})),_=se(()=>{const ie=k.value;return ie.length?ie.map((A,b)=>`${b===0?"M":"L"} ${A.x.toFixed(2)} ${A.y.toFixed(2)}`).join(" "):""}),D=se(()=>{const ie=k.value;if(!ie.length)return"";const A=ie.map(b=>`L ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" ");return`M 0 ${P} ${A} L ${Bs} ${P} Z`}),q=se(()=>{const ie=[];for(let b=0;b<=4;b+=1)ie.push(En+H/4*b);return ie}),M=ie=>({sell:"",return:"",service_in:" ",service_out:" "})[ie]||"",Y=ie=>({success:"",pending:" ",processing:"",error:"",canceled:""})[ie]||"",Z=ie=>({success:"bg-success-subtle text-success",pending:"bg-warning-subtle text-warning-emphasis",processing:"bg-warning-subtle text-warning-emphasis",error:"bg-danger-subtle text-danger",canceled:"bg-secondary-subtle text-secondary"})[ie]||"bg-light text-dark",U=ie=>nt(Number(ie||0)/100),O=ie=>{if(!ie)return"";const A=new Date(ie);return Number.isNaN(A.getTime())?String(ie):A.toLocaleTimeString("uk-UA",{hour:"2-digit",minute:"2-digit"})},$=ie=>{if(!ie)return"unknown";const A=String(ie).toLowerCase();return A==="opened"||A==="open"||A.includes("opened")||A.includes("")?"opened":A==="closed"||A==="close"||A.includes("closed")||A.includes("")?"closed":A==="error"||A==="failed"||A.includes("error")||A.includes("")?"error":"unknown"},le=ie=>{const A=$(ie);if(l.value=A,A==="opened"){o.value=" ";return}if(A==="closed"){o.value=" ";return}if(A==="error"){o.value="";return}o.value=" "},G=(ie,A)=>{n.type=ie,n.message=A,setTimeout(()=>{n.message=""},5e3)},z=async()=>{try{const ie=await FC(),A=ie.settings||{};m.api_url=A.api_url||"https://api.checkbox.in.ua/api/v1",m.login=A.login||"",m.open_time=A.open_time?A.open_time.slice(0,5):"08:00",m.close_time=A.close_time?A.close_time.slice(0,5):"23:00",m.queue_process_time=A.queue_process_time?A.queue_process_time.slice(0,5):"08:30",m.enabled=A.enabled??!0,m.queue_enabled=A.queue_enabled??!0,r.value=!!A.has_license_key,u.value=!!A.has_password,i.value=ie.queue?.waiting||0;const b=ie.receipts||{};h.value=Array.isArray(b.items)?b.items:[],v.value=b.date||"",p.value=b.daily_total??0,f.value=Array.isArray(b.hourly_counts)?b.hourly_counts:[],ie.shift_status&&le(ie.shift_status)}catch(ie){console.error(ie),G("danger","   ")}},fe=async()=>{s.save=!0;try{await EC({...m}),G("success"," "),r.value=r.value||!!m.license_key,u.value=u.value||!!m.password,m.license_key="",m.password="",a.value=!1}catch(ie){G("danger",ie.response?.data?.message||" ")}finally{s.save=!1}},Le=()=>{a.value=!0},qe=()=>{a.value=!1,m.license_key="",m.password=""},Be=async()=>{s.test=!0;try{const ie=await VC(),A=ie.shift?.status||ie.message;$(A)!=="unknown"?le(A):(l.value="unknown",o.value=ie.message||"' "),G("success","'  ")}catch(ie){l.value="error",o.value=ie.response?.data?.message||" '",G("danger"," '  Checkbox")}finally{s.test=!1}},me=async()=>{s.shift=!0;try{const ie=await LC();if(ie.ok)l.value="opened",o.value=" ",G("success","  ");else throw new Error(ie.message)}catch(ie){G("danger",ie.response?.data?.message||ie.message||"   ")}finally{s.shift=!1}},X=async()=>{s.shift=!0;try{const ie=await NC();if(ie.ok)l.value="closed",o.value=" ",G("success","  ");else throw new Error(ie.message)}catch(ie){G("danger",ie.response?.data?.message||ie.message||"   ")}finally{s.shift=!1}},be=async()=>{s.queue=!0;try{const ie=await RC();G("success",ie.message||"   "),z()}catch{G("danger","  ")}finally{s.queue=!1}};return Re(()=>{z()}),(ie,A)=>(c(),d("div",qC,[e("div",BC,[A[9]||(A[9]=e("div",null,[e("h1",{class:"h3 fw-bold text-dark mb-1 d-flex align-items-center"},[e("div",{class:"icon-square bg-primary-subtle text-primary me-3"},[e("i",{class:"bi bi-wallet2"})]),te("  (Checkbox) ")]),e("p",{class:"text-muted ms-5 ps-2 mb-0"}," ,     .")],-1)),e("div",HC,[e("div",{class:W(["status-badge px-3 py-2 rounded-pill d-flex align-items-center gap-2",L.value])},[l.value==="opened"?(c(),d("span",zC)):(c(),d("i",{key:1,class:W(["bi",K.value])},null,2)),e("span",WC,g(y.value),1)],2)])]),pe(Fe,{name:"slide-fade"},{default:Oe(()=>[n.message?(c(),d("div",{key:0,class:W(["alert modern-alert mb-4 shadow-sm border-0 d-flex align-items-center",`alert-${n.type}`]),role:"alert"},[e("i",{class:W(["bi fs-4 me-3",n.type==="success"?"bi-check-circle-fill":"bi-exclamation-triangle-fill"])},null,2),e("div",null,g(n.message),1)],2)):F("",!0)]),_:1}),e("div",KC,[e("div",GC,[e("div",XC,[e("div",{class:"card-header-clean p-4 border-bottom border-light d-flex justify-content-between align-items-center"},[A[11]||(A[11]=e("h5",{class:"mb-0 fw-bold text-dark"}," ",-1)),e("button",{class:"btn btn-icon-round",type:"button",onClick:Le,"aria-label":" "},[...A[10]||(A[10]=[e("i",{class:"bi bi-gear-fill"},null,-1)])])]),e("div",JC,[e("div",QC,[e("div",YC,[e("div",ZC,[e("div",e5,[A[12]||(A[12]=e("div",{class:"text-uppercase small text-muted fw-semibold"},"API URL",-1)),e("div",{class:"fw-semibold text-dark text-truncate",title:m.api_url},g(m.api_url||""),9,t5)]),A[13]||(A[13]=e("span",{class:"badge bg-light text-dark"},"Checkbox",-1))])]),e("div",s5,[e("div",n5,[e("div",null,[A[14]||(A[14]=e("div",{class:"text-uppercase small text-muted fw-semibold"},"",-1)),e("div",l5,g(r.value&&u.value&&m.login?"":" "),1)]),e("div",o5,[e("span",{class:W(["badge",r.value?"bg-success-subtle text-success":"bg-secondary-subtle text-secondary"])},"  ",2),e("span",{class:W(["badge",m.login?"bg-success-subtle text-success":"bg-secondary-subtle text-secondary"])},"  ",2),e("span",{class:W(["badge",u.value?"bg-success-subtle text-success":"bg-secondary-subtle text-secondary"])},"  ",2)])])]),e("div",i5,[A[18]||(A[18]=e("div",{class:"text-uppercase small text-muted fw-semibold mb-3"},"",-1)),e("div",a5,[e("div",r5,[A[15]||(A[15]=e("div",{class:"automation-label"},[e("i",{class:"bi bi-sun me-1 text-success"}),te(" ")],-1)),e("div",c5,g(m.open_time),1)]),e("div",d5,[A[16]||(A[16]=e("div",{class:"automation-label"},[e("i",{class:"bi bi-moon me-1 text-danger"}),te(" ")],-1)),e("div",u5,g(m.close_time),1)]),e("div",f5,[A[17]||(A[17]=e("div",{class:"automation-label"},[e("i",{class:"bi bi-cloud-upload me-1 text-primary"}),te(" ")],-1)),e("div",m5,g(m.queue_process_time),1)])]),e("div",p5,[e("span",{class:W(["badge",m.enabled?"bg-success-subtle text-success":"bg-secondary-subtle text-secondary"])}," : "+g(m.enabled?"":""),3),e("span",{class:W(["badge",m.queue_enabled?"bg-success-subtle text-success":"bg-secondary-subtle text-secondary"])},"  : "+g(m.queue_enabled?"":""),3)])])])])])]),e("div",v5,[e("div",b5,[A[23]||(A[23]=e("div",{class:"card-bg-circle-1"},null,-1)),A[24]||(A[24]=e("div",{class:"card-bg-circle-2"},null,-1)),e("div",g5,[e("div",null,[A[19]||(A[19]=e("div",{class:"d-flex justify-content-between align-items-start mb-4"},[e("h6",{class:"text-white-50 text-uppercase ls-1 mb-0",style:{"font-size":"0.75rem"}}," "),e("div",{class:"badge bg-white bg-opacity-25 backdrop-blur rounded-pill fw-normal px-3"}," 1")],-1)),e("div",h5,[e("h2",y5,g(y.value),1),e("p",_5,g(o.value),1)])]),e("div",$5,[e("button",{class:"btn btn-white text-primary fw-bold shadow-sm",onClick:Be,disabled:s.test},[s.test?(c(),d("span",x5)):(c(),d("i",w5)),A[20]||(A[20]=te("  ' ",-1))],8,k5),e("div",C5,[e("div",S5,[e("button",{class:"btn btn-success-soft w-100",onClick:me,disabled:l.value==="opened"||s.shift},[...A[21]||(A[21]=[e("i",{class:"bi bi-unlock me-1"},null,-1),te("  ",-1)])],8,T5)]),e("div",A5,[e("button",{class:"btn btn-danger-soft w-100",onClick:X,disabled:l.value==="closed"||s.shift},[...A[22]||(A[22]=[e("i",{class:"bi bi-lock me-1"},null,-1),te("  ",-1)])],8,O5)])])])])]),e("div",P5,[e("div",M5,[A[28]||(A[28]=e("div",{class:"d-flex align-items-center justify-content-between mb-4"},[e("h6",{class:"fw-bold mb-0 text-dark"}," "),e("div",{class:"icon-box bg-light text-primary rounded-circle p-2"},[e("i",{class:"bi bi-layers-fill"})])],-1)),e("div",I5,[s.queue?(c(),d("div",D5,[...A[25]||(A[25]=[e("div",{class:"d-flex h-100 justify-content-center align-items-center bg-light bg-opacity-75 backdrop-blur"},[e("div",{class:"spinner-border text-primary",role:"status"})],-1)])])):F("",!0),e("div",U5,g(i.value),1),A[26]||(A[26]=e("p",{class:"text-muted small mb-0 text-uppercase ls-1"},"  ",-1))]),e("button",{class:"btn btn-outline-dark w-100 py-2 rounded-pill",onClick:be,disabled:i.value===0||s.queue},[...A[27]||(A[27]=[e("i",{class:"bi bi-arrow-repeat me-2"},null,-1),te("   ",-1)])],8,j5),A[29]||(A[29]=e("div",{class:"d-flex align-items-start gap-2 mt-4 text-muted small"},[e("i",{class:"bi bi-info-circle-fill text-primary mt-1"}),e("span",{style:{"font-size":"0.85rem"}},",    ,      .")],-1))])])])]),e("div",F5,[e("div",E5,[e("div",V5,[e("div",L5,[e("div",null,[A[30]||(A[30]=e("h5",{class:"mb-1 fw-bold text-dark"},"  ",-1)),e("div",N5,"   "+g(Q.value),1)]),e("span",R5,": "+g(V.value),1)]),e("div",q5,[e("div",B5,[e("div",H5,[(c(),d("svg",{class:"fiscal-chart-svg",viewBox:`0 0 ${Bs} ${Fn}`,preserveAspectRatio:"none"},[A[31]||(A[31]=e("defs",null,[e("linearGradient",{id:"fiscalGradient",x1:"0",y1:"0",x2:"0",y2:"1"},[e("stop",{offset:"0%","stop-color":"#2ec4b6","stop-opacity":"0.5"}),e("stop",{offset:"100%","stop-color":"#2ec4b6","stop-opacity":"0"})])],-1)),e("g",W5,[(c(!0),d(de,null,ve(q.value,(b,w)=>(c(),d("line",{key:`grid-${w}`,x1:"0",x2:Bs,y1:b,y2:b},null,8,K5))),128))]),e("path",{class:"chart-area",d:D.value,fill:"url(#fiscalGradient)"},null,8,G5),e("path",{class:"chart-line",d:_.value},null,8,X5)],8,z5)),e("div",J5,[(c(!0),d(de,null,ve(ee.value,(b,w)=>(c(),d("div",{key:b,class:W(["chart-label",{"is-dim":w%2!==0}])},g(b),3))),128))])])])])])])]),e("div",Q5,[e("div",Y5,[e("div",Z5,[e("div",e8,[e("div",null,[e("h5",t8,"   "+g(Q.value),1),e("div",s8,[A[32]||(A[32]=te("    : ",-1)),e("span",n8,g(I.value),1)])]),e("div",l8,[e("span",o8,": "+g(V.value),1),e("button",{class:"btn btn-light btn-sm",type:"button",onClick:z,disabled:s.save||s.queue},[...A[33]||(A[33]=[e("i",{class:"bi bi-arrow-repeat me-1"},null,-1),te("  ",-1)])],8,i8)])]),e("div",a8,[V.value?(c(),d("div",c8,[e("table",d8,[A[34]||(A[34]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,""),e("th",null,""),e("th",null,""),e("th",{class:"text-end"},""),e("th",{class:"text-end"},"")])],-1)),e("tbody",null,[(c(!0),d(de,null,ve(h.value,b=>(c(),d("tr",{key:b.id},[e("td",u8,g(O(b.created_at)),1),e("td",null,[e("span",{class:W(["badge",Z(b.status)])},g(Y(b.status)),3)]),e("td",null,g(M(b.type)),1),e("td",f8,g(U(b.total_amount)),1),e("td",m8,[b.check_link?(c(),d("a",{key:0,href:b.check_link,target:"_blank",rel:"noopener",class:"btn btn-link btn-sm"},"",8,p8)):(c(),d("span",v8,""))])]))),128))])])])):(c(),d("div",r8,"     . "))])])])]),pe(Fe,{name:"fade"},{default:Oe(()=>[a.value?(c(),d("div",{key:0,class:"modal-backdrop",onClick:ge(qe,["self"])},[e("div",b8,[e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[A[36]||(A[36]=e("h5",{class:"mb-0 fw-bold text-dark"}," ",-1)),e("button",{type:"button",class:"btn btn-link text-muted",onClick:qe},[...A[35]||(A[35]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("form",{onSubmit:ge(fe,["prevent"])},[e("div",g8,[e("div",h8,[A[38]||(A[38]=e("label",{class:"form-label fw-semibold text-secondary small text-uppercase ls-1"},"API URL",-1)),e("div",y8,[A[37]||(A[37]=e("span",{class:"input-icon"},[e("i",{class:"bi bi-link-45deg"})],-1)),ue(e("input",{"onUpdate:modelValue":A[0]||(A[0]=b=>m.api_url=b),type:"text",class:"form-control",placeholder:"https://api.checkbox.in.ua..."},null,512),[[he,m.api_url]])])]),A[47]||(A[47]=e("div",{class:"col-12"},[e("div",{class:"text-uppercase small text-muted fw-semibold"},"")],-1)),e("div",_8,[A[41]||(A[41]=e("label",{class:"form-label fw-semibold text-secondary small text-uppercase ls-1"}," ",-1)),e("div",{class:W(["input-group-modern",{"is-valid":r.value}])},[A[40]||(A[40]=e("span",{class:"input-icon"},[e("i",{class:"bi bi-key"})],-1)),ue(e("input",{"onUpdate:modelValue":A[1]||(A[1]=b=>m.license_key=b),type:"password",class:"form-control",placeholder:r.value?" ()":"  "},null,8,$8),[[he,m.license_key]]),r.value?(c(),d("span",k8,[...A[39]||(A[39]=[e("i",{class:"bi bi-check-circle-fill text-success"},null,-1)])])):F("",!0)],2)]),e("div",x8,[A[43]||(A[43]=e("label",{class:"form-label fw-semibold text-secondary small text-uppercase ls-1"}," ",-1)),e("div",w8,[A[42]||(A[42]=e("span",{class:"input-icon"},[e("i",{class:"bi bi-person"})],-1)),ue(e("input",{"onUpdate:modelValue":A[2]||(A[2]=b=>m.login=b),type:"text",class:"form-control",placeholder:"login"},null,512),[[he,m.login]])])]),e("div",C8,[A[46]||(A[46]=e("label",{class:"form-label fw-semibold text-secondary small text-uppercase ls-1"}," ",-1)),e("div",{class:W(["input-group-modern",{"is-valid":u.value}])},[A[45]||(A[45]=e("span",{class:"input-icon"},[e("i",{class:"bi bi-shield-lock"})],-1)),ue(e("input",{"onUpdate:modelValue":A[3]||(A[3]=b=>m.password=b),type:"password",class:"form-control",placeholder:u.value?" ()":" "},null,8,S8),[[he,m.password]]),u.value?(c(),d("span",T8,[...A[44]||(A[44]=[e("i",{class:"bi bi-check-circle-fill text-success"},null,-1)])])):F("",!0)],2)])]),A[55]||(A[55]=e("div",{class:"position-relative my-4"},[e("hr",{class:"text-muted-light"}),e("span",{class:"position-absolute top-50 start-50 translate-middle bg-white px-3 text-muted small fw-bold text-uppercase ls-1"},"")],-1)),e("div",A8,[e("div",O8,[e("div",P8,[A[48]||(A[48]=e("label",{class:"form-label text-success fw-bold small"},[e("i",{class:"bi bi-sun me-1"}),te(" ")],-1)),ue(e("input",{"onUpdate:modelValue":A[4]||(A[4]=b=>m.open_time=b),type:"time",class:"form-control time-input bg-transparent border-0 p-0 fw-bold fs-5 text-dark"},null,512),[[he,m.open_time]])])]),e("div",M8,[e("div",I8,[A[49]||(A[49]=e("label",{class:"form-label text-danger fw-bold small"},[e("i",{class:"bi bi-moon me-1"}),te(" ")],-1)),ue(e("input",{"onUpdate:modelValue":A[5]||(A[5]=b=>m.close_time=b),type:"time",class:"form-control time-input bg-transparent border-0 p-0 fw-bold fs-5 text-dark"},null,512),[[he,m.close_time]])])]),e("div",D8,[e("div",U8,[A[50]||(A[50]=e("label",{class:"form-label text-primary fw-bold small"},[e("i",{class:"bi bi-cloud-upload me-1"}),te(" ")],-1)),ue(e("input",{"onUpdate:modelValue":A[6]||(A[6]=b=>m.queue_process_time=b),type:"time",class:"form-control time-input bg-transparent border-0 p-0 fw-bold fs-5 text-dark"},null,512),[[he,m.queue_process_time]])])])]),e("div",j8,[e("div",F8,[A[51]||(A[51]=e("div",null,[e("h6",{class:"mb-0 fw-bold text-dark"}," "),e("small",{class:"text-muted"},"   Checkbox API")],-1)),e("div",E8,[ue(e("input",{"onUpdate:modelValue":A[7]||(A[7]=b=>m.enabled=b),class:"form-check-input custom-switch",type:"checkbox",style:{width:"3em",height:"1.5em"}},null,512),[[an,m.enabled]])])]),A[53]||(A[53]=e("hr",{class:"my-3 border-secondary opacity-10"},null,-1)),e("div",V8,[A[52]||(A[52]=e("div",null,[e("h6",{class:"mb-0 fw-bold text-dark"}," "),e("small",{class:"text-muted"},"    ")],-1)),e("div",L8,[ue(e("input",{"onUpdate:modelValue":A[8]||(A[8]=b=>m.queue_enabled=b),class:"form-check-input custom-switch",type:"checkbox",style:{width:"3em",height:"1.5em"}},null,512),[[an,m.queue_enabled]])])])]),e("div",N8,[e("button",{type:"button",class:"btn btn-light",onClick:qe},""),e("button",{type:"submit",class:"btn btn-primary",disabled:s.save},[s.save?(c(),d("span",q8)):F("",!0),A[54]||(A[54]=te("  ",-1))],8,R8)])],32)])])):F("",!0)]),_:1})]))}},H8=xe(B8,[["__scopeId","data-v-2233e7fb"]]),z8={class:"container-fluid max-width-1200 py-3 py-md-5"},W8={class:"d-flex align-items-center justify-content-between mb-4 px-2"},K8={class:"list-container shadow-sm bg-white rounded-4 overflow-hidden"},G8={key:0,class:"p-5 text-center"},X8={key:1,class:"list-header d-none d-md-grid px-4 py-3 bg-light border-bottom"},J8={key:2,class:"list-group list-group-flush"},Q8={class:"row align-items-center g-3"},Y8={class:"col-12 col-md-6 col-lg-7"},Z8={class:"d-flex align-items-center"},e6={class:"fw-bold text-dark fs-5"},t6={class:"text-muted small"},s6={class:"col-6 col-md-2 text-md-center"},n6={class:"sort-pill"},l6={class:"col-6 col-md-4 col-lg-3 text-end"},o6={class:"d-flex justify-content-end gap-2"},i6=["onClick"],a6=["onClick"],r6={key:3,class:"p-5 text-center"},c6={key:0,class:"modal-overlay d-flex align-items-center justify-content-center"},d6={class:"modal-card bg-white shadow-lg animate-slide-up"},u6={class:"modal-card-header"},f6={class:"fw-bold m-0"},m6={class:"modal-card-body"},p6={class:"mb-4"},v6={class:"mb-2"},b6={class:"modal-card-footer"},g6=["disabled"],h6={key:0,class:"spinner-border spinner-border-sm me-2"},y6={__name:"SettingsCategoriesPage",setup(t){const s=S([]),n=S(!1),l=S(!1),o=S(!1),i=S(null),a=Me({name:"",sort_order:0});async function r(){n.value=!0;try{const{data:f}=await _e.get("/settings/categories");s.value=f?.data||[]}finally{n.value=!1}}function u(f=null){f?(i.value=f.id,a.name=f.name,a.sort_order=f.sort_order??0):(i.value=null,a.name="",a.sort_order=0),o.value=!0}function h(){o.value=!1}async function v(){if(a.name){l.value=!0;try{i.value?await _e.put(`/settings/categories/${i.value}`,{...a}):await _e.post("/settings/categories",{...a}),h(),await r()}finally{l.value=!1}}}async function p(f){confirm(`  "${f.name}"?`)&&(await _e.delete(`/settings/categories/${f.id}`),await r())}return Re(r),(f,m)=>(c(),d("div",z8,[e("div",W8,[m[4]||(m[4]=e("div",null,[e("h1",{class:"h3 fw-bold mb-1 text-dark"},""),e("p",{class:"text-muted small mb-0 d-none d-sm-block"},"   ")],-1)),e("button",{class:"btn btn-primary rounded-pill px-4 d-flex align-items-center gap-2 shadow-sm",onClick:m[0]||(m[0]=y=>u())},[...m[3]||(m[3]=[e("i",{class:"bi bi-plus-circle-fill"},null,-1),e("span",{class:"d-none d-sm-inline"}," ",-1),e("span",{class:"d-inline d-sm-none"},"",-1)])])]),e("div",K8,[n.value?(c(),d("div",G8,[...m[5]||(m[5]=[e("div",{class:"spinner-border text-primary-subtle",role:"status"},null,-1)])])):s.value.length?(c(),d("div",X8,[...m[6]||(m[6]=[e("div",{class:"small fw-bold text-muted uppercase-tracking"},"",-1),e("div",{class:"small fw-bold text-muted uppercase-tracking text-center"},"",-1),e("div",{class:"small fw-bold text-muted uppercase-tracking text-end"},"",-1)])])):F("",!0),n.value?F("",!0):(c(),d("div",J8,[(c(!0),d(de,null,ve(s.value,y=>(c(),d("div",{key:y.id,class:"list-group-item list-item-hover px-4 py-3 border-start-accent"},[e("div",Q8,[e("div",Y8,[e("div",Z8,[m[7]||(m[7]=e("div",{class:"icon-box me-3 d-none d-sm-flex"},[e("i",{class:"bi bi-folder2 text-primary"})],-1)),e("div",null,[e("div",e6,g(y.name),1),e("div",t6,"ID: "+g(y.id),1)])])]),e("div",s6,[m[9]||(m[9]=e("span",{class:"d-md-none text-muted small d-block mb-1"},":",-1)),e("span",n6,[m[8]||(m[8]=e("i",{class:"bi bi-sort-numeric-down me-1"},null,-1)),te(" "+g(y.sort_order??0),1)])]),e("div",l6,[e("div",o6,[e("button",{class:"btn btn-action-edit shadow-sm",onClick:L=>u(y)},[...m[10]||(m[10]=[e("i",{class:"bi bi-pencil-square"},null,-1)])],8,i6),e("button",{class:"btn btn-action-delete shadow-sm",onClick:L=>p(y)},[...m[11]||(m[11]=[e("i",{class:"bi bi-trash3"},null,-1)])],8,a6)])])])]))),128))])),!s.value.length&&!n.value?(c(),d("div",r6,[...m[12]||(m[12]=[e("i",{class:"bi bi-inbox display-1 text-light"},null,-1),e("p",{class:"h5 mt-3 text-muted"},"  ",-1)])])):F("",!0)]),o.value?(c(),d("div",c6,[e("div",d6,[e("div",u6,[e("h4",f6,g(i.value?"":""),1),e("button",{class:"btn-close-custom",onClick:h},"")]),e("div",m6,[e("div",p6,[m[13]||(m[13]=e("label",{class:"form-label-custom"}," ",-1)),ue(e("input",{"onUpdate:modelValue":m[1]||(m[1]=y=>a.name=y),type:"text",class:"form-input-custom",placeholder:": ",autofocus:""},null,512),[[he,a.name,void 0,{trim:!0}]])]),e("div",v6,[m[14]||(m[14]=e("label",{class:"form-label-custom"}," ",-1)),ue(e("input",{"onUpdate:modelValue":m[2]||(m[2]=y=>a.sort_order=y),type:"number",class:"form-input-custom",min:"0"},null,512),[[he,a.sort_order,void 0,{number:!0}]])])]),e("div",b6,[e("button",{class:"btn btn-light-custom",onClick:h},""),e("button",{class:"btn btn-primary-custom",disabled:l.value,onClick:v},[l.value?(c(),d("span",h6)):F("",!0),m[15]||(m[15]=te("  ",-1))],8,g6)])])])):F("",!0)]))}},_6=xe(y6,[["__scopeId","data-v-142b2efe"]]),$6={class:"container-fluid max-width-1200 py-3 py-md-5"},k6={class:"d-flex align-items-center justify-content-between mb-4 px-2"},x6={class:"list-container shadow-sm bg-white rounded-4 overflow-hidden"},w6={key:0,class:"p-5 text-center"},C6={key:1,class:"list-header d-none d-md-grid px-4 py-3 bg-light border-bottom"},S6={key:2,class:"list-group list-group-flush"},T6={class:"row align-items-center g-3"},A6={class:"col-12 col-md-6"},O6={class:"d-flex align-items-center"},P6={class:"fw-bold text-dark fs-5"},M6={class:"text-muted small d-md-none"},I6={class:"col-md-2 text-center d-none d-md-block"},D6={class:"hex-badge"},U6={class:"col-12 col-md-4 text-end"},j6={class:"d-flex justify-content-end gap-2"},F6=["onClick"],E6=["onClick"],V6={key:3,class:"p-5 text-center"},L6={key:0,class:"modal-overlay d-flex align-items-center justify-content-center"},N6={class:"modal-card bg-white shadow-lg animate-slide-up"},R6={class:"modal-card-header"},q6={class:"fw-bold m-0"},B6={class:"modal-card-body"},H6={class:"mb-4"},z6={class:"mb-2"},W6={class:"d-flex align-items-center gap-3 p-3 border rounded-4 bg-light"},K6={class:"color-input-wrapper shadow-sm"},G6={class:"flex-grow-1"},X6={class:"modal-card-footer"},J6=["disabled"],Q6={key:0,class:"spinner-border spinner-border-sm me-2"},Y6={__name:"SettingsColorsPage",setup(t){const s=S([]),n=S(!1),l=S(!1),o=S(!1),i=S(null),a=Me({name:"",hex_code:"#0d6efd"});async function r(){n.value=!0;try{const{data:f}=await _e.get("/settings/colors");s.value=f?.data||[]}finally{n.value=!1}}function u(f=null){f?(i.value=f.id,a.name=f.name,a.hex_code=f.hex_code||"#000000"):(i.value=null,a.name="",a.hex_code="#0d6efd"),o.value=!0}function h(){o.value=!1}async function v(){if(a.name){l.value=!0;try{const f={name:a.name,hex_code:a.hex_code};i.value?await _e.put(`/settings/colors/${i.value}`,f):await _e.post("/settings/colors",f),h(),await r()}finally{l.value=!1}}}async function p(f){confirm(`  "${f.name}"?`)&&(await _e.delete(`/settings/colors/${f.id}`),await r())}return Re(r),(f,m)=>(c(),d("div",$6,[e("div",k6,[m[5]||(m[5]=e("div",null,[e("h1",{class:"h3 fw-bold mb-1 text-dark"},""),e("p",{class:"text-muted small mb-0 d-none d-sm-block"},"  ")],-1)),e("button",{class:"btn btn-primary rounded-pill px-4 d-flex align-items-center gap-2 shadow-sm",onClick:m[0]||(m[0]=y=>u())},[...m[4]||(m[4]=[e("i",{class:"bi bi-plus-circle-fill"},null,-1),e("span",null," ",-1)])])]),e("div",x6,[n.value?(c(),d("div",w6,[...m[6]||(m[6]=[e("div",{class:"spinner-border text-primary-subtle",role:"status"},null,-1)])])):s.value.length?(c(),d("div",C6,[...m[7]||(m[7]=[e("div",{class:"small fw-bold text-muted uppercase-tracking"},"  ",-1),e("div",{class:"small fw-bold text-muted uppercase-tracking text-center"},"HEX ",-1),e("div",{class:"small fw-bold text-muted uppercase-tracking text-end"},"",-1)])])):F("",!0),n.value?F("",!0):(c(),d("div",S6,[(c(!0),d(de,null,ve(s.value,y=>(c(),d("div",{key:y.id,class:"list-group-item list-item-hover px-4 py-3"},[e("div",T6,[e("div",A6,[e("div",O6,[e("div",{class:"color-preview-circle me-3 shadow-sm",style:Te({backgroundColor:y.hex_code||"#eee"})},null,4),e("div",null,[e("div",P6,g(y.name),1),e("div",M6,g(y.hex_code||""),1)])])]),e("div",I6,[e("code",D6,g(y.hex_code||""),1)]),e("div",U6,[e("div",j6,[e("button",{class:"btn btn-action-edit shadow-sm",onClick:L=>u(y)},[...m[8]||(m[8]=[e("i",{class:"bi bi-pencil-square"},null,-1)])],8,F6),e("button",{class:"btn btn-action-delete shadow-sm",onClick:L=>p(y)},[...m[9]||(m[9]=[e("i",{class:"bi bi-trash3"},null,-1)])],8,E6)])])])]))),128))])),!s.value.length&&!n.value?(c(),d("div",V6,[...m[10]||(m[10]=[e("i",{class:"bi bi-palette display-1 text-light"},null,-1),e("p",{class:"h5 mt-3 text-muted"}," ",-1)])])):F("",!0)]),o.value?(c(),d("div",L6,[e("div",N6,[e("div",R6,[e("h4",q6,g(i.value?" ":" "),1),e("button",{class:"btn-close-custom",onClick:h},"")]),e("div",B6,[e("div",H6,[m[11]||(m[11]=e("label",{class:"form-label-custom"}," ",-1)),ue(e("input",{"onUpdate:modelValue":m[1]||(m[1]=y=>a.name=y),type:"text",class:"form-input-custom",placeholder:":  "},null,512),[[he,a.name,void 0,{trim:!0}]])]),e("div",z6,[m[13]||(m[13]=e("label",{class:"form-label-custom"}," ",-1)),e("div",W6,[e("div",K6,[ue(e("input",{type:"color","onUpdate:modelValue":m[2]||(m[2]=y=>a.hex_code=y),class:"real-color-picker"},null,512),[[he,a.hex_code]]),e("div",{class:"color-visual-trigger",style:Te({backgroundColor:a.hex_code})},null,4)]),e("div",G6,[ue(e("input",{"onUpdate:modelValue":m[3]||(m[3]=y=>a.hex_code=y),type:"text",class:"form-control border-0 bg-transparent fw-mono",placeholder:"#000000"},null,512),[[he,a.hex_code,void 0,{trim:!0}]]),m[12]||(m[12]=e("div",{class:"small text-muted"},"  ,   ",-1))])])])]),e("div",X6,[e("button",{class:"btn btn-light-custom",onClick:h},""),e("button",{class:"btn btn-primary-custom",disabled:l.value,onClick:v},[l.value?(c(),d("span",Q6)):F("",!0),m[14]||(m[14]=te("  ",-1))],8,J6)])])])):F("",!0)]))}},Z6=xe(Y6,[["__scopeId","data-v-425fe14d"]]),eS={class:"container-fluid max-width-1200 py-3 py-md-5"},tS={class:"d-flex align-items-center justify-content-between mb-4 px-2"},sS={class:"list-container shadow-sm bg-white rounded-4 overflow-hidden"},nS={key:0,class:"p-5 text-center"},lS={key:1,class:"list-group list-group-flush"},oS={class:"row align-items-center"},iS={class:"col"},aS={class:"col-auto d-flex gap-2"},rS=["onClick"],cS=["onClick"],dS={key:0,class:"modal-overlay d-flex align-items-center justify-content-center p-3"},uS={class:"modal-card bg-white shadow-lg animate-slide-up"},fS={class:"modal-card-header px-4 pt-4"},mS={class:"fw-bold m-0"},pS={class:"modal-card-body p-4"},vS={class:"preview-box mb-4 p-3 rounded-4 border text-center bg-light"},bS={class:"mb-4"},gS={key:0,class:"text-danger small mt-1"},hS={class:"row g-3"},yS={class:"col-6"},_S={class:"d-flex align-items-center gap-2 p-2 border rounded-3 bg-light"},$S={class:"color-picker-mini shadow-sm"},kS={class:"col-6"},xS={class:"modal-card-footer px-4 pb-4 d-flex gap-2"},wS=["disabled"],CS={key:0,class:"spinner-border spinner-border-sm me-2"},SS={key:1,class:"modal-overlay d-flex align-items-center justify-content-center p-3 secondary-modal"},TS={class:"modal-card bg-white shadow-xl animate-zoom-in",style:{"max-width":"400px"}},AS={class:"modal-card-header px-4 pt-4 d-flex justify-content-between"},OS={class:"modal-card-body p-4"},PS={class:"icon-gallery-grid"},MS=["onClick"],IS={__name:"SettingsTagsPage",setup(t){const s=S([]),n=S(!1),l=S(!1),o=S(!1),i=S(!1),a=S(null),r=S(!1),u=Me({name:"",color:"#3b82f6",icon:"bi-tag-fill"}),h=["bi-tag-fill","bi-star-fill","bi-bookmark-fill","bi-check-circle-fill","bi-exclamation-circle-fill","bi-clock-fill","bi-truck","bi-wallet2","bi-chat-dots-fill","bi-telephone-fill","bi-envelope-fill","bi-arrow-return-left","bi-gift-fill","bi-percent","bi-cart-fill","bi-person-fill","bi-lightning-fill","bi-shield-fill-check","bi-heart-fill","bi-flag-fill","bi-bell-fill","bi-camera-fill","bi-credit-card-fill","bi-geo-alt-fill","bi-hand-thumbs-up-fill","bi-hourglass-split","bi-info-circle-fill","bi-key-fill","bi-pencil-fill","bi-plus-circle-fill","bi-question-circle-fill","bi-search","bi-tools","bi-trash-fill","bi-unlock-fill","bi-wifi","bi-x-circle-fill","bi-bag-fill","bi-gem","bi-trophy-fill"];function v(H){const E={:"a",:"b",:"v",:"g",:"d",:"e",:"ye",:"zh",:"z",:"y",:"i",:"yi",:"y",:"k",:"l",:"m",:"n",:"o",:"p",:"r",:"s",:"t",:"u",:"f",:"kh",:"ts",:"ch",:"sh",:"shch",:"",:"yu",:"ya"};return H.toLowerCase().split("").map(I=>E[I]||(/[a-z0-9]/.test(I)?I:"_")).join("").replace(/__+/g,"_")}async function p(){n.value=!0;try{const{data:H}=await _e.get("/tags");s.value=H?.data||[]}finally{n.value=!1}}function f(){r.value=s.value.some(H=>H.name.toLowerCase()===u.name.toLowerCase()&&H.id!==a.value)}function m(H=null){H?(a.value=H.id,Object.assign(u,{name:H.name,color:H.color||"#3b82f6",icon:H.icon||"bi-tag-fill"})):(a.value=null,Object.assign(u,{name:"",color:"#3b82f6",icon:"bi-tag-fill"})),o.value=!0}function y(H){u.icon=H,i=!1}function L(){o.value=!1}async function K(){l.value=!0;try{const H={...u,code:v(u.name)};a.value?await _e.put(`/tags/${a.value}`,H):await _e.post("/tags",H),L(),await p()}finally{l.value=!1}}async function P(H){confirm(`  "${H.name}"?`)&&(await _e.delete(`/tags/${H.id}`),await p())}return Re(p),(H,E)=>(c(),d("div",eS,[e("div",tS,[E[7]||(E[7]=e("div",null,[e("h1",{class:"h3 fw-bold mb-1 text-dark"},""),e("p",{class:"text-muted small mb-0 d-none d-sm-block"},"   ")],-1)),e("button",{class:"btn btn-primary rounded-pill px-4 shadow-sm",onClick:E[0]||(E[0]=I=>m())},[...E[6]||(E[6]=[e("i",{class:"bi bi-plus-circle-fill me-2"},null,-1),te("   ",-1)])])]),e("div",sS,[n.value?(c(),d("div",nS,[...E[8]||(E[8]=[e("div",{class:"spinner-border text-primary-subtle",role:"status"},null,-1)])])):(c(),d("div",lS,[(c(!0),d(de,null,ve(s.value,I=>(c(),d("div",{key:I.id,class:"list-group-item list-item-hover px-4 py-3"},[e("div",oS,[e("div",iS,[e("span",{class:"custom-tag-badge shadow-sm",style:Te({backgroundColor:I.color+"20",color:I.color,borderColor:I.color+"40"})},[e("i",{class:W(["bi",I.icon||"bi-tag-fill","me-2"])},null,2),te(" "+g(I.name),1)],4)]),e("div",aS,[e("button",{class:"btn btn-action-edit shadow-sm",onClick:V=>m(I)},[...E[9]||(E[9]=[e("i",{class:"bi bi-pencil-square"},null,-1)])],8,rS),e("button",{class:"btn btn-action-delete shadow-sm",onClick:V=>P(I)},[...E[10]||(E[10]=[e("i",{class:"bi bi-trash3"},null,-1)])],8,cS)])])]))),128))]))]),o.value?(c(),d("div",dS,[e("div",uS,[e("div",fS,[e("h4",mS,g(a.value?"":" "),1),e("button",{class:"btn-close-custom",onClick:L},"")]),e("div",pS,[e("div",vS,[e("span",{class:"custom-tag-badge shadow-sm",style:Te({backgroundColor:u.color+"20",color:u.color,borderColor:u.color+"40"})},[e("i",{class:W(["bi",u.icon,"me-2"])},null,2),te(" "+g(u.name||" "),1)],4)]),e("div",bS,[E[11]||(E[11]=e("label",{class:"form-label-custom"}," ",-1)),ue(e("input",{"onUpdate:modelValue":E[1]||(E[1]=I=>u.name=I),type:"text",class:W(["form-input-custom",{"is-invalid":r.value}]),placeholder:": ",onInput:f},null,34),[[he,u.name,void 0,{trim:!0}]]),r.value?(c(),d("div",gS,"   !")):F("",!0)]),e("div",hS,[e("div",yS,[E[12]||(E[12]=e("label",{class:"form-label-custom"},"",-1)),e("div",_S,[e("div",$S,[ue(e("input",{type:"color","onUpdate:modelValue":E[2]||(E[2]=I=>u.color=I),class:"real-color-picker"},null,512),[[he,u.color]]),e("div",{class:"color-visual-trigger",style:Te({backgroundColor:u.color})},null,4)]),ue(e("input",{"onUpdate:modelValue":E[3]||(E[3]=I=>u.color=I),type:"text",class:"form-control border-0 bg-transparent small p-0 fw-bold",style:{width:"70px"}},null,512),[[he,u.color]])])]),e("div",kS,[E[14]||(E[14]=e("label",{class:"form-label-custom"},"",-1)),e("button",{class:"btn btn-outline-secondary w-100 rounded-3 py-2 d-flex align-items-center justify-content-center gap-2",onClick:E[4]||(E[4]=I=>i.value=!0)},[e("i",{class:W(["bi",u.icon])},null,2),E[13]||(E[13]=e("span",null,"",-1))])])])]),e("div",xS,[e("button",{class:"btn btn-light-custom",onClick:L},""),e("button",{class:"btn btn-primary-custom",disabled:l.value||r.value||!u.name,onClick:K},[l.value?(c(),d("span",CS)):F("",!0),E[15]||(E[15]=te("  ",-1))],8,wS)])])])):F("",!0),i.value?(c(),d("div",SS,[e("div",TS,[e("div",AS,[E[16]||(E[16]=e("h5",{class:"fw-bold m-0"}," ",-1)),e("button",{class:"btn-close-custom",onClick:E[5]||(E[5]=I=>i.value=!1)},"")]),e("div",OS,[e("div",PS,[(c(),d(de,null,ve(h,I=>e("div",{key:I,class:W(["gallery-icon-item",{active:u.icon===I}]),onClick:V=>y(I)},[e("i",{class:W(["bi",I])},null,2)],10,MS)),64))])])])])):F("",!0)]))}},DS=xe(IS,[["__scopeId","data-v-412170ca"]]),US={class:"app-container"},jS={class:"content-wrapper max-width-1100"},FS={class:"page-header"},ES={class:"header-content"},VS=["disabled"],LS={class:"btn-content"},NS={key:0,class:"loader"},RS={key:1,class:"bi bi-cloud-check-fill"},qS={class:"grid-layout"},BS={class:"grid-item"},HS={class:"glass-card accent-border"},zS={class:"card-body"},WS={class:"form-group"},KS=["disabled"],GS={class:"glass-card mt-4"},XS={class:"card-body"},JS={class:"read-only-grid"},QS={class:"ro-item"},YS={class:"value"},ZS={class:"ro-item"},eT={class:"value"},tT={class:"grid-item"},sT={class:"glass-card overflow-visible"},nT={class:"card-body d-flex flex-column gap-4"},lT={class:"form-group"},oT={class:"input-modern-wrapper"},iT={class:"form-group position-relative z-2"},aT={class:"input-modern-wrapper"},rT={key:0,class:"loader-mini"},cT={key:0,class:"premium-dropdown"},dT={key:0,class:"p-3 text-danger text-center small"},uT={key:1,class:"options-list"},fT=["onMousedown"],mT={class:"opt-title"},pT={class:"opt-desc"},vT={class:"input-modern-wrapper"},bT=["disabled"],gT={key:0,class:"loader-mini"},hT={key:0,class:"premium-dropdown"},yT={class:"options-list"},_T=["onMousedown"],$T={class:"opt-title small"},kT={key:0,class:"premium-toast"},xT={__name:"SettingsNovaPoshtaPage",setup(t){const s=Me({api_key:"",sender_ref:"",contact_ref:"",sender_phone:"",sender_city_ref:"",sender_warehouse_ref:""}),n=S(!1),l=S(!1),o=S(!1),i=S("");let a=null;const r=S(""),u=S(""),h=S([]),v=S([]),p=S(!1),f=S(!1),m=S(""),y=S(!1),L=S(!1);let K=null,P=null;const H=q=>{i.value=q,a&&clearTimeout(a),a=setTimeout(()=>{i.value=""},3e3)},E=async()=>{try{const{data:q}=await _e.get("/settings/nova-poshta");q&&Object.assign(s,q),q?.sender_city_ref&&(r.value=q.sender_city_ref),q?.sender_warehouse_ref&&(u.value=q.sender_warehouse_ref)}catch{}},I=async()=>{n.value=!0;try{await _e.post("/settings/nova-poshta",s),H(" ")}finally{n.value=!1}},V=async()=>{if(s.api_key){l.value=!0;try{const{data:q}=await _e.post("/settings/nova-poshta/fetch-refs",{api_key:s.api_key});s.sender_ref=q.sender_ref||"",s.contact_ref=q.contact_ref||"",s.sender_phone=q.sender_phone||"",H(" ")}finally{l.value=!1}}};Se(r,q=>{if(m.value="",K&&clearTimeout(K),!q||q.length<3){h.value=[];return}K=setTimeout(()=>Q(q),600)}),Se(u,q=>{P&&clearTimeout(P),s.sender_city_ref&&(P=setTimeout(()=>ee(q),600))});const Q=async q=>{p.value=!0,m.value="";try{const{data:M}=await _e.get("/nova-poshta/cities",{params:{q,limit:20}});h.value=M?.data||M||[]}catch{m.value=" "}finally{p.value=!1}},ee=async q=>{f.value=!0;try{const{data:M}=await _e.get("/nova-poshta/warehouses",{params:{city_ref:s.sender_city_ref,q:q||"",limit:50}});v.value=M?.data||M||[]}finally{f.value=!1}},B=q=>{s.sender_city_ref=q.ref||"",r.value=q.name||"",y.value=!1,s.sender_warehouse_ref="",u.value="",v.value=[]},T=q=>{s.sender_warehouse_ref=q.ref||"",u.value=q.name||"",L.value=!1},k=()=>{L.value=!0,s.sender_city_ref&&!v.value.length&&ee("")},_=()=>setTimeout(()=>{y.value=!1},200),D=()=>setTimeout(()=>{L.value=!1},200);return Re(E),(q,M)=>(c(),d("div",US,[e("div",jS,[e("header",FS,[e("div",ES,[M[7]||(M[7]=Fs('<div class="brand-badge" data-v-4b6f6607><div class="brand-icon" data-v-4b6f6607><i class="bi bi-box-seam-fill" data-v-4b6f6607></i></div><div class="brand-text" data-v-4b6f6607><h1 class="title" data-v-4b6f6607>  <span class="badge-api" data-v-4b6f6607>API 2.0</span></h1><p class="subtitle" data-v-4b6f6607>   </p></div></div>',1)),e("button",{class:W(["btn-save",{saving:n.value}]),disabled:n.value,onClick:I},[e("div",LS,[n.value?(c(),d("span",NS)):(c(),d("i",RS)),e("span",null,g(n.value?"...":" "),1)])],10,VS)])]),e("div",qS,[e("div",BS,[e("div",HS,[M[10]||(M[10]=e("div",{class:"card-header"},[e("div",{class:"icon-circle text-indigo"},[e("i",{class:"bi bi-shield-lock-fill"})]),e("div",null,[e("h3",null,"API "),e("p",null,"   ")])],-1)),e("div",zS,[e("div",WS,[M[9]||(M[9]=e("label",{class:"floating-label"},"API ",-1)),e("div",{class:W(["input-modern-wrapper",{"has-focus":o.value}])},[ue(e("input",{"onUpdate:modelValue":M[0]||(M[0]=Y=>s.api_key=Y),type:"text",placeholder:"  ...",onFocus:M[1]||(M[1]=Y=>o.value=!0),onBlur:M[2]||(M[2]=Y=>o.value=!1)},null,544),[[he,s.api_key,void 0,{trim:!0}]]),e("button",{class:"action-btn",disabled:l.value||!s.api_key,onClick:V,title:" "},[e("i",{class:W(["bi bi-arrow-repeat",{spin:l.value}])},null,2)],8,KS)],2),e("div",{class:W(["status-indicator",s.sender_ref?"active":"inactive"])},[M[8]||(M[8]=e("span",{class:"dot"},null,-1)),te(" "+g(s.sender_ref?"  ":" "),1)],2)])])]),e("div",GS,[M[13]||(M[13]=e("div",{class:"card-header pb-0"},[e("div",{class:"icon-circle text-slate"},[e("i",{class:"bi bi-database-fill"})]),e("div",null,[e("h3",null," "),e("p",null," ")])],-1)),e("div",XS,[e("div",JS,[e("div",QS,[M[11]||(M[11]=e("span",{class:"label"},"Sender Ref",-1)),e("span",YS,g(s.sender_ref||""),1)]),e("div",ZS,[M[12]||(M[12]=e("span",{class:"label"},"Contact Ref",-1)),e("span",eT,g(s.contact_ref||""),1)])])])])]),e("div",tT,[e("div",sT,[M[21]||(M[21]=e("div",{class:"card-header"},[e("div",{class:"icon-circle text-rose"},[e("i",{class:"bi bi-geo-alt-fill"})]),e("div",null,[e("h3",null," "),e("p",null,"   ")])],-1)),e("div",nT,[e("div",lT,[M[15]||(M[15]=e("label",{class:"floating-label"}," ",-1)),e("div",oT,[M[14]||(M[14]=e("i",{class:"bi bi-telephone prefix-icon"},null,-1)),ue(e("input",{"onUpdate:modelValue":M[3]||(M[3]=Y=>s.sender_phone=Y),type:"text",class:"with-prefix",placeholder:"380 XX XXX XX XX"},null,512),[[he,s.sender_phone,void 0,{trim:!0}]])])]),e("div",iT,[M[17]||(M[17]=e("label",{class:"floating-label"}," ",-1)),e("div",aT,[M[16]||(M[16]=e("i",{class:"bi bi-buildings prefix-icon"},null,-1)),ue(e("input",{"onUpdate:modelValue":M[4]||(M[4]=Y=>r.value=Y),type:"text",class:"with-prefix",placeholder:"  ...",onFocus:M[5]||(M[5]=Y=>y.value=!0),onBlur:_},null,544),[[he,r.value]]),p.value?(c(),d("div",rT)):F("",!0)]),pe(Fe,{name:"dropdown"},{default:Oe(()=>[y.value&&(h.value.length||m.value)?(c(),d("div",cT,[m.value?(c(),d("div",dT,g(m.value),1)):(c(),d("ul",uT,[(c(!0),d(de,null,ve(h.value,Y=>(c(),d("li",{key:Y.ref,onMousedown:ge(Z=>B(Y),["prevent"])},[e("div",mT,g(Y.name),1),e("div",pT,g(Y.area),1)],40,fT))),128))]))])):F("",!0)]),_:1})]),e("div",{class:W(["form-group position-relative z-1",{"opacity-50 pointer-events-none":!s.sender_city_ref}])},[M[20]||(M[20]=e("label",{class:"floating-label"}," / ",-1)),e("div",vT,[M[18]||(M[18]=e("i",{class:"bi bi-box2 prefix-icon"},null,-1)),ue(e("input",{"onUpdate:modelValue":M[6]||(M[6]=Y=>u.value=Y),type:"text",class:"with-prefix",placeholder:"  ...",disabled:!s.sender_city_ref,onFocus:k,onBlur:D},null,40,bT),[[he,u.value]]),f.value?(c(),d("div",gT)):F("",!0)]),pe(Fe,{name:"dropdown"},{default:Oe(()=>[L.value&&v.value.length?(c(),d("div",hT,[e("ul",yT,[(c(!0),d(de,null,ve(v.value,Y=>(c(),d("li",{key:Y.ref,onMousedown:ge(Z=>T(Y),["prevent"]),class:"d-flex align-items-center gap-2"},[M[19]||(M[19]=e("i",{class:"bi bi-geo text-muted small"},null,-1)),e("span",$T,g(Y.name),1)],40,_T))),128))])])):F("",!0)]),_:1})],2)])])])])]),pe(Fe,{name:"toast-pop"},{default:Oe(()=>[i.value?(c(),d("div",kT,[M[22]||(M[22]=e("div",{class:"toast-indicator"},null,-1)),M[23]||(M[23]=e("i",{class:"bi bi-check-circle-fill"},null,-1)),e("span",null,g(i.value),1)])):F("",!0)]),_:1})]))}},wT=xe(xT,[["__scopeId","data-v-4b6f6607"]]),CT={class:"packing-shell"},ST={class:"main-content"},TT={class:"stats-overview mb-4"},AT={class:"stat-card-modern success"},OT={class:"stat-info"},PT={class:"stat-value"},MT={class:"stat-card-modern primary"},IT={class:"stat-info"},DT={class:"stat-value"},UT={key:0,class:"stat-card-modern danger"},jT={class:"stat-info"},FT={class:"stat-value"},ET={class:"control-panel mb-4"},VT={class:"d-flex align-items-center gap-3 flex-wrap control-left"},LT={class:"search-wrapper"},NT={class:"settings-group"},RT={class:"auto-refresh-switch",title:"    30 "},qT={class:"actions-group"},BT=["disabled"],HT=["disabled"],zT={class:"orders-container"},WT={key:0,class:"priority-strip"},KT={class:"order-main-content"},GT={class:"order-identity"},XT={class:"d-flex align-items-center gap-2 mb-1 identity-top"},JT={class:"order-id"},QT={key:0,class:"badge-status processing"},YT={key:1,class:"badge-status packed"},ZT={key:2,class:"badge-status pending"},e7={class:"order-sub"},t7={class:"order-items-preview"},s7={key:0,class:"avatar-more"},n7={class:"items-count-label"},l7={class:"order-timing"},o7={class:"timing-val"},i7={key:0,class:"text-success"},a7={key:1,class:"text-processing"},r7={key:0},c7={key:1},d7={key:2,class:"text-waiting"},u7={class:"order-actions"},f7=["onClick"],m7={key:1,class:"processing-actions"},p7=["onClick"],v7=["onClick"],b7=["onClick"],g7={key:0,class:"empty-state-modern"},h7={class:"packing-modal"},y7={class:"modal-header"},_7={class:"modal-subtitle"},$7={key:0},k7={class:"modal-body"},x7={class:"modal-grid"},w7={class:"modal-section"},C7={class:"detail-row"},S7={class:"detail-value"},T7={class:"detail-row"},A7={class:"detail-value"},O7={class:"detail-row"},P7={class:"detail-value"},M7={class:"detail-row"},I7={class:"detail-value"},D7={class:"detail-row"},U7={class:"detail-value"},j7={class:"detail-row"},F7={class:"detail-value"},E7={class:"detail-row"},V7={class:"detail-value"},L7={class:"detail-row"},N7={class:"detail-value"},R7={class:"modal-section"},q7={class:"modal-items"},B7={class:"modal-item-info"},H7={class:"modal-item-title"},z7={class:"modal-item-meta"},W7={class:"modal-item-qty"},K7={key:0,class:"modal-empty"},G7={class:"modal-actions"},X7=["disabled"],J7={__name:"PackingList",setup(t){const s=S([]),n=S([]),l=S(!0),o=S(""),i=S(!0),a=S(!1),r=S(null),u=S(!1);let h=null;const v=j=>j.packing_status==="pending"||!j.packing_status&&j.status_id!==12,p=j=>j.packing_status==="processing",f=j=>j.packing_status==="packed"||!!j.packed_at||j.status_id===12,m=se(()=>s.value.find(j=>p(j))),y=se(()=>s.value.filter(j=>v(j)).length),L=se(()=>s.value.filter(j=>j.is_priority&&v(j)).length),K=se(()=>Array.isArray(r.value?.items)?r.value.items:[]),P=se(()=>r.value?.delivery||{}),H=se(()=>r.value?.order_number||r.value?.id||""),E=se(()=>r.value?.packed_at||r.value?.updated_at||null),I=se(()=>r.value?.customer||{}),V=se(()=>r.value?.packer?.name||""),Q=se(()=>P.value?.carrier||P.value?.delivery_type||P.value?.service_type||""),ee=se(()=>{const j=P.value?.recipient_name,C=[I.value?.first_name,I.value?.last_name].filter(Boolean).join(" ").trim();return j||C||""}),B=se(()=>P.value?.recipient_phone||I.value?.phone||r.value?.phone||""),T=se(()=>!!(r.value?.id&&P.value?.ttn)),k=se(()=>{const j=[...s.value,...n.value];let C=j;if(o.value){const N=o.value.toLowerCase();C=j.filter(re=>String(re.order_number).toLowerCase().includes(N)||(re.delivery?.city_name||"").toLowerCase().includes(N))}return C.sort((N,re)=>{const oe=ne=>p(ne)?1:v(ne)?2:f(ne)?3:4,x=oe(N),R=oe(re);if(x!==R)return x-R;if(f(N)){const ne=new Date(N.packed_at||N.updated_at).getTime();return new Date(re.packed_at||re.updated_at).getTime()-ne}return v(N)?N.is_priority!==re.is_priority?N.is_priority?-1:1:new Date(N.created_at)-new Date(re.created_at):0})}),_=(j="success")=>{try{const C=window.AudioContext||window.webkitAudioContext;if(!C)return;const N=new C,re=N.createOscillator(),oe=N.createGain();re.connect(oe),oe.connect(N.destination),j==="success"?(re.type="sine",re.frequency.setValueAtTime(800,N.currentTime),re.frequency.exponentialRampToValueAtTime(1200,N.currentTime+.1),oe.gain.setValueAtTime(.1,N.currentTime),oe.gain.exponentialRampToValueAtTime(.01,N.currentTime+.1),re.start(N.currentTime),re.stop(N.currentTime+.15)):(re.type="sawtooth",re.frequency.setValueAtTime(150,N.currentTime),oe.gain.setValueAtTime(.1,N.currentTime),oe.gain.linearRampToValueAtTime(.01,N.currentTime+.2),re.start(N.currentTime),re.stop(N.currentTime+.25))}catch(C){console.error("Audio error",C)}},D=async()=>{l.value=!0;try{const[j,C]=await Promise.all([we.get("/api/packing/list"),we.get("/api/packing/history")]);s.value=Array.isArray(j.data)?j.data:[],n.value=Array.isArray(C.data)?C.data:[]}catch(j){console.error(" ",j)}finally{l.value=!1}},q=()=>D(),M=async j=>{try{const{data:C}=await we.post(`/packing/${j}/start`);C?.success&&(_("success"),window.location.href=`/packing/${j}`)}catch(C){_("error"),alert(C.response?.data?.error||" "),q()}},Y=()=>{const j=m.value||k.value.find(C=>v(C));j&&M(j.id)},Z=async j=>{if(!(!j?.id||!confirm("      ?")))try{const{data:N}=await we.post(`/packing/${j.id}/release`);N?.success&&q()}catch(N){alert(N.response?.data?.error||" ")}},U=j=>{r.value=j,a.value=!0},O=()=>{a.value=!1,r.value=null},$=async()=>{const j=r.value?.id;if(j){u.value=!0;try{const{data:C}=await we.get(`/orders/${j}/print-ttn`);C?.print_url?window.open(C.print_url,"_blank"):alert(C?.message||"   ")}catch(C){alert(C.response?.data?.message||" ")}finally{u.value=!1}}},le=()=>{h&&clearInterval(h),i.value&&(h=setInterval(()=>{we.get("/api/packing/list").then(j=>{Array.isArray(j.data)&&(s.value=j.data)}),we.get("/api/packing/history").then(j=>{Array.isArray(j.data)&&(n.value=j.data)})},3e4))};Se(i,le);const G=j=>{if(!j)return"";const C=Math.floor((new Date-new Date(j))/6e4);if(C<1)return"";if(C<60)return`${C} `;const N=Math.floor(C/60);return N<24?`${N} `:`${Math.floor(N/24)} `},z=j=>j?new Date(j).toLocaleTimeString("uk-UA",{hour:"2-digit",minute:"2-digit"}):"",fe=j=>j?new Date(j).toLocaleString("uk-UA",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",Le=(j,C)=>{const N=[2,0,1,1,1,2];return C[j%100>4&&j%100<20?2:N[j%10<5?j%10:5]]},qe=j=>{if(!j)return"";if(j.startsWith("http")||j.startsWith("/"))return j;const C=j.replace(/^\/+/,"");return C.startsWith("storage/")?`/${C}`:`/storage/${C}`},Be=(j=[])=>j.slice(0,3).map(C=>({src:qe(C?.product?.main_photo_url||C?.product?.main_photo_path||C?.photo_url||C?.image_path||C?.photo||"")})),me=j=>j.src?{backgroundImage:`url(${j.src})`,backgroundSize:"cover"}:{backgroundColor:"#e2e8f0"},X=j=>j?.product_title||j?.product?.title||"",be=j=>j?.color||j?.product?.color?.name||"",ie=j=>j?.size||j?.variant?.size||"",A=j=>j?.sku||j?.variant?.sku||j?.product?.sku||"",b=j=>Number(j?.qty||1),w=j=>qe(j?.product?.main_photo_url||j?.product?.main_photo_path||j?.photo_url||j?.image_path||j?.photo||""),J=j=>{const C=w(j);return C?{backgroundImage:`url(${C})`}:{}};return Re(()=>{D(),le()}),ps(()=>{h&&clearInterval(h)}),(j,C)=>(c(),d("div",CT,[e("main",ST,[e("section",TT,[e("div",AT,[e("div",OT,[C[2]||(C[2]=e("div",{class:"stat-label"}," ",-1)),e("div",PT,g(n.value.length),1)]),C[3]||(C[3]=e("div",{class:"stat-bg-icon"},[e("i",{class:"bi bi-box-seam"})],-1))]),e("div",MT,[e("div",IT,[C[4]||(C[4]=e("div",{class:"stat-label"},"  ",-1)),e("div",DT,g(y.value),1)]),C[5]||(C[5]=e("div",{class:"stat-bg-icon"},[e("i",{class:"bi bi-list-task"})],-1))]),L.value>0?(c(),d("div",UT,[e("div",jT,[C[6]||(C[6]=e("div",{class:"stat-label"},"",-1)),e("div",FT,g(L.value),1)]),C[7]||(C[7]=e("div",{class:"stat-bg-icon pulse-icon"},[e("i",{class:"bi bi-exclamation-circle"})],-1))])):F("",!0)]),e("div",ET,[e("div",VT,[e("div",LT,[C[8]||(C[8]=e("i",{class:"bi bi-search"},null,-1)),ue(e("input",{"onUpdate:modelValue":C[0]||(C[0]=N=>o.value=N),type:"text",placeholder:"   ..."},null,512),[[he,o.value]])]),e("div",NT,[e("label",RT,[ue(e("input",{type:"checkbox","onUpdate:modelValue":C[1]||(C[1]=N=>i.value=N)},null,512),[[an,i.value]]),C[9]||(C[9]=e("span",{class:"switch-slider"},null,-1)),C[10]||(C[10]=e("span",{class:"switch-label"},"-",-1))])])]),e("div",qT,[e("button",{class:"btn-refresh",onClick:q,disabled:l.value,title:"  "},[e("i",{class:W(["bi bi-arrow-repeat",{spin:l.value}])},null,2)],8,BT),e("button",{class:"btn-main-action",disabled:y.value===0,onClick:Y},[...C[11]||(C[11]=[e("span",{class:"btn-content"},[e("i",{class:"bi bi-play-fill"}),te("   ")],-1)])],8,HT)])]),e("div",zT,[pe(Li,{name:"stagger"},{default:Oe(()=>[(c(!0),d(de,null,ve(k.value,(N,re)=>(c(),d("div",{key:N.id,class:W(["order-row-modern",{"is-priority":N.is_priority&&v(N),"is-processing":p(N),"is-packed":f(N)}])},[N.is_priority&&!f(N)?(c(),d("div",WT)):F("",!0),e("div",KT,[e("div",GT,[e("div",XT,[e("span",JT,"#"+g(N.order_number),1),p(N)?(c(),d("span",QT,[...C[12]||(C[12]=[e("i",{class:"bi bi-lightning-fill"},null,-1),te("   ",-1)])])):f(N)?(c(),d("span",YT,[...C[13]||(C[13]=[e("i",{class:"bi bi-check-lg"},null,-1),te("  ",-1)])])):(c(),d("span",ZT,""))]),e("div",e7,[C[14]||(C[14]=e("i",{class:"bi bi-geo-alt-fill"},null,-1)),te(" "+g(N.delivery?.city_name||"  "),1)])]),e("div",t7,[e("div",{class:W(["thumb-stack",{"opacity-50":f(N)}])},[(c(!0),d(de,null,ve(Be(N.items),(oe,x)=>(c(),d("div",{key:x,class:"avatar",style:Te(me(oe))},null,4))),128)),N.items?.length>3?(c(),d("div",s7,"+"+g(N.items.length-3),1)):F("",!0)],2),e("div",n7,g(N.items?.length)+" "+g(Le(N.items?.length,["","",""])),1)]),e("div",l7,[C[17]||(C[17]=e("div",{class:"timing-label"},"",-1)),e("div",o7,[f(N)?(c(),d("span",i7,[C[15]||(C[15]=e("i",{class:"bi bi-clock-history"},null,-1)),te(" "+g(z(N.packed_at)),1)])):p(N)?(c(),d("span",a7,[C[16]||(C[16]=te("  ",-1)),N.packer?.name?(c(),d("span",r7," "+g(N.packer.name),1)):F("",!0),N.active_packing_session?.started_at?(c(),d("span",c7," "+g(z(N.active_packing_session.started_at)),1)):F("",!0)])):(c(),d("span",d7,g(G(N.created_at))+" ",1))])]),e("div",u7,[f(N)?(c(),d("button",{key:0,class:"btn-action-secondary",onClick:ge(oe=>U(N),["stop"])},[...C[18]||(C[18]=[e("i",{class:"bi bi-info-circle me-1"},null,-1),te("  ",-1)])],8,f7)):p(N)?(c(),d("div",m7,[e("button",{class:"btn-action-primary continue",onClick:oe=>M(N.id)},[...C[19]||(C[19]=[te("  ",-1),e("i",{class:"bi bi-arrow-right"},null,-1)])],8,p7),N.can_release?(c(),d("button",{key:0,class:"btn-action-link",onClick:ge(oe=>Z(N),["stop"])},[...C[20]||(C[20]=[e("i",{class:"bi bi-unlock me-1"},null,-1),te("  ",-1)])],8,v7)):F("",!0)])):(c(),d("button",{key:2,class:"btn-action-primary",onClick:oe=>M(N.id)},"  ",8,b7))])])],2))),128))]),_:1}),!k.value.length&&!l.value?(c(),d("div",g7,[...C[21]||(C[21]=[e("div",{class:"empty-icon"},[e("i",{class:"bi bi-inbox"})],-1),e("h3",null," ",-1),e("p",null,"  .",-1)])])):F("",!0)])]),pe(Fe,{name:"fade"},{default:Oe(()=>[a.value?(c(),d("div",{key:0,class:"packing-modal-overlay",onClick:ge(O,["self"])},[e("div",h7,[e("div",y7,[e("div",null,[C[22]||(C[22]=e("div",{class:"modal-title"}," ",-1)),e("div",_7,[te(" "+g(H.value)+" ",1),E.value?(c(),d("span",$7," "+g(fe(E.value)),1)):F("",!0)])]),e("button",{class:"modal-close",onClick:O,"aria-label":""},[...C[23]||(C[23]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("div",k7,[e("div",x7,[e("div",w7,[C[32]||(C[32]=e("div",{class:"section-title"},"",-1)),e("div",C7,[C[24]||(C[24]=e("span",{class:"detail-label"},"",-1)),e("span",S7,g(V.value),1)]),e("div",T7,[C[25]||(C[25]=e("span",{class:"detail-label"}," ",-1)),e("span",A7,g(E.value?fe(E.value):""),1)]),e("div",O7,[C[26]||(C[26]=e("span",{class:"detail-label"},"",-1)),e("span",P7,g(P.value.ttn||""),1)]),e("div",M7,[C[27]||(C[27]=e("span",{class:"detail-label"},"",-1)),e("span",I7,g(Q.value),1)]),e("div",D7,[C[28]||(C[28]=e("span",{class:"detail-label"},"",-1)),e("span",U7,g(ee.value),1)]),e("div",j7,[C[29]||(C[29]=e("span",{class:"detail-label"},"",-1)),e("span",F7,g(B.value),1)]),e("div",E7,[C[30]||(C[30]=e("span",{class:"detail-label"},"",-1)),e("span",V7,g(P.value.city_name||""),1)]),e("div",L7,[C[31]||(C[31]=e("span",{class:"detail-label"},"",-1)),e("span",N7,g(P.value.warehouse_name||""),1)])]),e("div",R7,[C[33]||(C[33]=e("div",{class:"section-title"},"",-1)),e("div",q7,[(c(!0),d(de,null,ve(K.value,(N,re)=>(c(),d("div",{key:re,class:"modal-item"},[e("div",{class:"modal-item-thumb",style:Te(J(N))},null,4),e("div",B7,[e("div",H7,g(X(N)),1),e("div",z7,[e("span",null,": "+g(be(N)),1),e("span",null,": "+g(ie(N)),1),e("span",null,"SKU: "+g(A(N)),1)])]),e("div",W7,"x"+g(b(N)),1)]))),128)),K.value.length?F("",!0):(c(),d("div",K7," "))])])])]),e("div",G7,[e("button",{class:"btn-modal-secondary",onClick:O},""),e("button",{class:"btn-modal-primary",disabled:!T.value||u.value,onClick:$},[C[34]||(C[34]=e("i",{class:"bi bi-printer me-1"},null,-1)),te(" "+g(u.value?"...":" "),1)],8,X7)])])])):F("",!0)]),_:1})]))}},Q7=xe(J7,[["__scopeId","data-v-f2169a9f"]]),Y7={class:"packing-app"},Z7={class:"navbar modern-navbar"},eA={class:"container-fluid d-flex justify-content-between align-items-center px-lg-4 position-relative"},tA={class:"nav-center-info d-none d-md-flex flex-column align-items-center"},sA={class:"nav-order-num"},nA={class:"font-monospace"},lA={key:0,class:"nav-order-city"},oA={class:"chart-wrapper"},iA={viewBox:"0 0 36 36",class:"circular-chart-sm"},aA=["stroke-dasharray"],rA={key:0,class:"check-icon-overlay"},cA={class:"pill-content"},dA={class:"pill-value"},uA={class:"main-layout container-fluid"},fA={class:"row h-100 g-0"},mA={class:"col-12 col-lg-8 product-section"},pA={class:"section-header d-flex justify-content-between align-items-end"},vA={class:"d-md-none fw-bold fs-5"},bA={class:"progress mt-3 mb-4",style:{height:"6px","border-radius":"3px"}},gA={class:"product-grid"},hA=["onClick"],yA={class:"card-body d-flex align-items-center gap-4"},_A=["onClick"],$A=["src"],kA={key:1,class:"placeholder-img"},xA={class:"prod-content flex-grow-1"},wA={class:"d-flex justify-content-between align-items-start mb-2"},CA={class:"prod-title"},SA={class:"sku-badge"},TA={class:"specs-grid"},AA={class:"spec-item"},OA={class:"d-flex align-items-center gap-2"},PA={class:"spec-val"},MA={class:"spec-item"},IA={class:"spec-val size-val"},DA={class:"col-12 col-lg-4 info-sidebar"},UA={class:"sidebar-content d-flex flex-column"},jA={key:0,class:"alert alert-warning border-0 shadow-sm mb-4 d-flex gap-3 align-items-start"},FA={class:"lh-sm fw-bold"},EA={class:"data-list compact-list"},VA={class:"data-row"},LA={class:"d-val d-flex align-items-center gap-2"},NA={class:"text-dark fw-black"},RA={class:"badge bg-warning text-dark border border-warning border-opacity-25"},qA={class:"data-row"},BA={class:"d-val"},HA={key:0,class:"badge bg-danger bg-opacity-10 text-danger border border-danger border-opacity-25"},zA={key:1,class:"badge bg-success bg-opacity-10 text-success border border-success border-opacity-25"},WA={class:"d-val font-monospace"},KA={class:"d-val font-monospace"},GA={class:"data-row"},XA={class:"d-val text-truncate"},JA={class:"data-row"},QA={class:"d-val"},YA={class:"data-row border-0 pb-0"},ZA={class:"d-val small lh-sm"},e9={class:"actions-footer mt-4"},t9={class:"d-flex flex-column gap-2 mb-3"},s9=["disabled"],n9=["disabled"],l9={class:"d-flex align-items-center gap-3 w-100 justify-content-center"},o9=["disabled"],i9={class:"btn-inner"},a9={class:"d-flex flex-column align-items-start lh-1"},r9={class:"main-text"},c9={key:0,class:"sub-text"},d9={key:1,class:"sub-text"},u9={key:2,class:"sub-text"},f9=["src"],m9={key:0,class:"success-screen"},p9={key:0,class:"success-screen"},v9={class:"success-content text-center"},b9={class:"stats-card mb-5"},g9={class:"stat-box"},h9={class:"stat-val text-success"},y9={class:"stat-box"},_9={class:"stat-val"},$9={class:"modal fade",id:"ttnModal",tabindex:"-1","aria-hidden":"true"},k9={class:"modal-dialog modal-dialog-centered modal-lg"},x9={class:"modal-content border-0 shadow-lg rounded-4 overflow-hidden"},w9={class:"modal-body text-center p-5 bg-white position-relative"},C9={class:"ttn-head"},S9={class:"ttn-tail"},T9={class:"modal fade",id:"skipModal",tabindex:"-1","aria-hidden":"true"},A9={class:"modal-dialog modal-dialog-centered"},O9={class:"modal-content border-0 shadow-lg rounded-4"},P9={class:"modal-body p-0"},M9={class:"list-group list-group-flush"},I9=["onClick"],D9={key:0,class:"bi bi-check-circle-fill text-warning"},U9={class:"p-3"},j9="#invoiceModal .btn-brand-accent",F9={__name:"PackingWorkspace",props:{order:{type:Object,default:null}},setup(t){const s=t,n=S([]),l=[" ","","",""],o=S(l[0]),i=S(""),a=S(!1),r=S(null),u=S(!1),h=S(!1),v=S(!1),p=S(!1),f=S({packed:0,total:0}),m=O=>{if(!O)return null;if(O.startsWith("http")||O.startsWith("/"))return O;const $=O.replace(/^\/+/,"");return $.startsWith("storage/")?`/${$}`:`/storage/${$}`},y=O=>{const $=(O||"").toLowerCase();return $.includes("")||$.includes("black")?"bg-dark":$.includes("")||$.includes("white")?"bg-light border":$.includes("")||$.includes("gray")||$.includes("grey")?"bg-secondary":$.includes("")||$.includes("blue")?"bg-primary":$.includes("")||$.includes("green")?"bg-success":$.includes("")||$.includes("red")?"bg-danger":$.includes("")||$.includes("yellow")?"bg-warning":"bg-secondary"},L=O=>{const $=O?.delivery||{},le=O?.customer||{},G=$.recipient_name||[le.first_name,le.last_name].filter(Boolean).join(" ").trim()||"",z=$.warehouse_name||[$.street_name,$.building,$.apartment].filter(Boolean).join(", ")||"",fe=$.carrier||$.delivery_type||$.service_type||"",Le=O?.payment_status||"",qe=!Le||Le==="not_paid"||O?.payment?.method==="cod";return{id:O?.id||null,number:O?.order_number||"",ttn:$.ttn||"",phone:$.recipient_phone||le.phone||"",recipient:G,city:$.city_name||"",branch:z,deliveryService:fe,comment:O?.comment_internal||O?.comment||"",isCod:qe}},K=O=>{const $=Array.isArray(O?.items)?O.items:[],le=[];return $.forEach(G=>{const z=G?.product,fe=G?.variant,Le=Number(G?.qty||1),qe=z?.title||"",Be=Le>1?`${qe} (x${Le})`:qe,me=m(z?.main_photo_url||null);le.push({id:G?.id,sku:fe?.sku||"",name:Be,color:z?.color?.name||"",size:fe?.size||"",checked:!1,colorClass:y(z?.color?.name),image:me})}),le},P=se(()=>L(s.order));Se(()=>s.order,O=>{n.value=K(O)},{immediate:!0});const H=se(()=>n.value.filter(O=>O.checked).length),E=se(()=>n.value.length>0&&H.value===n.value.length),I=se(()=>{const O=n.value.length;return O?H.value/O*100:0}),V=se(()=>E.value&&u.value),Q=se(()=>E.value?u.value?"":" ":" "),ee=se(()=>{const O=P.value.ttn.replace(/\s/g,"");if(O.length<=4)return{head:"",tail:O};const $=O.slice(0,-4),le=O.slice(-4);return{head:$.replace(/(\d{4})(?=\d)/g,"$1 "),tail:le}}),B=O=>{O.checked=!O.checked},T=O=>{O.image&&(r.value=O.image,a.value=!0)},k=()=>{a.value=!1},_=()=>{u.value=!0},D=async O=>{try{await navigator.clipboard.writeText(O),alert("!")}catch{}},q=async O=>{try{return await we.post("http://localhost:4000/print",{url:O}),!0}catch{return!1}},M=async()=>{h.value=!0,_();try{const O=P.value.id;if(!O){h.value=!1;return}const{data:$}=await we.get(`/orders/${O}/print-ttn`);$?.print_url?await q($.print_url)||window.open($.print_url,"_blank"):alert($?.message||"   ")}catch{alert("  ")}finally{h.value=!1}},Y=async()=>{if(V.value){p.value=!0;try{const O=P.value.id;if(!O)return;await we.post(`/packing/${O}/finish`);const{data:$}=await we.get("/api/packing/list"),le=Array.isArray($)?$.find(G=>String(G.id)!==String(O)&&(G.packing_status==="pending"||!G.packing_status)):null;setTimeout(async()=>{if(le)window.location.href=`/packing/${le.id}`;else{p.value=!1;try{const{data:G}=await we.get("/api/packing/history"),z=Array.isArray(G)?G.length:0;f.value.packed=z,f.value.total=z}catch{}v.value=!0}},1500)}catch(O){p.value=!1,alert(O.response?.data?.error||"  ")}}},Z=async()=>{try{const O=P.value.id;if(!O)return;await we.post(`/packing/${O}/problem`,{reason:o.value,comment:i.value});const{data:$}=await we.get("/api/packing/list"),le=Array.isArray($)?$.find(G=>String(G.id)!==String(O)&&(G.packing_status==="pending"||!G.packing_status)):null;le?window.location.href=`/packing/${le.id}`:window.location.href="/packing/list"}catch(O){alert(O.response?.data?.error||"   ")}};let U=null;return Re(()=>{U=document.querySelector(j9),U&&U.addEventListener("click",M)}),ps(()=>{U&&U.removeEventListener("click",M),U=null}),(O,$)=>(c(),d("div",Y7,[e("nav",Z7,[e("div",eA,[$[12]||($[12]=Fs('<div class="d-flex align-items-center gap-3" data-v-87110d44><a href="/packing/list" class="brand-logo-modern text-decoration-none" title="  " data-v-87110d44><i class="bi bi-chevron-left" data-v-87110d44></i></a><div class="nav-divider d-none d-sm-block" data-v-87110d44></div><div class="nav-context d-none d-sm-block" data-v-87110d44><div class="context-label" data-v-87110d44> </div><div class="context-title" data-v-87110d44></div></div></div>',1)),e("div",tA,[e("div",sA,[$[6]||($[6]=te(" ",-1)),e("span",nA,"#"+g(P.value.number),1)]),P.value.city?(c(),d("div",lA,[$[7]||($[7]=e("i",{class:"bi bi-geo-alt-fill text-danger opacity-75"},null,-1)),te(" "+g(P.value.city),1)])):F("",!0)]),e("div",{class:W(["progress-pill-modern",{"is-done":E.value}])},[e("div",oA,[(c(),d("svg",iA,[$[8]||($[8]=e("path",{class:"circle-bg",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"},null,-1)),e("path",{class:"circle","stroke-dasharray":`${I.value}, 100`,d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"},null,8,aA)])),E.value?(c(),d("div",rA,[...$[9]||($[9]=[e("i",{class:"bi bi-check"},null,-1)])])):F("",!0)]),e("div",cA,[$[11]||($[11]=e("div",{class:"pill-label"}," ",-1)),e("div",dA,[e("span",{class:W({"text-success":E.value})},g(H.value),3),$[10]||($[10]=e("span",{class:"text-muted fw-normal"},"/",-1)),te(" "+g(n.value.length),1)])])],2)])]),e("div",uA,[e("div",fA,[e("div",mA,[e("div",pA,[$[13]||($[13]=e("div",null,[e("h1",{class:"page-heading"}," "),e("div",{class:"text-muted fw-bold"},"   ")],-1)),e("div",vA,g(H.value)+" / "+g(n.value.length),1)]),e("div",bA,[e("div",{class:"progress-bar bg-success transition-width",role:"progressbar",style:Te({width:I.value+"%"})},null,4)]),e("div",gA,[pe(Li,{name:"list"},{default:Oe(()=>[(c(!0),d(de,null,ve(n.value,le=>(c(),d("div",{key:le.id,class:W(["modern-card",{"is-completed":le.checked}]),onClick:G=>B(le)},[$[19]||($[19]=e("div",{class:"card-status-strip"},null,-1)),e("div",yA,[e("div",{class:"prod-img-wrapper",onClick:ge(G=>T(le),["stop"])},[le.image?(c(),d("img",{key:0,src:le.image,loading:"lazy"},null,8,$A)):(c(),d("div",kA,[...$[14]||($[14]=[e("i",{class:"bi bi-image"},null,-1)])])),$[15]||($[15]=e("div",{class:"zoom-icon"},[e("i",{class:"bi bi-arrows-angle-expand"})],-1))],8,_A),e("div",xA,[e("div",wA,[e("h3",CA,g(le.name),1),e("span",SA,g(le.sku),1)]),e("div",TA,[e("div",AA,[$[16]||($[16]=e("span",{class:"spec-label"},"",-1)),e("div",OA,[e("span",{class:W(["color-dot",le.colorClass])},null,2),e("span",PA,g(le.color),1)])]),e("div",MA,[$[17]||($[17]=e("span",{class:"spec-label"},"",-1)),e("span",IA,g(le.size),1)])])]),$[18]||($[18]=e("div",{class:"action-area"},[e("div",{class:"check-circle"},[e("i",{class:"bi bi-check-lg"})])],-1))])],10,hA))),128))]),_:1})])]),e("div",DA,[e("div",UA,[$[31]||($[31]=e("div",{class:"info-header mb-3"},[e("h5",{class:"fw-bold m-0"}," ")],-1)),P.value.comment?(c(),d("div",jA,[$[21]||($[21]=e("i",{class:"bi bi-chat-right-text-fill fs-4 mt-1"},null,-1)),e("div",null,[$[20]||($[20]=e("div",{class:"fw-bold text-uppercase small mb-1 opacity-75"}," ",-1)),e("div",FA,g(P.value.comment),1)])])):F("",!0),e("div",EA,[e("div",VA,[$[22]||($[22]=e("div",{class:"d-label"},"",-1)),e("div",LA,[e("span",NA,""+g(P.value.number),1),e("span",RA,g(P.value.deliveryService),1)])]),e("div",qA,[$[23]||($[23]=e("div",{class:"d-label"},"",-1)),e("div",BA,[P.value.isCod?(c(),d("span",HA,"")):(c(),d("span",zA,""))])]),e("div",{class:"data-row clickable",onClick:$[0]||($[0]=le=>D(P.value.ttn)),title:""},[$[24]||($[24]=e("div",{class:"d-label"},[te(" "),e("i",{class:"bi bi-copy ms-1 opacity-50"})],-1)),e("div",WA,g(P.value.ttn),1)]),e("div",{class:"data-row clickable",onClick:$[1]||($[1]=le=>D(P.value.phone)),title:""},[$[25]||($[25]=e("div",{class:"d-label"},[te(" "),e("i",{class:"bi bi-copy ms-1 opacity-50"})],-1)),e("div",KA,g(P.value.phone),1)]),e("div",GA,[$[26]||($[26]=e("div",{class:"d-label"},"",-1)),e("div",XA,g(P.value.recipient),1)]),e("div",JA,[$[27]||($[27]=e("div",{class:"d-label"},"",-1)),e("div",QA,g(P.value.city),1)]),e("div",YA,[$[28]||($[28]=e("div",{class:"d-label"},"",-1)),e("div",ZA,g(P.value.branch),1)])]),e("div",e9,[e("div",t9,[e("button",{class:"btn-soft-massive w-100",disabled:!E.value,"data-bs-toggle":"modal","data-bs-target":"#ttnModal",onClick:_},[...$[29]||($[29]=[e("div",{class:"d-flex align-items-center gap-3 w-100 justify-content-center"},[e("i",{class:"bi bi-qr-code-scan"}),e("span",null," ")],-1)])],8,s9),e("button",{class:W(["btn-soft-massive w-100",{printing:h.value}]),disabled:!E.value,onClick:M},[e("div",l9,[e("i",{class:W(["bi",h.value?"bi-hourglass-split spin":"bi-printer"])},null,2),e("span",null,g(h.value?" ":" "),1)])],10,n9)]),e("button",{class:"btn-brand-accent w-100 mb-3",disabled:!V.value,onClick:Y},[e("div",i9,[e("i",{class:W(["bi",V.value?"bi-check-circle-fill":E.value?"bi-printer":"bi-box-seam"])},null,2),e("div",a9,[e("span",r9,g(Q.value),1),V.value?(c(),d("span",c9,"  ")):E.value?(c(),d("span",d9,"   ")):(c(),d("span",u9,g(H.value)+"  "+g(n.value.length)+" ",1))])])],8,o9),$[30]||($[30]=e("button",{class:"btn-skip-massive w-100","data-bs-toggle":"modal","data-bs-target":"#skipModal"},[e("i",{class:"bi bi-exclamation-triangle"}),e("span",null," /  ")],-1))])])])])]),pe(Fe,{name:"fade"},{default:Oe(()=>[a.value?(c(),d("div",{key:0,class:"lightbox",onClick:k},[$[32]||($[32]=e("button",{class:"close-lightbox"},[e("i",{class:"bi bi-x-lg"})],-1)),e("img",{src:r.value,onClick:$[2]||($[2]=ge(()=>{},["stop"]))},null,8,f9)])):F("",!0)]),_:1}),pe(Fe,{name:"fade"},{default:Oe(()=>[p.value?(c(),d("div",m9,[...$[33]||($[33]=[e("div",{class:"success-content text-center"},[e("div",{class:"success-icon mb-4"},[e("i",{class:"bi bi-check-lg"})]),e("h2",{class:"fw-bold mb-2"}," !"),e("p",{class:"text-muted mb-4"},"   ..."),e("div",{class:"loading-spinner-wrapper"},[e("div",{class:"spinner-border text-primary",role:"status"})])],-1)])])):F("",!0)]),_:1}),pe(Fe,{name:"fade"},{default:Oe(()=>[v.value?(c(),d("div",p9,[e("div",v9,[$[37]||($[37]=e("div",{class:"success-icon mb-4"},[e("i",{class:"bi bi-check-lg"})],-1)),$[38]||($[38]=e("h1",{class:"display-4 fw-black mb-3"}," ! ",-1)),$[39]||($[39]=e("p",{class:"fs-4 text-muted mb-5"},"   .",-1)),e("div",b9,[e("div",g9,[e("div",h9,g(f.value.packed),1),$[34]||($[34]=e("div",{class:"stat-lbl"},"",-1))]),$[36]||($[36]=e("div",{class:"stat-divider"},null,-1)),e("div",y9,[e("div",_9,g(f.value.total),1),$[35]||($[35]=e("div",{class:"stat-lbl"},"",-1))])]),$[40]||($[40]=e("a",{href:"/packing/list",class:"btn btn-dark btn-lg rounded-pill px-5 py-3 fw-bold"},[e("i",{class:"bi bi-arrow-left me-2"}),te("    ")],-1))]),$[41]||($[41]=e("div",{class:"confetti c1"},"",-1)),$[42]||($[42]=e("div",{class:"confetti c2"},"",-1)),$[43]||($[43]=e("div",{class:"confetti c3"},"",-1))])):F("",!0)]),_:1}),e("div",$9,[e("div",k9,[e("div",x9,[e("div",w9,[$[45]||($[45]=e("button",{type:"button",class:"btn-close position-absolute top-0 end-0 m-4","data-bs-dismiss":"modal"},null,-1)),$[46]||($[46]=e("h6",{class:"text-uppercase text-muted letter-spacing-2 mb-4 fw-bold"}," ",-1)),e("div",{class:"ttn-display-large mb-5",onClick:$[3]||($[3]=le=>D(P.value.ttn))},[e("span",C9,g(ee.value.head),1),e("span",S9,g(ee.value.tail),1)]),e("button",{class:"btn-brand-accent w-100 py-3 rounded-4",onClick:$[4]||($[4]=le=>D(P.value.ttn))},[...$[44]||($[44]=[e("i",{class:"bi bi-clipboard me-2"},null,-1),te("  ",-1)])])])])])]),e("div",{class:"modal fade",id:"invoiceModal",tabindex:"-1","aria-hidden":"true"},[e("div",{class:"modal-dialog modal-dialog-centered modal-lg"},[e("div",{class:"modal-content border-0 shadow-lg rounded-4"},[$[49]||($[49]=e("div",{class:"modal-header border-0 pb-0"},[e("h5",{class:"fw-bold ps-3 pt-3"},""),e("button",{class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",{class:"modal-body p-4 text-center"},[$[48]||($[48]=e("div",{class:"bg-light rounded-3 p-5 border border-dashed d-flex flex-column align-items-center"},[e("i",{class:"bi bi-file-pdf display-1 text-danger mb-3"}),e("h5",null,"  PDF")],-1)),e("button",{class:"btn-brand-accent w-100 py-3 mt-4 rounded-4",onClick:M},[...$[47]||($[47]=[e("i",{class:"bi bi-printer me-2"},null,-1),te("",-1)])])])])])]),e("div",T9,[e("div",A9,[e("div",O9,[$[50]||($[50]=e("div",{class:"modal-header border-0"},[e("h5",{class:"fw-bold text-danger"},"  "),e("button",{class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",P9,[e("div",M9,[(c(),d(de,null,ve(l,le=>e("button",{key:le,class:"list-group-item list-group-item-action p-3 d-flex align-items-center justify-content-between",onClick:G=>o.value=le},[te(g(le)+" ",1),o.value===le?(c(),d("i",D9)):F("",!0)],8,I9)),64))]),e("div",U9,[ue(e("textarea",{class:"form-control bg-light border-0",rows:"3",placeholder:"...","onUpdate:modelValue":$[5]||($[5]=le=>i.value=le)},null,512),[[he,i.value]]),e("button",{class:"btn-skip-massive w-100 mt-3","data-bs-dismiss":"modal",onClick:Z}," ")])])])])])]))}},E9=xe(F9,[["__scopeId","data-v-87110d44"]]);function V9(t="#crm-order-create"){const s=document.querySelector(t);if(!s)return;const n=Je(lp,{initialOrderId:s.dataset.orderId||null});return n.mount(s),n}function L9(t="#crm-order-edit"){const s=document.querySelector(t);if(!s)return;const n=Je(Ep,{initialOrderId:s.dataset.orderId||null});return n.mount(s),n}function N9(t="#crm-product-list"){const s=document.querySelector(t);if(!s)return;const n=Je(c0);return n.mount(s),n}function R9(t="#crm-product-form"){const s=document.querySelector(t);if(!s)return;const n=s.dataset.product?JSON.parse(s.dataset.product):null,l=Je(q$,{initialProduct:n});return l.mount(s),l}function q9(t="#crm-order-list"){const s=document.querySelector(t);if(!s)return;const n=Je(__);return n.mount(s),n}function B9(t="#crm-customer-list"){const s=document.querySelector(t);if(!s)return;const n=Je(jC);return n.mount(s),n}function H9(t="#packing-list"){const s=document.querySelector(t);if(!s)return;const n=Je(Q7);return n.mount(s),n}function z9(t="#packing-workspace"){const s=document.querySelector(t);if(!s)return;const n=s.dataset.order||null,l=n?JSON.parse(n):null,o=Je(E9,{order:l});return o.mount(s),o}function W9(t="#crm-chat"){const s=document.querySelector(t);if(!s){window.__CHAT_DEBUG&&console.warn("[chat] mount target not found",t);return}const n=Je(V3);return n.mount(s),window.__CHAT_DEBUG&&console.info("[chat] mounted",t),n}function K9(t="#crm-chat-funnel"){const s=document.querySelector(t);if(!s)return;const n=Je(iC);return n.mount(s),n}function G9(t="#crm-gallery"){const s=document.querySelector(t);if(!s)return;const n=Je(_C);return n.mount(s),n}function X9(t="#crm-finance"){const s=document.querySelector(t);if(!s)return;const n=Je(H8);return n.mount(s),n}function J9(t="#crm-settings-categories"){const s=document.querySelector(t);if(!s)return;const n=Je(_6);return n.mount(s),n}function Q9(t="#crm-settings-colors"){const s=document.querySelector(t);if(!s)return;const n=Je(Z6);return n.mount(s),n}function Y9(t="#crm-settings-tags"){const s=document.querySelector(t);if(!s)return;const n=Je(DS);return n.mount(s),n}function Z9(t="#crm-settings-nova-poshta"){const s=document.querySelector(t);if(!s)return;const n=Je(wT);return n.mount(s),n}function bo(){V9(),L9(),q9(),B9(),N9(),R9(),H9(),z9(),W9(),K9(),G9(),X9(),J9(),Q9(),Y9(),Z9()}document.readyState!=="loading"?bo():document.addEventListener("DOMContentLoaded",bo);
